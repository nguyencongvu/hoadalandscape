(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{"0c18":function(t,e,n){},"919b":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-layout",[t.c.canAccessModule(t.collection,t.profile.roles)?s("div",[s("q-toolbar",[s("div",[s("div",{staticClass:" bold-font text-h5 q-mr-lg"},[t._v(t._s(t.c.t("Task List"))+"\n                    "),t.loading?s("q-spinner-dots",{staticClass:"q-ml-sm",attrs:{color:"primary"}}):t._e()],1)]),s("q-space"),s("q-input",{staticStyle:{width:"25%"},attrs:{dense:"","bg-color":"white",outlined:"",placeholder:t.c.t("Search")+"..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("q-space"),s("q-btn",{attrs:{flat:"",round:"",icon:"refresh"},on:{click:function(e){t.search="",t.filterText="",t.getAll()}}}),t.c.canPrint(t.collection,t.profile.roles)?s("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(e){return t.print("print-list")}}}):t._e(),s("q-btn",{attrs:{flat:"",round:"",icon:"date_range"}},[s("q-menu",[s("TimeRange",{on:{reloadTimeRange:t.filterTime}})],1)],1)],1),s("q-separator"),s("div",{staticClass:"row",staticStyle:{height:"90vh"}},[s("div",{staticClass:"col-12 col-md-3 border-right"},[s("div",{staticClass:"text-subtitle1 bold-font q-mx-md"},[s("q-icon",{attrs:{name:"play_arrow",color:"blue"}}),t._v(" "+t._s(t.c.t("To Do"))+"\n                    "),s("q-badge",{attrs:{color:"info"}},[t._v(t._s(t.todo.length)+"\n                    ")])],1),s("q-separator"),s("q-list",{attrs:{separator:""}},t._l(t.todo,(function(e,n){return s("q-item",{key:e._id},[s("q-item-section",{staticClass:"cursor-pointer",attrs:{avatar:""},on:{click:function(n){return t.changeStatus(e)}}},[s("Dot",{key:t.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.status}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-caption",attrs:{lines:"2"}},[t._v(t._s(e.message))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.sender)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v("\n                                "+t._s(e.assign)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v(" "+t._s(e.priority)+"\n                            ")],1)],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.dueDate(new Date(e.date_end),new Date))+"\n                                "+t._s(t.c.t("days"))+"\n                            ")]),s("q-chip",{staticClass:"bg-white cursor-pointer",attrs:{size:"sm",outline:"",clickable:""},on:{click:function(n){return t.c.goto(e.collection+"/"+e.doc_id+"/task")}}},[t._v("\n                                "+t._s(e.collection)+" "+t._s(e.doc_id)+"\n                            ")])],1)],1)})),1)],1),s("div",{staticClass:"col-12 col-md-3 border-right"},[s("div",{staticClass:"text-subtitle1 bold-font q-mx-md"},[s("q-icon",{attrs:{name:"pending",color:"orange"}}),t._v("\n                    "+t._s(t.c.t("Doing"))+" "),s("q-badge",{attrs:{color:"info"}},[t._v(t._s(t.doing.length)+"\n                    ")])],1),s("q-separator"),s("q-list",{attrs:{separator:""}},t._l(t.doing,(function(e,n){return s("q-item",{key:e._id},[s("q-item-section",{staticClass:"cursor-pointer",attrs:{avatar:""},on:{click:function(n){return t.changeStatus(e)}}},[s("Dot",{key:t.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.status}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-caption",attrs:{lines:"2"}},[t._v(t._s(e.message))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.sender)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v("\n                                "+t._s(e.assign)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v(" "+t._s(e.priority)+"\n                            ")],1)],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.dueDate(new Date(e.date_end),new Date))+"\n                                "+t._s(t.c.t("days"))+"\n                            ")]),s("q-chip",{staticClass:"bg-white cursor-pointer",attrs:{size:"sm",outline:"",clickable:""},on:{click:function(n){return t.c.goto(e.collection+"/"+e.doc_id+"/task")}}},[t._v("\n                                "+t._s(e.collection)+" "+t._s(e.doc_id)+"\n                            ")])],1)],1)})),1)],1),s("div",{staticClass:"col-12 col-md-3 border-right"},[s("div",{staticClass:"text-subtitle1 bold-font q-mx-md"},[s("q-icon",{attrs:{name:"domain_verification",color:"green"}}),t._v("\n                    "+t._s(t.c.t("Done"))+" "),s("q-badge",{attrs:{color:"info"}},[t._v(t._s(t.done.length)+"\n                    ")])],1),s("q-separator"),s("q-list",{attrs:{separator:""}},t._l(t.done,(function(e,n){return s("q-item",{key:e._id},[s("q-item-section",{staticClass:"cursor-pointer",attrs:{avatar:""},on:{click:function(n){return t.changeStatus(e)}}},[s("Dot",{key:t.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.status}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-caption",attrs:{lines:"2"}},[t._v(t._s(e.message))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.sender)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v("\n                                "+t._s(e.assign)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v(" "+t._s(e.priority)+"\n                            ")],1)],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.dueDate(new Date(e.date_end),new Date))+"\n                                "+t._s(t.c.t("days"))+"\n                            ")]),s("q-chip",{staticClass:"bg-white cursor-pointer",attrs:{size:"sm",outline:"",clickable:""},on:{click:function(n){return t.c.goto(e.collection+"/"+e.doc_id+"/task")}}},[t._v("\n                                "+t._s(e.collection)+" "+t._s(e.doc_id)+"\n                            ")])],1)],1)})),1)],1),s("div",{staticClass:"col-12 col-md-3"},[s("q-toolbar",{staticClass:"no-padding"},[s("div",{staticClass:"text-subtitle1 bold-font q-mx-md"},[s("q-icon",{attrs:{name:"inventory",color:"grey"}}),t._v("\n                        "+t._s(t.c.t("Archive"))+" "),s("q-badge",{attrs:{color:"info"}},[t._v(t._s(t.archive.length)+"\n                        ")])],1),s("q-space"),s("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(e){return t.deleteArchive()}}})],1),s("q-separator"),s("q-list",{attrs:{separator:""}},t._l(t.archive,(function(e,n){return s("q-item",{key:e._id},[s("q-item-section",{staticClass:"cursor-pointer",attrs:{avatar:""},on:{click:function(n){return t.changeStatus(e)}}},[s("Dot",{key:t.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.status}})],1),s("q-item-section",[s("q-item-label",{staticClass:"text-caption",attrs:{lines:"2"}},[t._v(t._s(e.message))]),s("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.sender)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v("\n                                "+t._s(e.assign)+" "),s("q-icon",{attrs:{name:"chevron_right"}}),t._v(" "+t._s(e.priority)+"\n                            ")],1)],1),s("q-item-section",{attrs:{side:"",top:""}},[s("q-chip",{staticClass:"bg-white cursor-pointer",attrs:{size:"sm",outline:"",clickable:""},on:{click:function(n){return t.c.goto(e.collection+"/"+e.doc_id+"/task")}}},[t._v("\n                                "+t._s(e.collection)+" "+t._s(e.doc_id)+"\n                            ")])],1)],1)})),1)],1)])],1):s("div",[s("div",{staticClass:"absolute-center"},[s("q-img",{attrs:{width:"25vw",src:n("5183")}}),s("div",{staticClass:"text-center q-my-lg"},[t._v(t._s(t.c.t("Access Denied")))])],1)]),s("div",{staticClass:"absolute-bottom orientation-landscape"},[s("BarStats",{key:t.componentKey,attrs:{propCount:t.fsearch.length,propSum:t.fsearch.length}})],1),s("div",{ref:"print-list",staticClass:"print-only"},[s("div",{staticClass:"text-h6"},[t._v(t._s(t.c.t("Task List")))]),s("DataTable",{key:t.componentKey,attrs:{propData:t.fsearch,propVisibleColumns:["title","status","priority","date_end"]}})],1)])},i=[],a=(n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("4de4"),n("ac1f"),n("841c"),n("caad"),n("2532"),n("d81d"),n("c740"),n("7db0"),n("1276"),n("498a"),n("bd4c")),o={name:"ListAll",components:{TimeRange:function(){return n.e(1).then(n.bind(null,"e19d"))},FilterBy:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"2d2e"))},FilterByCategory:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"74db"))},Dot:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"9f7a"))},BarStats:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"9fda"))},DataTable:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"1fdb"))}},data:function(){return{loading:!1,c:this.$common,api:null,collection:"task",objects:[],selected:{id:null,title:null},selectedIndex:0,title:"",filterText:"",search:"",splitterModel:33,columns:[],visibleColumns:[],componentKey:0,tab:"info",timeFilter:null,filters:[],dialog:!1,showFilter:!1,page:1,offset:20,cboStatus:[]}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items},fsearch:function(){var t=this,e=t.objects;if(t.timeFilter){var n=t.timeFilter,s=new Date(n.from),i=new Date(n.to);e=e.filter((function(t){return a["b"].isBetweenDates(t.date_created,s,i)}))}t.filterText&&""!=t.filterText&&(e=e.filter((function(e){var n=t.filterText?t.filterText.toLowerCase():"",s=e.type?e.type.toLowerCase():"",i=e.status?e.status.toLowerCase():"",a=e.category?e.category.toLowerCase():"",o=e.groupname?e.groupname.toLowerCase():"",r=e.lang?e.lang.toLowerCase():"",c=e.category_slug?e.category_slug.toLowerCase():"";return s==n||i==n||a==n||o==n||r==n||c==n})));var o=t.search.toLowerCase();return""==o?e:e.filter((function(t){var e=t.title?t.title.toLowerCase():"",n=t.assign?t.assign.toLowerCase():"",s=t.collection?t.collection.toLowerCase():"";return e.includes(o)||n.includes(o)||s.includes(o)}))},todo:function(){var t=this;return t.fsearch.filter((function(t){return t.status&&"to do"==t.status.toLowerCase()}))},doing:function(){var t=this;return t.fsearch.filter((function(t){return t.status&&"doing"==t.status.toLowerCase()}))},done:function(){var t=this;return t.fsearch.filter((function(t){return t.status&&"done"==t.status.toLowerCase()}))},archive:function(){var t=this;return t.fsearch.filter((function(t){return t.status&&"archive"==t.status.toLowerCase()||!t.status}))}},mounted:function(){},created:function(){var t=this;t.api=new t.$api(t.collection),t.api.setDomain(t.profile.domain),t.page=1,t.offset=20,t.getAll(),t.cboStatus=t.loadCombo("task-status"),console.log("")},methods:{getAll:function(){var t=this;t.loading=!0,t.api.getAll(t.collection).then((function(e){if(console.log(""),e.data.count<=0)t.loading=!1;else{t.objects=t.orm(e.data.objects);var n=t.$route.params.id;n?t.select(n):(t.selected=t.objects[0],t.selectedIndex=0),t.loading=!1,t.forceRenderer()}}))},orm:function(t){var e=this,n=t;if(!Array.isArray(n))return[];if(n.length<=0)return[];var s=n;return s=e.c.canViewMeOnly(e.collection,e.profile.roles)?n.filter((function(t){return t.owner==e.profile.username})):n,s=s.map((function(t){var e=t;return e})),console.log(""),s||[]},loadCombo:function(t){var e=this;if(e.list.findIndex((function(e){return e.slug===t}))<0)return[];var n=e.list.find((function(e){return e.slug===t})).value;if(n.includes(",")){var s=n.split(",").map((function(t){return t.trim()}));return console.log(""),s}return n},changeStatus:function(t){var e=this,n=e.cboStatus.findIndex((function(e){return e==t.status})),s=0;s=n<=-1||n>2?0:n+1,t.status=e.cboStatus[s],t.date_updated=e.c.formatDataDate(new Date),t.date_end=e.c.formatDataDate(new Date);var i=t._id;delete t._id,e.api.update("task",i,t).then((function(t){e.getAll()}))},deleteArchive:function(){var t=this,e=confirm(t.c.t("Are you sure")+"?");e&&t.api.deleteBy("task","status","Archive").then((function(e){t.getAll(),t.c.toast(t.c.t("Task Deleted"),"black")}))},dueDate:function(t,e){var n=this,s=n.c.dateDiff(new Date(t),e);return s<0?n.c.t("Late")+" "+Math.abs(s):n.c.t("Still")+" "+Math.abs(s)},initFilter:function(){var t=this;t.filters=[{key:t.collection+"-type",text:t.c.t("Type")}]},setCategory:function(t){var e=this;console.log(""),e.filterText=t&&t.title?t.title:""},select:function(t){var e=this,n=e.objects.length>0?e.objects.find((function(e){return e._id==t})):{};e.selected=n||e.objects[0];var s=e.objects.length>0?e.objects.findIndex((function(e){return e._id==t})):0;e.selectedIndex=s,e.tab="info",e.forceRenderer()},fillUpsert:function(t){var e=this;e.getAll(),e.select(t)},showTab:function(t){var e=this;e.tab=t,e.search="",e.filterText=""},create:function(){var t=this;t.selected={id:null,title:"",slug:""},t.selectedIndex=-1,t.tab="upsert",t.forceRenderer()},filterTime:function(t){var e=this;e.timeFilter=t},fillFilter:function(t){var e=this;e.filterText=t},forceRenderer:function(){var t=this;t.$forceUpdate(),t.componentKey+=1},print:function(t){var e=this,n=e.$refs[t];n&&(e.c.print(n),e.forceRenderer())},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)}}},r=o,c=(n("eb4d"),n("2877")),l=n("4d5a"),u=n("068f"),d=n("65c6"),f=n("8380"),m=n("2c91"),p=n("27f9"),h=n("9c40"),_=n("4e73"),v=n("eb85"),g=n("0016"),b=n("58a8"),q=n("1c1c"),C=n("66e5"),y=n("4074"),w=n("0170"),k=n("b047"),x=n("eebe"),D=n.n(x),T=Object(c["a"])(r,s,i,!1,null,null,null);e["default"]=T.exports;D()(T,"components",{QLayout:l["a"],QImg:u["a"],QToolbar:d["a"],QSpinnerDots:f["a"],QSpace:m["a"],QInput:p["a"],QBtn:h["a"],QMenu:_["a"],QSeparator:v["a"],QIcon:g["a"],QBadge:b["a"],QList:q["a"],QItem:C["a"],QItemSection:y["a"],QItemLabel:w["a"],QChip:k["a"]})},eb4d:function(t,e,n){"use strict";n("0c18")}}]);