(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{"42b1":function(t,e,n){},b470:function(t,e,n){"use strict";n("42b1")},ec11:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-layout",[t.c.canAccessModule(t.collection,t.profile.roles)?r("q-splitter",{attrs:{limits:[33,100]},scopedSlots:t._u([{key:"before",fn:function(){return[r("div",{staticStyle:{height:"100vh"}},[r("q-toolbar",[r("div",[r("div",{staticClass:" bold-font text-h5"},[t._v(t._s(t.c.t("Products"))+"\n                            "),t.loading?r("q-spinner-dots",{staticClass:"q-ml-sm",attrs:{color:"primary"}}):t._e()],1)]),r("q-space"),t.c.canUpdate(t.collection,t.profile.roles)?r("q-btn",{attrs:{color:"primary",flat:"","no-caps":"",icon:"post_add",label:t.c.t("New")},on:{click:function(e){return t.create()}}}):t._e()],1),r("q-separator"),r("q-toolbar",[r("q-input",{staticClass:"fit",attrs:{dense:"","bg-color":"white",outlined:"",placeholder:t.c.t("Search")+"..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),r("q-space"),r("q-btn",{attrs:{flat:"",round:"",icon:"refresh"},on:{click:function(e){t.search="",t.filterText="",t.getAll()}}}),t.c.canPrint(t.collection,t.profile.roles)?r("q-btn",{attrs:{flat:"",round:"",icon:"print"},on:{click:function(e){return t.print("print-list")}}}):t._e(),r("q-btn",{attrs:{flat:"",round:"",icon:"date_range"}},[r("q-menu",[r("TimeRange",{on:{reloadTimeRange:t.filterTime}})],1)],1),r("q-btn",{attrs:{flat:"",round:"",icon:"filter_alt"},on:{click:function(e){t.showFilter=!t.showFilter}}})],1),r("q-separator"),t.showFilter?r("q-toolbar",[r("FilterBy",{attrs:{propObjects:t.filters},on:{reloadFilter:t.fillFilter}}),r("q-space"),r("FilterByCategory",{attrs:{propSlug:"product"},on:{reloadCategory:t.setCategory}})],1):t._e(),r("q-separator"),r("q-list",{attrs:{separator:""}},t._l(t.fsearch,(function(e,n){return r("q-item",{key:e._id,attrs:{clickable:"",active:n==t.selectedIndex,"active-class":"bg-info"},on:{click:function(r){t.select(e._id),t.selectedIndex=n}}},[r("q-item-section",{attrs:{avatar:""}},[r("Dot",{key:t.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.status}})],1),r("q-item-section",[r("q-item-label",{staticClass:"bold-font text-subtitle1",attrs:{lines:"1"}},[t._v(t._s(e.title))]),r("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.sku))])],1),r("q-item-section",{attrs:{side:"",top:""}},[r("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.c.formatCurrency(e.price))+"\n                            ")]),r("q-chip",{staticClass:"bg-white",attrs:{size:"sm",outline:""}},[t._v(t._s(e.instock))])],1)],1)})),1),r("q-separator"),r("div",{staticClass:"q-pb-lg"},[t._v("Â ")])],1)]},proxy:!0},t.c.isMobile()?null:{key:"separator",fn:function(){return[r("q-avatar",{attrs:{color:"primary","text-color":"white",size:"28px",icon:"drag_indicator"}})]},proxy:!0},{key:"after",fn:function(){return[r("q-toolbar",[r("div",{staticClass:"row q-gutter-md"},[r("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"visibility",label:t.c.t("View")},on:{click:function(e){return t.showTab("info")}}}),r("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"edit",label:t.c.t("Edit or Create")},on:{click:function(e){return t.showTab("upsert")}}}),r("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"task",label:t.c.t("Tasks")},on:{click:function(e){return t.showTab("task")}}})],1)]),r("q-separator"),r("div",{staticStyle:{height:"90vh"}},[r("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[r("q-tab-panel",{attrs:{name:"info"}},[r("q-scroll-area",{staticStyle:{height:"86vh"}},[r("Info",{key:t.componentKey,attrs:{propSelected:t.selected},on:{reloadRemove:function(e){return t.getAll()}}})],1)],1),r("q-tab-panel",{attrs:{name:"upsert"}},[r("q-scroll-area",{staticStyle:{height:"86vh"}},[t.selected?r("Upsert",{key:t.componentKey,attrs:{propSelected:t.selected},on:{reloadUpsert:t.fillUpsert}}):t._e()],1)],1),r("q-tab-panel",{attrs:{name:"task"}},[r("div",{staticClass:"text-caption"},[t._v(t._s(t.c.t("Task")))]),r("div",{staticClass:"text-h6 bold-font ellipis q-mb-md"},[t._v(t._s(t.selected.title))]),r("Task",{key:t.componentKey,attrs:{propCollection:t.collection,propId:t.selected._id}})],1)],1)],1)]},proxy:!0}],null,!0),model:{value:t.splitterModel,callback:function(e){t.splitterModel=e},expression:"splitterModel"}}):r("div",[r("div",{staticClass:"absolute-center"},[r("q-img",{attrs:{width:"25vw",src:n("5183")}}),r("div",{staticClass:"text-center q-my-lg"},[t._v(t._s(t.c.t("Access Denied")))])],1)]),r("div",{staticClass:"absolute-bottom orientation-landscape"},[r("BarStats",{key:t.componentKey,attrs:{propCount:t.fsearch.length,propSum:t.fsearch.length}})],1),r("div",{ref:"print-list",staticClass:"print-only"},[r("div",{staticClass:"text-h6"},[t._v(t._s(t.c.t("Products")))]),r("DataTable",{key:t.componentKey,attrs:{propData:t.fsearch,propVisibleColumns:["title","sku","price","instock"]}})],1)],1)},a=[],o=(n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("4de4"),n("ac1f"),n("841c"),n("caad"),n("2532"),n("d81d"),n("7db0"),n("c740"),n("bd4c")),i={name:"ListAll",components:{TimeRange:function(){return n.e(1).then(n.bind(null,"e19d"))},FilterBy:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"2d2e"))},FilterByCategory:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"74db"))},Info:function(){return n.e(1).then(n.bind(null,"ebd9"))},Upsert:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"31fb"))},Task:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"43fe"))},Dot:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"9f7a"))},BarStats:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"9fda"))},DataTable:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"1fdb"))}},data:function(){return{loading:!1,c:this.$common,api:null,collection:"product",objects:[],selected:{id:null,title:null},selectedIndex:0,title:"",filterText:"",search:"",splitterModel:33,columns:[],visibleColumns:[],componentKey:0,tab:"info",timeFilter:null,filters:[],dialog:!1,showFilter:!1,page:1,offset:20}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var t=this,e=t.objects;if(t.timeFilter){var n=t.timeFilter,r=new Date(n.from),a=new Date(n.to);e=e.filter((function(t){return o["b"].isBetweenDates(t.date_created,r,a)}))}t.filterText&&""!=t.filterText&&(e=e.filter((function(e){var n=t.filterText.toLowerCase(),r=e.type?e.type.toLowerCase():"",a=e.status?e.status.toLowerCase():"",o=e.category?e.category.toLowerCase():"",i=e.groupname?e.groupname.toLowerCase():"",l=e.lang?e.lang.toLowerCase():"",s=e.category_slug?e.category_slug.toLowerCase():"";return r==n||a==n||o==n||i==n||l==n||s==n})));var i=t.search.toLowerCase();return""==i?e:e.filter((function(t){var e=t.title?t.title.toLowerCase():"",n=t.slug?t.slug.toLowerCase():"";return e.includes(i)||n.includes(i)}))}},mounted:function(){},created:function(){var t=this;t.api=new t.$api(t.collection),t.api.setDomain(t.profile.domain),t.page=1,t.offset=20,t.getAll(),t.initFilter()},methods:{getAll:function(){var t=this;t.loading=!0,t.api.getAll(t.collection).then((function(e){if(console.log(""),e.data.count<=0)t.loading=!1;else{t.objects=t.orm(e.data.objects);var n=t.$route.params.id,r=t.$route.params.action;t.select(n,r),t.loading=!1,t.forceRenderer()}}))},orm:function(t){var e=this,n=t;if(!Array.isArray(n))return[];if(n.length<=0)return[];var r=n;return r=e.c.canViewMeOnly(e.collection,e.profile.roles)?n.filter((function(t){return t.owner==e.profile.username})):n,r=r.map((function(t){var e=t;return e})),console.log(""),r||[]},initFilter:function(){var t=this;t.filters=[{key:"cms-status",text:t.c.t("Status")},{key:"lang",text:t.c.t("Language")}]},setCategory:function(t){var e=this;console.log(""),e.filterText=t&&t.title?t.title:""},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=n.objects.length>0?n.objects.find((function(e){return e._id==t})):{};n.selected=r||n.objects[0];var a=n.objects.length>0?n.objects.findIndex((function(e){return e._id==t})):0;n.selectedIndex=a,e?n.showTab(e):n.showTab("info"),n.forceRenderer()},fillUpsert:function(t){var e=this;e.getAll(),e.select(t)},showTab:function(t){var e=this;e.tab=t,e.search="",e.filterText=""},create:function(){var t=this;t.selected={id:null,title:"",slug:""},t.selectedIndex=-1,t.tab="upsert",t.forceRenderer()},filterTime:function(t){var e=this;e.timeFilter=t},fillFilter:function(t){var e=this;e.filterText=t},forceRenderer:function(){var t=this;t.$forceUpdate(),t.componentKey+=1},print:function(t){var e=this,n=e.$refs[t];n&&(e.c.print(n),e.forceRenderer())},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)}}},l=i,s=(n("b470"),n("2877")),c=n("4d5a"),u=n("068f"),f=n("8562"),d=n("65c6"),p=n("8380"),b=n("2c91"),m=n("9c40"),h=n("eb85"),v=n("27f9"),g=n("4e73"),y=n("1c1c"),q=n("66e5"),w=n("4074"),_=n("0170"),C=n("0016"),k=n("b047"),x=n("cb32"),T=n("adad"),S=n("823b"),Q=n("4983"),F=n("eebe"),I=n.n(F),L=Object(s["a"])(l,r,a,!1,null,null,null);e["default"]=L.exports;I()(L,"components",{QLayout:c["a"],QImg:u["a"],QSplitter:f["a"],QToolbar:d["a"],QSpinnerDots:p["a"],QSpace:b["a"],QBtn:m["a"],QSeparator:h["a"],QInput:v["a"],QMenu:g["a"],QList:y["a"],QItem:q["a"],QItemSection:w["a"],QItemLabel:_["a"],QIcon:C["a"],QChip:k["a"],QAvatar:x["a"],QTabPanels:T["a"],QTabPanel:S["a"],QScrollArea:Q["a"]})}}]);