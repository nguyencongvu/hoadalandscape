(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[30],{"64e8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",[t.c.canAccessModule(t.collection,t.profile.roles)?a("q-splitter",{attrs:{limits:[33,100]},scopedSlots:t._u([{key:"before",fn:function(){return[a("div",{staticStyle:{height:"100vh"}},[a("q-toolbar",[a("div",[a("div",{staticClass:" bold-font text-h5"},[t._v(t._s(t.c.t("Sales Orders"))+"\n                            "),t.loading?a("q-spinner-dots",{staticClass:"q-ml-sm",attrs:{color:"primary"}}):t._e()],1)]),a("q-space"),t.c.canUpdate(t.collection,t.profile.roles)?a("q-btn",{attrs:{color:"primary",flat:"","no-caps":"",icon:"post_add",label:t.c.t("New")},on:{click:function(e){return t.create()}}}):t._e()],1),a("q-separator"),a("q-toolbar",[a("q-input",{staticClass:"fit",attrs:{dense:"","bg-color":"white",outlined:"",placeholder:t.c.t("Search")+"..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("q-space"),a("q-btn",{attrs:{flat:"",round:"",icon:"refresh"},on:{click:function(e){t.search="",t.filterText="",t.getAll()}}}),t.c.canPrint(t.collection,t.profile.roles)?a("q-btn",{attrs:{flat:"",round:"",icon:"print"},on:{click:function(e){return t.print("print-list")}}}):t._e(),a("q-btn",{attrs:{flat:"",round:"",icon:"date_range"}},[a("q-menu",[a("TimeRange",{on:{reloadTimeRange:t.filterTime}})],1)],1),a("q-btn",{attrs:{flat:"",round:"",icon:"filter_alt"},on:{click:function(e){t.showFilter=!t.showFilter}}})],1),a("q-separator"),t.showFilter?a("q-toolbar",[a("FilterBy",{attrs:{propObjects:t.filters},on:{reloadFilter:t.fillFilter}}),a("q-space")],1):t._e(),a("q-separator"),a("q-list",{attrs:{separator:""}},t._l(t.fsearch,(function(e,n){return a("q-item",{key:e._id,attrs:{clickable:"",active:n==t.selectedIndex,"active-class":"bg-info"},on:{click:function(a){t.select(e._id),t.selectedIndex=n}}},[a("q-item-section",{attrs:{avatar:""}},[a("Dot",{staticClass:"q-mr-sm",attrs:{propText:e.type}})],1),a("q-item-section",[a("q-item-label",{staticClass:"bold-font text-subtitle1",attrs:{lines:"1"}},[t._v(t._s(e.title))]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.code)+" "),a("q-icon",{staticClass:"q-ml-md",attrs:{name:"contacts"}}),t._v(" "+t._s(e.contact_name))],1)],1),a("q-item-section",{attrs:{side:"",top:""}},[a("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.c.dateDiff(new Date,new Date(e.date_updated)))+"\n                                "+t._s(t.c.t("days"))+"\n                            ")]),a("q-chip",{staticClass:"bg-white",attrs:{size:"sm",outline:""}},[t._v(t._s(t.c.formatCurrency(e.total)))])],1)],1)})),1),a("q-separator"),a("div",{staticClass:"q-pb-lg"},[t._v("Â ")])],1)]},proxy:!0},t.c.isMobile()?null:{key:"separator",fn:function(){return[a("q-avatar",{attrs:{color:"primary","text-color":"white",size:"28px",icon:"drag_indicator"}})]},proxy:!0},{key:"after",fn:function(){return[a("q-toolbar",[a("div",{staticClass:"row q-gutter-md"},[a("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"visibility",label:t.c.t("View")},on:{click:function(e){return t.showTab("info")}}}),a("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"edit",label:t.c.t("Edit or Create")},on:{click:function(e){return t.showTab("upsert")}}}),a("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"task",label:t.c.t("Tasks")},on:{click:function(e){return t.showTab("task")}}})],1)]),a("q-separator"),a("div",{staticStyle:{height:"90vh"}},[a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"info"}},[a("q-scroll-area",{staticStyle:{height:"86vh"}},[a("Info",{key:t.componentKey,attrs:{propSelected:t.selected},on:{reloadRemove:function(e){return t.getAll()}}})],1)],1),a("q-tab-panel",{attrs:{name:"upsert"}},[a("q-scroll-area",{staticStyle:{height:"86vh"}},[t.selected?a("Upsert",{key:t.componentKey,attrs:{propSelected:t.selected},on:{reloadUpsert:t.fillUpsert}}):t._e()],1)],1),a("q-tab-panel",{attrs:{name:"task"}},[a("div",{staticClass:"text-caption"},[t._v(t._s(t.c.t("Task")))]),a("div",{staticClass:"text-h6 bold-font ellipis q-mb-md"},[t._v(t._s(t.selected.title))]),a("Task",{key:t.componentKey,attrs:{propCollection:t.collection,propId:t.selected._id}})],1)],1)],1)]},proxy:!0}],null,!0),model:{value:t.splitterModel,callback:function(e){t.splitterModel=e},expression:"splitterModel"}}):a("div",[a("div",{staticClass:"absolute-center"},[a("q-img",{attrs:{width:"25vw",src:n("5183")}}),a("div",{staticClass:"text-center q-my-lg"},[t._v(t._s(t.c.t("Access Denied")))])],1)]),a("div",{staticClass:"absolute-bottom orientation-landscape"},[a("BarStats",{key:t.componentKey,attrs:{propCount:t.fsearch.length,propSum:t.c.sum(t.fsearch,"total")}})],1),a("div",{ref:"print-list",staticClass:"print-only"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.c.t("Sales Orders")))]),a("DataTable",{key:t.componentKey,attrs:{propData:t.fsearch,propVisibleColumns:["title","lang","owner","date_updated"]}})],1)],1)},r=[],o=(n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("4de4"),n("ac1f"),n("841c"),n("caad"),n("2532"),n("d81d"),n("7db0"),n("c740"),n("bd4c")),i={name:"ListAll",components:{TimeRange:function(){return n.e(1).then(n.bind(null,"e19d"))},FilterBy:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"2d2e"))},FilterByCategory:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"74db"))},Info:function(){return n.e(1).then(n.bind(null,"98d9"))},Upsert:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"5ba5"))},Task:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"43fe"))},Dot:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"9f7a"))},BarStats:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"9fda"))},DataTable:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"1fdb"))}},data:function(){return{loading:!1,c:this.$common,api:null,collection:"so",objects:[],selected:{id:null,title:null},selectedIndex:0,title:"",filterText:"",search:"",splitterModel:33,columns:[],visibleColumns:[],componentKey:0,tab:"info",timeFilter:null,filters:[],dialog:!1,showFilter:!1,page:1,offset:20}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var t=this,e=t.objects;if(t.timeFilter){var n=t.timeFilter,a=new Date(n.from),r=new Date(n.to);e=e.filter((function(t){return o["b"].isBetweenDates(t.date_created,a,r)}))}t.filterText&&""!=t.filterText&&(e=e.filter((function(e){var n=t.filterText.toLowerCase(),a=e.type?e.type.toLowerCase():"",r=e.status?e.status.toLowerCase():"",o=e.category?e.category.toLowerCase():"",i=e.groupname?e.groupname.toLowerCase():"",l=e.lang?e.lang.toLowerCase():"",s=e.category_slug?e.category_slug.toLowerCase():"";return a==n||r==n||o==n||i==n||l==n||s==n})));var i=t.search.toLowerCase();return""==i?e:e.filter((function(t){var e=t.title?t.title.toLowerCase():"",n=t.code?t.code.toLowerCase():"",a=t.province?t.province.toLowerCase():"";return e.includes(i)||n.includes(i)||a.includes(i)}))}},mounted:function(){},created:function(){var t=this;t.api=new t.$api(t.collection),t.api.setDomain(t.profile.domain),t.page=1,t.offset=20,t.getAll(t.collection),t.initFilter()},methods:{getAll:function(t){var e=this;e.loading=!0,e.api.getAll(t).then((function(t){if(console.log(""),t.data.count<=0)e.loading=!1;else{e.objects=e.orm(t.data.objects);var n=e.$route.params.id,a=e.$route.params.action;e.select(n,a),e.loading=!1,e.forceRenderer()}}))},orm:function(t){var e=this,n=t;if(!Array.isArray(n))return[];if(n.length<=0)return[];var a=n;return a=e.c.canViewMeOnly(e.collection,e.profile.roles)?n.filter((function(t){return t.owner==e.profile.username})):n,a=a.map((function(t){var e=t;return e})),console.log(""),a||[]},initFilter:function(){var t=this;t.filters=[{key:"so-status",text:t.c.t("Status")},{key:t.collection+"-type",text:t.c.t("Type")}]},setCategory:function(t){var e=this;console.log(""),e.filterText=t&&t.title?t.title:""},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,a=n.objects.length>0?n.objects.find((function(e){return e._id==t})):{};n.selected=a||n.objects[0];var r=n.objects.length>0?n.objects.findIndex((function(e){return e._id==t})):0;n.selectedIndex=r,e?n.showTab(e):n.showTab("info"),n.forceRenderer()},fillUpsert:function(t){var e=this;e.getAll(),e.select(t)},showTab:function(t){var e=this;e.tab=t,e.search="",e.filterText=""},create:function(){var t=this;t.c.goto("/pos")},filterTime:function(t){var e=this;e.timeFilter=t},fillFilter:function(t){var e=this;e.filterText=t},forceRenderer:function(){var t=this;t.$forceUpdate(),t.componentKey+=1},print:function(t){var e=this,n=e.$refs[t];n&&(e.c.print(n),e.forceRenderer())},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)}}},l=i,s=(n("b949"),n("2877")),c=n("4d5a"),u=n("068f"),d=n("8562"),f=n("65c6"),p=n("8380"),b=n("2c91"),m=n("9c40"),h=n("eb85"),v=n("27f9"),y=n("4e73"),g=n("1c1c"),q=n("66e5"),_=n("4074"),w=n("0170"),C=n("0016"),x=n("b047"),k=n("cb32"),T=n("adad"),S=n("823b"),Q=n("4983"),F=n("eebe"),L=n.n(F),D=Object(s["a"])(l,a,r,!1,null,null,null);e["default"]=D.exports;L()(D,"components",{QLayout:c["a"],QImg:u["a"],QSplitter:d["a"],QToolbar:f["a"],QSpinnerDots:p["a"],QSpace:b["a"],QBtn:m["a"],QSeparator:h["a"],QInput:v["a"],QMenu:y["a"],QList:g["a"],QItem:q["a"],QItemSection:_["a"],QItemLabel:w["a"],QIcon:C["a"],QChip:x["a"],QAvatar:k["a"],QTabPanels:T["a"],QTabPanel:S["a"],QScrollArea:Q["a"]})},b949:function(t,e,n){"use strict";n("c357")},c357:function(t,e,n){}}]);