(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0836":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.name:e.c.t("User")))])]),a("q-space"),a("Dot",{key:e.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"app-padding"},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-pa-sm q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",autofocus:"",outlined:e.c.outlined(),label:e.c.t("Name")},model:{value:e.selected.name,callback:function(t){e.$set(e.selected,"name",t)},expression:"selected.name"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboType,label:e.c.t("Type")},model:{value:e.selected.type,callback:function(t){e.$set(e.selected,"type",t)},expression:"selected.type"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Phone")},model:{value:e.selected.phone,callback:function(t){e.$set(e.selected,"phone",t)},expression:"selected.phone"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Email")},model:{value:e.selected.email,callback:function(t){e.$set(e.selected,"email",t)},expression:"selected.email"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Username")},model:{value:e.selected.username,callback:function(t){e.$set(e.selected,"username",t)},expression:"selected.username"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Password"),type:"password"},model:{value:e.selected.password,callback:function(t){e.$set(e.selected,"password",t)},expression:"selected.password"}}),a("q-field",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Roles")},scopedSlots:e._u([e.selected.roles?{key:"control",fn:function(){return e._l(e.selected.roles.split(","),(function(t,s){return a("div",[a("q-badge",{staticClass:"q-mr-sm",attrs:{color:"grey-7"}},[e._v(e._s(t))])],1)}))},proxy:!0}:null,{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"policy"},on:{click:function(t){e.fillToInput="roles"}}},[a("q-menu",[a("PopupRole",{attrs:{propSelection:"multiple"},on:{reloadMany:e.fillAnInput}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected.roles,callback:function(t){e.$set(e.selected,"roles",t)},expression:"selected.roles"}})],1),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-px-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",autogrow:"",dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary")},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("div",{staticClass:"col-12 col-md-6 "},[e.selected.images?a("div",{staticClass:"all-borders"},[a("q-img",{staticClass:"q-mt-sm",attrs:{src:e.c.showImage(e.selected.images)}})],1):e._e(),a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Images"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}})],1)],1):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                                "+e._s(s+1)+". "+e._s(t)+"\n                            ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("b0c0"),a("d3b7"),a("e6cf"),a("99af"),a("943a")),i=a("9f7a"),r=a("d443"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"bg-white popup-table",attrs:{selection:e.propSelection,selected:e.multipleSelected,loading:e.loading,dense:"",data:e.fsearch,columns:e.columns,"visible-columns":e.visibleColumns,"row-key":"_id",pagination:{rowsPerPage:e.c.ROWS_PER_PAGE}},on:{"update:selected":function(t){e.multipleSelected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})]},proxy:!0},e.propSelection?null:{key:"body-cell-title",fn:function(t){return[a("q-td",{staticClass:"bg-info q-py-md text-primary text-bold cursor-pointer popup-col ellipsis",attrs:{props:t}},[a("div",{directives:[{name:"close-popup",rawName:"v-close-popup"}],on:{click:function(a){e.selected=t.row,e.emitParent("reloadOne",e.selected)}}},[e._v(e._s(t.value))]),a("q-tooltip",[e._v("\n                "+e._s(e.c.t("Click to select"))+"\n            ")])],1)]}},e.propSelection?{key:"bottom-row",fn:function(){return[a("q-tr",[a("q-td",{attrs:{colspan:"100%"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-my-sm q-px-sm",attrs:{"no-caps":"",dense:"",color:"primary",label:e.c.t("Choose")},on:{click:function(t){return e.emitParent("reloadMany",e.multipleSelected)}}})],1)],1)]},proxy:!0}:null],null,!0)})},u=[],p=a("c973"),m=a.n(p),f=(a("96cf"),a("4de4"),a("25f0"),{name:"Popup",props:{propSelection:String},data:function(){return{loading:!1,c:this.$common,api:null,collection:"role",showSearch:!1,text:"",objects:[],selected:{},columns:[],visibleColumns:[],multipleSelected:[]}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var e=this,t=e.text;return""==t?e.objects:e.objects.filter((function(e){var a=e.title?e.title.toLowerCase():"",s=e.value?e.value.toLowerCase():"";return a.includes(t)||s.includes(t)}))}},created:function(){this.init()},methods:{init:function(){var e=this;return m()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.api=new a.$api(a.collection),a.api.setDomain(a.profile.domain),a.fetch(),a.initColumns();case 5:case"end":return t.stop()}}),t)})))()},initColumns:function(){var e=this;e.columns=[{name:"title",align:"left",label:e.c.t("Title"),field:function(e){return e.title},sortable:!0},{name:"value",align:"left",label:e.c.t("Value"),field:"value",sortable:!0},{name:"summary",align:"left",label:e.c.t("Summary"),field:"summary",sortable:!0}],e.visibleColumns=e.columns.map((function(e){return e.name}))},fetch:function(){var e=this;return m()(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,t.next=4,a.api.getAll(a.collection);case 4:s=t.sent,a.objects=s.data.objects,a.loading=!1,a.objects&&a.objects.length>0&&(a.objects=a.mapAll(a.objects));case 8:case"end":return t.stop()}}),t)})))()},orm:function(e){var t={};return t._id=e._id,t.title=e.title,t.value=e.value,t.summary=e.summary,t.content=e.content,t.owner=e.owner,t.date_created=e.date_created,t.date_updated=e.date_updated,t},mapAll:function(e){var t=this;return e.map((function(e){return t.orm(e)}))},emitParent:function(e,t){var a=this;if(Array.isArray(t)){var s=t.map((function(e){return e.value})).toString();a.$emit(e,s)}else a.$emit(e,t)}}}),b=f,v=(a("6a02"),a("2877")),h=a("eaac"),_=a("27f9"),g=a("0016"),y=a("db86"),C=a("9c40"),w=a("05c0"),x=a("bd08"),k=a("7f67"),q=a("eebe"),S=a.n(q),D=Object(v["a"])(b,d,u,!1,null,"15307385",null),I=D.exports;S()(D,"components",{QTable:h["a"],QInput:_["a"],QIcon:g["a"],QTd:y["a"],QBtn:C["a"],QTooltip:w["a"],QTr:x["a"]}),S()(D,"directives",{ClosePopup:k["a"]});var Q=a("716b"),P={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:Q["Money"],PopupRole:I},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"user",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1},componentKey:0}},watch:{"selected.status":function(e){this.componentKey++}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboStatus=e.loadCombo("user-status"),e.cboType=e.loadCombo("user-type")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("USER"),t.status="InActive",t.title=e.c.t("User")+" "+e.c.t("New"),t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a},disableWhen:function(){var e=this,t=e.selected.status?e.selected.status.toLowerCase():"";return-1!=["close","closed","completed","finished","đóng","kết thúc","hoàn thành","xong"].indexOf(t)},valid:function(){var e=this;return e.selected.username||e.errorInputs.push(e.c.t("Username")+" "+e.c.t("Not Empty")),e.selected.name||e.errorInputs.push(e.c.t("Name")+" "+e.c.t("Not Empty")),e.selected.password||e.errorInputs.push(e.c.t("Password")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("User Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){console.log("")}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("User Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.db.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.db.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},fillAnInput:function(e){var t=this,a=t.fillToInput;t.c.log(e),t.selected[a]=e,t.fillToInput="",t.$forceUpdate()},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},$=P,A=(a("992b"),a("0378")),O=a("65c6"),T=a("2c91"),j=a("eb85"),U=a("ddd8"),E=a("8572"),M=a("58a8"),z=a("4e73"),N=a("068f"),R=a("ee89"),L=a("24e8"),F=a("f09f"),B=a("6b1d"),Y=a("a370"),W=a("de5e"),G=Object(v["a"])($,s,o,!1,null,"bb297f2a",null);t["default"]=G.exports;S()(G,"components",{QForm:A["a"],QToolbar:O["a"],QIcon:g["a"],QSpace:T["a"],QBtn:C["a"],QSeparator:j["a"],QInput:_["a"],QSelect:U["a"],QField:E["a"],QBadge:M["a"],QMenu:z["a"],QImg:N["a"],QUploader:R["a"],QDialog:L["a"],QCard:F["a"],QLinearProgress:B["a"],QCardSection:Y["a"],QPageSticky:W["a"]}),S()(G,"directives",{ClosePopup:k["a"]})},"0aba":function(e,t,a){"use strict";a("c9a3")},"0c25":function(e,t,a){"use strict";a("a9b4")},"0d2f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"print-only",staticStyle:{width:"100%","text-align":"center","margin-top":"20px"}},[a("div",{staticStyle:{float:"left",width:"33%"}},[a("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.c.t("Approver")))]),a("div")]),a("div",{staticStyle:{float:"left",width:"33%"}},[a("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.c.t("Manager")))]),a("div")]),a("div",{staticStyle:{float:"left",width:"33%"}},[a("div",{staticStyle:{"font-weight":"bold","min-height":"100px"}},[e._v(e._s(e.c.t("Creator")))]),a("div",[e._v(e._s(e.profile.name))])])])},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),{name:"PrintCreator",props:{},data:function(){return{c:this.$common}},computed:{profile:function(){return this.$store.state.user.profile}},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()}}}),i=c,r=a("2877"),d=Object(r["a"])(i,s,o,!1,null,null,null);t["a"]=d.exports},"113a":function(e,t,a){"use strict";a("7b77")},"163d":function(e,t,a){},"1a89":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{staticStyle:{"min-width":"160px"},attrs:{separator:""}},e._l(e.fsearch,(function(t,s){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{clickable:""},on:{click:function(a){e.selected=t,e.setView()}}},[a("q-item-section",[e._v(e._s(t.text))])],1)})),1)},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),{name:"SelectViewType",props:{propName:String},data:function(){return{c:this.$common,objects:[],selected:null}},computed:{fsearch:function(){var e=this;return e.objects}},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.fetch();case 2:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.objects=[{icon:"table_view",text:a.c.t("View as Table"),value:"table"},{icon:"credit_card",text:a.c.t("View as Card"),value:"card"}];case 2:case"end":return t.stop()}}),t)})))()},emitParent:function(e,t){var a=this;a.$emit(e,t)},setView:function(){var e=this;e.emitParent("reloadViewLayout",e.selected)}}}),i=c,r=a("2877"),d=a("1c1c"),u=a("66e5"),p=a("4074"),m=a("0016"),f=a("714f"),b=a("eebe"),v=a.n(b),h=Object(r["a"])(i,s,o,!1,null,null,null);t["a"]=h.exports;v()(h,"components",{QList:d["a"],QItem:u["a"],QItemSection:p["a"],QIcon:m["a"]}),v()(h,"directives",{Ripple:f["a"]})},"1fdb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-table",{staticClass:"main_table cursor-pointer",attrs:{flat:"",data:e.propData,columns:e.propColumns,"visible-columns":e.propVisibleColumns,"row-key":e.propRowKey,pagination:{rowsPerPage:e.c.ROWS_PER_PAGE}},on:{"row-click":e.onRowClick},scopedSlots:e._u([{key:"header",fn:function(t){return[a("q-tr",{staticClass:"bg-info",attrs:{props:t}},e._l(t.cols,(function(s){return a("q-th",{key:s.name,attrs:{props:t}},[a("span",{staticClass:"text-weight-bolder"},[e._v(e._s(s.label))])])})),1)]}},{key:"body-cell-recent",fn:function(t){return[a("q-td",{ref:"td"+t.key,attrs:{id:"td"+t.key,props:t}},[t.value?a("q-chip",{staticClass:"text-white",attrs:{square:"",size:"12px",color:t.value>30?"negative":"positive"}},[e._v(e._s(t.value)+"d\n                    "),a("q-tooltip",{attrs:{anchor:"top start",self:"top end"}},[e._v("\n                        "+e._s(t.value)+" "+e._s(e.c.t("Days")))])],1):e._e()],1)]}},{key:"body-cell-title",fn:function(t){return[a("q-td",{staticClass:"bold-font text-left ellipsis",staticStyle:{"max-width":"300px"},attrs:{props:t}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}},{key:"body-cell-name",fn:function(t){return[a("q-td",{staticClass:"bold-font text-left ellipsis",staticStyle:{"max-width":"300px"},attrs:{props:t}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}},{key:"body-cell-url",fn:function(t){return[a("q-td",{staticClass:"text-left ellipsis",staticStyle:{"max-width":"300px"},attrs:{props:t}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}},{key:"body-cell-views",fn:function(t){return[a("q-td",{attrs:{props:t}},[e._v("\n                "+e._s(t.value)+" "),t.value>=100?a("q-icon",{attrs:{size:"sm",name:"whatshot",color:e.setIconFireColor(t.value)}}):e._e()],1)]}},{key:"body-cell-unique",fn:function(t){return[e._v("\n            "+e._s(t.value)+" "),t.value>=100?a("q-icon",{attrs:{size:"sm",name:"whatshot",color:e.setIconFireColor(t.value)}}):e._e()]}},{key:"body-cell-action",fn:function(t){return[e._v("\n            "+e._s(t.value)+" "),t.value>=100?a("q-icon",{attrs:{size:"sm",name:"whatshot",color:e.setIconFireColor(t.value)}}):e._e()]}},{key:"body-cell-color_primary",fn:function(t){return[a("q-td",{staticClass:"text-center text-white",style:"background:"+t.value,attrs:{props:t}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}},{key:"body-cell-color_secondary",fn:function(t){return[a("q-td",{staticClass:"text-center text-white",style:"background:"+t.value,attrs:{props:t}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}},{key:"body-cell-color_footer",fn:function(t){return[a("q-td",{staticClass:"text-center text-black",style:"background:"+t.value,attrs:{props:t}},[e._v("\n                "+e._s(t.value)+"\n            ")])]}}])})],1)},o=[],l={name:"DataTable",props:{propCollection:String,propData:Array,propColumns:Array,propVisibleColumns:Array,propRowKey:String},components:{},data:function(){return{c:this.$common}},watch:{},computed:{},mounted:function(){},created:function(){var e=this,t=e.$route.params.id?e.$route.params.id:1;e.setDefaultActive(t)},methods:{onRowClick:function(e,t){var a=this;a.setActive(e),a.emitParent("rowClick",t._id?t._id:null)},setIconFireColor:function(e){return e>=100&&e<500?"orange":e>=500?"red":void 0},setActive:function(e){var t=e.target.parentElement,a=document.querySelector(".active");a&&a.classList.remove("active"),t&&t.classList.add("active"),this.$forceUpdate()},setDefaultActive:function(e){var t=this,a=document.getElementById("td"+e);if(a){var s=a.parentElement;s.classList.add("active"),t.$forceUpdate()}},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},n=l,c=(a("6224"),a("2877")),i=a("eaac"),r=a("bd08"),d=a("357e"),u=a("db86"),p=a("58a8"),m=a("b047"),f=a("05c0"),b=a("0016"),v=a("eebe"),h=a.n(v),_=Object(c["a"])(n,s,o,!1,null,null,null);t["default"]=_.exports;h()(_,"components",{QTable:i["a"],QTr:r["a"],QTh:d["a"],QTd:u["a"],QBadge:p["a"],QChip:m["a"],QTooltip:f["a"],QIcon:b["a"]})},"21c8":function(e,t,a){},"2c55":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"q-pa-xs"},[e.propSelected.image?a("q-img",{attrs:{src:e.propSelected.image,ratio:3}}):e._e(),a("q-item",{staticClass:"q-py-lg"},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:e.propSelected.color?e.propSelected.color:"secondary","text-color":"white"}},[e._v(e._s(e.c.firstChar(e.propSelected.title?e.propSelected.title:e.propSelected.name)))])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-bold ellipsis"},[e._v(e._s(e.propSelected.title?e.propSelected.title:e.propSelected.name))]),e.propSelected.username?a("q-item-label",{staticClass:"text-secondary ellipsis"},[e._v(e._s(e.propSelected.username)+"\n            ")]):e._e(),a("q-item-label",{staticClass:"ellipsis",attrs:{caption:""}},[e._v(e._s(e.propSelected.slug))]),e.propSelected.total?a("q-item-label",{staticClass:"ellipsis",attrs:{caption:""}},[e._v(e._s(e.c.formatCurrency(e.propSelected.total)))]):e._e()],1)],1),a("q-separator"),a("q-toolbar",{staticClass:"no-padding"},[a("Dot",{attrs:{propText:e.propSelected.status}}),a("div",{staticClass:"q-ml-sm text-caption ellipsis"},[e._v("\n            "+e._s(e.propSelected.owner)+"\n        ")]),a("q-space"),a("q-btn",{attrs:{flat:"",round:"",icon:"more_vert",color:"grey",size:"sm"}},[e.propSelected._id?a("Action",{attrs:{propCollection:e.propCollection,propSelected:e.propSelected},on:{reloadDelete:function(t){return e.emitParent("reload")}}}):e._e()],1)],1)],1)},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-menu",{attrs:{"touch-position":""}},[a("q-list",{staticStyle:{"min-width":"100px"},attrs:{separator:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.c.goto(e.propCollection+"/"+e.propSelected.id)}}},[a("q-item-section",[e._v(e._s(e.c.t("View")))])],1),e.canEdit?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.c.goto(e.propCollection+"/upsert/"+e.propSelected.id)}}},[a("q-item-section",[e._v(e._s(e.c.t("Edit")))])],1):e._e(),e.canEdit?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.remove(e.propSelected.id)}}},[a("q-item-section",[e._v(e._s(e.c.t("Delete")))])],1):e._e()],1)],1)}),i=[],r={name:"Action",props:{propText:String,propCollection:String,propSelected:Object},data:function(){return{db:null,c:this.$common}},computed:{isAdmin:function(){return this.$auth.isAdmin(this.propCollection)},canView:function(){return this.$auth.canView(this.propCollection)},canEdit:function(){return this.$auth.canEdit(this.propCollection)}},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.initDB(a.propCollection);case 2:case"end":return t.stop()}}),t)})))()},initDB:function(e){var t=this;t.db=t.$appDB?new t.$appDB(e):new t.$local(e),t.db.init()},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.db.remove(e);case 6:s.c.toast(s.c.t("Deleted")),s.emitParent("reloadDelete",e);case 8:case"end":return a.stop()}}),a)})))()},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},d=r,u=a("2877"),p=a("4e73"),m=a("1c1c"),f=a("66e5"),b=a("4074"),v=a("7f67"),h=a("eebe"),_=a.n(h),g=Object(u["a"])(d,c,i,!1,null,null,null),y=g.exports;_()(g,"components",{QMenu:p["a"],QList:m["a"],QItem:f["a"],QItemSection:b["a"]}),_()(g,"directives",{ClosePopup:v["a"]});var C=a("9f7a"),w={name:"DataTable",props:{propSelected:Object,propCollection:String},components:{Action:y,Dot:C["default"]},data:function(){return{c:this.$common,selected:null}},computed:{},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},x=w,k=a("f09f"),q=a("068f"),S=a("cb32"),D=a("0170"),I=a("eb85"),Q=a("65c6"),P=a("2c91"),$=a("9c40"),A=Object(u["a"])(x,s,o,!1,null,null,null);t["a"]=A.exports;_()(A,"components",{QCard:k["a"],QImg:q["a"],QItem:f["a"],QItemSection:b["a"],QAvatar:S["a"],QItemLabel:D["a"],QSeparator:I["a"],QToolbar:Q["a"],QSpace:P["a"],QBtn:$["a"]})},"2cfc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),e.selected._id?a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Category Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Status")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.status))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Link to")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.url))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Summary")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.summary))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Doc Order")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.doc_order))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Icon")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.icon))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Images")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.images))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]):e._e(),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"category",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["id","slug","title","doc_order","url","icon","status","avatar","site_title"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected),console.log("")},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("CA"),console.log(""),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;console.log(""),t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("category",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("Category deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"2d2e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-btn-dropdown",{staticClass:"text-caption",attrs:{dense:"",flat:"",color:"primary",label:e.selected?e.selected.text:e.c.t("Filter by")}},[a("q-list",{staticStyle:{"min-width":"160px"},attrs:{separator:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){e.selected=null}}},[e._v(e._s(e.c.t("Clear filter"))+"\n            ")]),e._l(e.fsearch,(function(t,s){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s,attrs:{clickable:""},on:{click:function(a){e.selected=t,e.getListBy(e.selected)}}},[e._v("\n                "+e._s(t.text)+"\n                ")])}))],2)],1),e.selected?a("q-virtual-scroll",{attrs:{items:e.filters,"virtual-scroll-horizontal":""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item,o=t.index;return[a("q-chip",{key:o,staticClass:"cursor-pointer",attrs:{outline:"",color:"primary",clickable:""},on:{click:function(t){return e.select(s)}}},[e._v(e._s(s)+"\n            ")])]}}],null,!1,2465334375)}):e._e()],1)},o=[],l={name:"Dot",props:{propObjects:Array},data:function(){return{c:this.$common,api:null,objects:[],selected:null,filters:[]}},computed:{lists:function(){return this.$store.state.list.items},fsearch:function(){return this.objects}},created:function(){var e=this;e.fetch()},methods:{fetch:function(){var e=this;e.objects=e.propObjects},select:function(e){var t=this;t.emitParent("reloadFilter",e)},getListBy:function(e){var t=this;t.filters=t.c.loadCombo(t.lists,"slug",e.key)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},n=l,c=(a("c8f8"),a("2877")),i=a("f20b"),r=a("1c1c"),d=a("66e5"),u=a("4074"),p=a("0170"),m=a("a12b"),f=a("b047"),b=a("7f67"),v=a("eebe"),h=a.n(v),_=Object(c["a"])(n,s,o,!1,null,"5ee90318",null);t["default"]=_.exports;h()(_,"components",{QBtnDropdown:i["a"],QList:r["a"],QItem:d["a"],QItemSection:u["a"],QItemLabel:p["a"],QVirtualScroll:m["a"],QChip:f["a"]}),h()(_,"directives",{ClosePopup:b["a"]})},"2e3b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Slug")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.slug))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Status")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.status))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Category")))]),a("td",{staticClass:"bold-font"},[e._v("\n                            "+e._s(e.selected.category)+"\n                        ")])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Images")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.images))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Summary")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.summary))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"post",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","slug","title","category","summary","lang","date_created","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("POST"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("post",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("SO deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"2fa4":function(e,t,a){"use strict";a("d937")},"31fb":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Product")))])]),a("q-space"),a("Dot",{key:e.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Slug"),placeholder:e.c.t("Slug"),readonly:e.disableWhen()},on:{blur:e.slugCheck},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",[e._v(e._s(e.c.t("Product Description")))]),a("q-editor",{attrs:{height:"10rem",toolbar:e.c.editorToolbar(),readonly:e.disableWhen()},model:{value:e.selected.content,callback:function(t){e.$set(e.selected,"content",t)},expression:"selected.content"}})],1),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",rows:5,dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary"),readonly:e.disableWhen()},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("SKU"),placeholder:e.c.t("SKU"),readonly:e.disableWhen()},model:{value:e.selected.sku,callback:function(t){e.$set(e.selected,"sku",t)},expression:"selected.sku"}}),a("q-field",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Price"),placeholder:e.c.t("Price"),readonly:e.disableWhen()},scopedSlots:e._u([{key:"control",fn:function(t){var s=t.id,o=t.floatingLabel,l=t.value,n=t.emitValue;return[a("money",e._b({directives:[{name:"show",rawName:"v-show",value:o,expression:"floatingLabel"}],staticClass:"q-field__input",attrs:{id:s,value:l},on:{input:n}},"money",e.money,!1))]}}]),model:{value:e.selected.price,callback:function(t){e.$set(e.selected,"price",t)},expression:"selected.price"}}),a("q-field",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",clearable:"",outlined:e.c.outlined(),label:e.c.t("Category")},scopedSlots:e._u([e.selected.category?{key:"control",fn:function(){return[e._v("\n                    "+e._s(e.selected.category)+"\n                ")]},proxy:!0}:null,{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"list_alt",clickable:e.disableWhen()}},[a("q-menu",[a("PopupCategory",{attrs:{propSelection:"multiple"},on:{reloadMany:e.fillCategory}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected.category,callback:function(t){e.$set(e.selected,"category",t)},expression:"selected.category"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboYesNo,label:e.c.t("Featured")},model:{value:e.selected.featured,callback:function(t){e.$set(e.selected,"featured",t)},expression:"selected.featured"}}),a("div",{staticClass:"col-12 col-md-6 q-gutter-y-sm"},[a("q-input",{attrs:{type:"number",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Instock"),placeholder:e.c.t("Instock"),readonly:e.disableWhen()},model:{value:e.selected.instock,callback:function(t){e.$set(e.selected,"instock",t)},expression:"selected.instock"}}),a("q-field",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Retail Price"),placeholder:e.c.t("Retail Price"),readonly:e.disableWhen()},scopedSlots:e._u([{key:"control",fn:function(t){var s=t.id,o=t.floatingLabel,l=t.value,n=t.emitValue;return[a("money",e._b({directives:[{name:"show",rawName:"v-show",value:o,expression:"floatingLabel"}],staticClass:"q-field__input",attrs:{id:s,value:l},on:{input:n}},"money",e.money,!1))]}}]),model:{value:e.selected.retail_price,callback:function(t){e.$set(e.selected,"retail_price",t)},expression:"selected.retail_price"}}),a("q-field",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Cost Of Goods"),placeholder:e.c.t("Cost of Goods"),readonly:e.disableWhen()},scopedSlots:e._u([{key:"control",fn:function(t){var s=t.id,o=t.floatingLabel,l=t.value,n=t.emitValue;return[a("money",e._b({directives:[{name:"show",rawName:"v-show",value:o,expression:"floatingLabel"}],staticClass:"q-field__input",attrs:{id:s,value:l},on:{input:n}},"money",e.money,!1))]}}]),model:{value:e.selected.cog,callback:function(t){e.$set(e.selected,"cog",t)},expression:"selected.cog"}}),a("q-input",{attrs:{type:"number",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Warranty"),placeholder:e.c.t("Warranty"),readonly:e.disableWhen()},model:{value:e.selected.warranty,callback:function(t){e.$set(e.selected,"warranty",t)},expression:"selected.warranty"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboLang,label:e.c.t("Language"),readonly:e.disableWhen()},model:{value:e.selected.lang,callback:function(t){e.$set(e.selected,"lang",t)},expression:"selected.lang"}})],1),a("div",{staticClass:"col-12 col-md-6 q-gutter-y-sm"},[a("q-input",{attrs:{type:"textarea",rows:"4",outlined:e.c.outlined(),dense:"","stack-label":"",label:e.c.t("Images"),placeholder:e.c.t("Commas"),readonly:e.disableWhen()},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}}),a("div",{},[a("div",{},[a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"",bordered:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Images"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.tempImg,callback:function(t){e.tempImg=t},expression:"tempImg"}})],1)])],1)],1),e.showMore?a("div",{staticClass:"row q-gutter-y-sm"}):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                            "+e._s(s+1)+". "+e._s(t)+"\n                        ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("ebd9")),i=a("9f7a"),r=a("d443"),d=a("716b"),u=a("3ef8"),p={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"],PopupCategory:u["a"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"product",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboYesNo:[],cboType:[],cboGroup:[],cboLang:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1},componentKey:0,tempImg:""}},watch:{"selected.status":function(e){console.log(""),this.componentKey++}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboStatus=e.loadCombo("cms-status"),e.cboYesNo=e.loadCombo("yes-no"),e.cboLang=e.loadCombo("lang")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("PRODUCT"),t.status="Draft",t.lang="en-us"==e.$i18n.locale?"en":e.$i18n.locale,t.title=e.c.t("Product")+" "+e.c.t("New"),t.content="",t.category="",t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t.date_start=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.content=e.content?e.content:"",a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a.date_start=e.date_start?t.c.formatDataDate(e.date_start):null,a.date_end=e.date_end?t.c.formatDataDate(e.date_end):null,a},disableWhen:function(){var e=this;return!e.c.canUpdate(e.collection,e.profile.roles)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Product Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("Product Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.api.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.api.web,"/images/").concat(a.filename);t.tempImg=t.c.addImages(s,t.selected.images),t.selected.images=t.tempImg,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},fillCategory:function(e){var t=this;t.selected.category=e,console.log("")},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},m=p,f=(a("0aba"),a("2877")),b=a("0378"),v=a("65c6"),h=a("0016"),_=a("2c91"),g=a("9c40"),y=a("eb85"),C=a("27f9"),w=a("ddd8"),x=a("d66b"),k=a("8572"),q=a("58a8"),S=a("4e73"),D=a("ee89"),I=a("24e8"),Q=a("f09f"),P=a("6b1d"),$=a("a370"),A=a("7f67"),O=a("eebe"),T=a.n(O),j=Object(f["a"])(m,s,o,!1,null,"09b99993",null);t["default"]=j.exports;T()(j,"components",{QForm:b["a"],QToolbar:v["a"],QIcon:h["a"],QSpace:_["a"],QBtn:g["a"],QSeparator:y["a"],QInput:C["a"],QSelect:w["a"],QEditor:x["a"],QField:k["a"],QBadge:q["a"],QMenu:S["a"],QUploader:D["a"],QDialog:I["a"],QCard:Q["a"],QLinearProgress:P["a"],QCardSection:$["a"]}),T()(j,"directives",{ClosePopup:A["a"]})},3380:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white q-mb-md"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Category")))])]),a("q-space"),a("Dot",{key:e.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Category Slug"),placeholder:e.c.t("Category Slug"),readonly:e.disableWhen()},on:{blur:e.slugCheck},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("q-field",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",clearable:"",outlined:e.c.outlined(),label:e.c.t("Parent Title")},scopedSlots:e._u([e.selected.parent_title?{key:"control",fn:function(){return[e._v("\n                    "+e._s(e.selected.parent_title)+"\n                ")]},proxy:!0}:null,{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"list_alt",clickable:"",readonly:e.disableWhen()}},[a("q-menu",[a("PopupCategory",{on:{reloadOne:e.fillParentCategory}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected.parent_title,callback:function(t){e.$set(e.selected,"parent_title",t)},expression:"selected.parent_title"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:[1,2,3,4,5,6,7,8,9,10],label:e.c.t("Doc Order")},model:{value:e.selected.doc_order,callback:function(t){e.$set(e.selected,"doc_order",t)},expression:"selected.doc_order"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Link to"),placeholder:e.c.t("Link to"),readonly:e.disableWhen()},model:{value:e.selected.url,callback:function(t){e.$set(e.selected,"url",t)},expression:"selected.url"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",rows:"2",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Summary"),placeholder:"",readonly:e.disableWhen()},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),dense:"","stack-label":"",label:e.c.t("Images"),placeholder:e.c.t("Paste image link or upload"),readonly:e.disableWhen()},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"image"}},[a("q-menu",{attrs:{flat:""}},[a("div",{staticClass:"all-borders"},[a("img",{staticStyle:{"max-width":"200px"},attrs:{src:e.c.showImage(e.selected.images)}})])])],1)]},proxy:!0}]),model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Icon"),placeholder:e.c.t("Icon"),readonly:e.disableWhen()},model:{value:e.selected.icon,callback:function(t){e.$set(e.selected,"icon",t)},expression:"selected.icon"}}),a("div",{staticClass:"col-12 col-md-6"},[a("div",{},[a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Images"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}})],1)])],1)]),e.showMore?a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Category Title En"),placeholder:e.c.t("Category Title En"),readonly:e.disableWhen()},model:{value:e.selected.title_en,callback:function(t){e.$set(e.selected,"title_en",t)},expression:"selected.title_en"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Doc Order"),placeholder:e.c.t("Doc Order"),readonly:e.disableWhen()},model:{value:e.selected.level,callback:function(t){e.$set(e.selected,"level",t)},expression:"selected.level"}}),a("q-field",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",clearable:"",outlined:e.c.outlined(),label:e.c.t("Site Master")},scopedSlots:e._u([e.selected.site_title?{key:"control",fn:function(){return[e._v("\n                "+e._s(e.selected.site_title)+"\n            ")]},proxy:!0}:null,{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"travel_explore",clickable:"",readonly:e.disableWhen()},on:{click:function(t){e.fillToInput="site_title"}}},[a("q-menu",[a("PopupSite",{on:{reloadOne:e.fillSiteTitle}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected.site_title,callback:function(t){e.$set(e.selected,"site_title",t)},expression:"selected.site_title"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",[e._v(e._s(e.c.t("Content")))]),a("q-editor",{attrs:{height:"5rem",toolbar:e.c.editorToolbar(),readonly:e.disableWhen()},model:{value:e.selected.content,callback:function(t){e.$set(e.selected,"content",t)},expression:"selected.content"}})],1)],1):e._e(),a("q-dialog",{attrs:{seamless:"",position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                        "+e._s(s+1)+". "+e._s(t)+"\n                    ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("2cfc")),i=a("9f7a"),r=a("d443"),d=a("3ef8"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"bg-white popup-table",attrs:{selection:e.propSelection,loading:e.loading,selected:e.multipleSelected,dense:"",data:e.fsearch,columns:e.columns,"visible-columns":e.visibleColumns,"row-key":"_id",pagination:{rowsPerPage:e.c.ROWS_PER_PAGE}},on:{"update:selected":function(t){e.multipleSelected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})]},proxy:!0},e.propSelection?null:{key:"body-cell-title",fn:function(t){return[a("q-td",{staticClass:"bg-info q-py-md text-primary text-bold cursor-pointer popup-col ellipsis",attrs:{props:t}},[a("div",{directives:[{name:"close-popup",rawName:"v-close-popup"}],on:{click:function(a){e.selected=t.row,e.emitParent("reloadOne",e.selected)}}},[e._v(e._s(t.value))]),a("q-tooltip",[e._v("\n                "+e._s(e.c.t("Click to select"))+"\n            ")])],1)]}},e.propSelection?{key:"bottom-row",fn:function(){return[a("q-tr",[a("q-td",{attrs:{colspan:"100%"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-my-sm q-px-sm",attrs:{dense:"",color:"primary",label:e.c.t("Choose")},on:{click:function(t){return e.emitParent("reloadMany",e.multipleSelected)}}})],1)],1)]},proxy:!0}:null],null,!0)})},p=[],m=a("c973"),f=a.n(m),b=(a("96cf"),a("4de4"),a("25f0"),{name:"Popup",props:{propSelection:String},data:function(){return{loading:!1,c:this.$common,api:null,collection:"site",showSearch:!1,text:"",objects:[],selected:{},columns:[],visibleColumns:[],multipleSelected:[]}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var e=this,t=e.text;return""==t?e.objects:e.objects.filter((function(e){var a=e.title?e.title.toLowerCase():"",s=e.slug?e.slug.toLowerCase():"",o=e.site_name?e.site_name.toLowerCase():"";return a.includes(t)||s.includes(t)||o.includes(t)}))}},created:function(){this.init()},methods:{init:function(){var e=this;return f()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.api=new a.$api(a.collection),a.api.setDomain(a.profile.domain),a.fetch(),a.initColumns();case 5:case"end":return t.stop()}}),t)})))()},initColumns:function(){var e=this;e.columns=[{name:"id",visible:!1,align:"left",label:e.c.t("Id"),field:function(e){return e._id},sortable:!0},{name:"title",align:"left",label:e.c.t("Title"),field:function(e){return e.title},sortable:!0},{name:"slug",align:"left",label:e.c.t("Slug"),field:"slug",sortable:!0},{name:"status",align:"left",label:e.c.t("Status"),field:"status",sortable:!0},{name:"date_created",align:"left",label:e.c.t("Date Created"),field:"date_created",format:function(t){return e.c.formatDate(t)},sortable:!0}],e.visibleColumns=["site_name","title","slug"]},fetch:function(){var e=this;return f()(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,t.next=4,a.api.getAll(a.collection);case 4:s=t.sent,a.objects=s.data.objects,a.loading=!1,a.objects&&a.objects.length>0&&(a.objects=a.mapAll(a.objects));case 8:case"end":return t.stop()}}),t)})))()},orm:function(e){var t={};return t._id=e._id,t.title=e.title,t.slug=e.slug,t.status=e.site_name,t.total=e.total,t.paymentTotal=e.paymentTotal,t.items=e.items,t.payments=e.payments,t.owner=e.owner,t.date_created=e.date_created,t.date_updated=e.date_updated,t},mapAll:function(e){var t=this;return e.map((function(e){return t.orm(e)}))},emitParent:function(e,t){var a=this;if(Array.isArray(t)){var s=t.map((function(e){return e.value})).toString();a.$emit(e,s)}else a.$emit(e,t)}}}),v=b,h=(a("fb31"),a("2877")),_=a("eaac"),g=a("27f9"),y=a("0016"),C=a("db86"),w=a("05c0"),x=a("bd08"),k=a("9c40"),q=a("7f67"),S=a("eebe"),D=a.n(S),I=Object(h["a"])(v,u,p,!1,null,"2ee3a6d6",null),Q=I.exports;D()(I,"components",{QTable:_["a"],QInput:g["a"],QIcon:y["a"],QTd:C["a"],QTooltip:w["a"],QTr:x["a"],QBtn:k["a"]}),D()(I,"directives",{ClosePopup:q["a"]});var P=a("716b"),$={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:P["Money"],PopupCategory:d["a"],PopupSite:Q},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"category",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1},componentKey:0}},watch:{"selected.status":function(e){this.componentKey++}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboStatus=e.loadCombo("category-status"),e.cboLevel=e.loadCombo("category-level")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={status:"Draft"};return t.slug=e.c.genCode("CA"),t.title=e.c.t("Category")+" "+e.c.t("New"),t},loadUpdate:function(e){var t=e;return t.label=e.title?e.title:"",t.slug=e.slug?e.slug:"",e.parent,t},disableWhen:function(){var e=this;return!e.c.canUpdate(e.collection,e.profile.roles)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.parent_title||e.errorInputs.push(e.c.t("Parent Title")+" "+e.c.t("Not Empty")),e.selected.slug||e.errorInputs.push(e.c.t("Slug")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){console.log("");var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Category Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){console.log("")}))):e.api.create(e.collection,e.selected).then((function(t){console.log(""),e.c.toast(e.c.t("Category Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.api.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.api.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},fillParentCategory:function(e){var t=this;console.log(""),t.selected.parent_id=e._id,t.selected.parent_slug=e.slug,t.selected.parent_title=e.title,t.fillToInput="",t.$forceUpdate()},fillSiteTitle:function(e){var t=this;t.fillToInput;console.log(""),t.selected.site_id=e._id,t.selected.site_slug=e.slug,t.selected.site_title=e.title,t.fillToInput="",t.$forceUpdate()},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},A=$,O=(a("0c25"),a("0378")),T=a("65c6"),j=a("2c91"),U=a("ddd8"),E=a("8572"),M=a("58a8"),z=a("4e73"),N=a("ee89"),R=a("d66b"),L=a("24e8"),F=a("f09f"),B=a("6b1d"),Y=a("a370"),W=a("de5e"),G=Object(h["a"])(A,s,o,!1,null,"1818cf8c",null);t["default"]=G.exports;D()(G,"components",{QForm:O["a"],QToolbar:T["a"],QIcon:y["a"],QSpace:j["a"],QBtn:k["a"],QInput:g["a"],QSelect:U["a"],QField:E["a"],QBadge:M["a"],QMenu:z["a"],QUploader:N["a"],QEditor:R["a"],QDialog:L["a"],QCard:F["a"],QLinearProgress:B["a"],QCardSection:Y["a"],QPageSticky:W["a"]}),D()(G,"directives",{ClosePopup:q["a"]})},3995:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Slug")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.slug))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Value")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.value))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"role",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","type","title","value","profit","status","contact_name","date_created","province","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("RO"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("role",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("Role deleted"));case 12:case"end":return a.stop()}}),a)})))()},canDelete:function(){var e=this,t=e.selected.status?e.selected.status.toLowerCase():"",a=["published","close","closed","completed","finished","approved"],s=["xuất bản","đóng","đóng","hoàn thành","hoàn thành","duyệt","đã duyệt"];return-1==a.indexOf(t)&&-1==s.indexOf(t)},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"39d6":function(e,t,a){},"3ced":function(e,t,a){"use strict";a("b097")},"3ef8":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-table",{staticClass:"bg-white popup-table",attrs:{selection:e.propSelection,loading:e.loading,selected:e.multipleSelected,dense:"",data:e.fsearch,columns:e.columns,"visible-columns":e.visibleColumns,"row-key":"_id",pagination:{rowsPerPage:e.c.ROWS_PER_PAGE}},on:{"update:selected":function(t){e.multipleSelected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-toolbar",{staticClass:"no-padding"},[a("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"",debounce:"300",color:"primary",placeholder:"blog, product, main-menu"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),a("FilterByCategory",{staticClass:"q-ml-md",attrs:{propSlug:"system"},on:{reloadCategory:e.setCategory}})],1)]},proxy:!0},e.propSelection?null:{key:"body-cell-title",fn:function(t){return[a("q-td",{staticClass:"bg-info q-py-md text-primary text-bold cursor-pointer popup-col ellipsis",attrs:{props:t}},[a("div",{directives:[{name:"close-popup",rawName:"v-close-popup"}],on:{click:function(a){e.selected=t.row,e.emitParent("reloadOne",e.selected)}}},[e._v(e._s(t.value))]),a("q-tooltip",[e._v("\n                "+e._s(e.c.t("Click to select"))+"\n            ")])],1)]}},e.propSelection?{key:"bottom-row",fn:function(){return[a("q-tr",[a("q-td",{attrs:{colspan:"100%"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-my-sm q-px-sm",attrs:{dense:"",color:"primary",label:e.c.t("Choose")},on:{click:function(t){return e.emitParent("reloadMany",e.multipleSelected)}}})],1)],1)]},proxy:!0}:null],null,!0)})},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("4de4"),a("caad"),a("2532"),a("d81d"),a("25f0"),{name:"Popup",props:{propSelection:String},components:{FilterByCategory:function(){return a.e(1).then(a.bind(null,"74db"))}},data:function(){return{loading:!1,c:this.$common,api:null,collection:"category",showSearch:!1,text:"",objects:[],selected:{},columns:[],visibleColumns:[],multipleSelected:[]}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var e=this,t=e.text;return""==t?e.objects:e.objects.filter((function(e){var a=e.title?e.title.toLowerCase():"",s=e.slug?e.slug.toLowerCase():"",o=e.parent_slug?e.parent_slug.toLowerCase():"",l=e.parent_title?e.parent_title.toLowerCase():"";return a.includes(t)||s.includes(t)||o.includes(t)||l.includes(t)}))}},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.api=new a.$api(a.collection),a.api.setDomain(a.profile.domain),a.fetch(),a.initColumns();case 5:case"end":return t.stop()}}),t)})))()},initColumns:function(){var e=this;e.columns=[{name:"id",visible:!1,align:"left",label:e.c.t("Id"),field:function(e){return e._id},sortable:!0},{name:"title",align:"left",label:e.c.t("Category"),field:function(e){return e.title},sortable:!0},{name:"slug",align:"left",label:e.c.t("Slug"),field:"slug",sortable:!0},{name:"status",align:"left",label:e.c.t("Status"),field:"status",sortable:!0},{name:"parent_slug",align:"left",label:e.c.t("Parent Slug"),field:"parent_slug",sortable:!0},{name:"parent_title",align:"left",label:e.c.t("Parent Title"),field:"parent_title",sortable:!0}],e.visibleColumns=["id","title","url","slug","status"]},fetch:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.loading=!0,t.next=4,a.api.getAll(a.collection);case 4:s=t.sent,a.objects=s.data.objects,a.loading=!1,a.objects&&a.objects.length>0&&(a.objects=a.mapAll(a.objects));case 8:case"end":return t.stop()}}),t)})))()},orm:function(e){var t={};return t._id=e._id,t.title=e.title,t.slug=e.slug,t.url=e.url,t.parent_slug=e.parent_slug,t.parent_title=e.parent_title,t.status=e.status,t},mapAll:function(e){var t=this;return e.map((function(e){return t.orm(e)}))},setCategory:function(e){var t=this;console.log(""),t.text=e&&e.slug?e.slug:""},emitParent:function(e,t){var a=this;if(Array.isArray(t)){var s=t.map((function(e){return e.slug})).toString();a.$emit(e,s)}else a.$emit(e,t)}}}),i=c,r=(a("7021"),a("2877")),d=a("eaac"),u=a("65c6"),p=a("27f9"),m=a("0016"),f=a("db86"),b=a("05c0"),v=a("bd08"),h=a("9c40"),_=a("7f67"),g=a("eebe"),y=a.n(g),C=Object(r["a"])(i,s,o,!1,null,"0c95d0d6",null);t["a"]=C.exports;y()(C,"components",{QTable:d["a"],QToolbar:u["a"],QInput:p["a"],QIcon:m["a"],QTd:f["a"],QTooltip:b["a"],QTr:v["a"],QBtn:h["a"]}),y()(C,"directives",{ClosePopup:_["a"]})},"3f15":function(e,t,a){"use strict";a("b7ae")},"409f":function(e,t,a){},"43fe":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width"},[a("q-toolbar",{staticClass:"bg-grey-2 q-px-sm borders"},[a("div",{},[e._v(e._s(e.c.t("Tasks")))]),a("q-space"),a("q-btn",{staticClass:"q-pa-sm",attrs:{dense:"","no-caps":"",flat:"",icon:"task",label:e.c.t("Task List"),to:"/task"}})],1),a("div",{staticClass:"borders q-px-sm"},[a("q-input",{attrs:{square:"",borderless:"",dense:"",type:"textarea",rows:"4",label:e.c.t("Task description")},model:{value:e.selected.message,callback:function(t){e.$set(e.selected,"message",t)},expression:"selected.message"}})],1),a("div",{staticClass:"q-pa-sm borders"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-select",{staticClass:"col-6 col-md-3",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("q-select",{staticClass:"col-6 col-md-3",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboPriority,label:e.c.t("Priority")},model:{value:e.selected.priority,callback:function(t){e.$set(e.selected,"priority",t)},expression:"selected.priority"}}),a("q-input",{staticClass:"col-6 col-md-3",attrs:{dense:"","stack-label":"",label:e.c.t("Deadline"),outlined:e.c.outlined()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}}),a("q-field",{staticClass:"col-6 col-md-3",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Assign")},scopedSlots:e._u([e.selected.assign?{key:"control",fn:function(){return[e._v("\n                    "+e._s(e.selected.assign)+"\n                ")]},proxy:!0}:null,{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"person"}},[a("q-menu",[a("PopupUser",{on:{reloadOne:e.fillUser}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected.assign,callback:function(t){e.$set(e.selected,"assign",t)},expression:"selected.assign"}})],1)]),a("div",{staticClass:"row q-mt-sm"},[a("q-btn",{staticClass:"col-12 col-md-2",attrs:{icon:"assignment",dense:"",label:e.c.t("Save"),color:"primary","no-caps":""},on:{click:function(t){return t.preventDefault(),e.save()}}})],1),a("q-timeline",{staticClass:"q-ml-md text-caption",attrs:{dense:"",color:"info"}},e._l(e.objects,(function(t,s){return a("q-timeline-entry",{key:"c"+s,attrs:{dense:""},scopedSlots:e._u([{key:"subtitle",fn:function(){return[e._v("\n                "+e._s(t.date_created)+"\n            ")]},proxy:!0},{key:"title",fn:function(){return[a("div",{staticClass:"text-subtitle1"},[e._v(e._s(t.sender)+" "),a("q-icon",{attrs:{name:"chevron_right"}}),e._v(" "+e._s(t.assign))],1)]},proxy:!0}],null,!0)},[a("div",[a("Dot",{key:e.componentKey,staticClass:"q-mr-sm",attrs:{propText:t.status}}),a("span",{staticClass:"bold-font text-body2"},[e._v(e._s(t.message))]),e._v(" ("+e._s(e.c.t("Deadline"))+" : "+e._s(t.date_end)+")\n            ")],1)])})),1),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                        "+e._s(s+1)+". "+e._s(t)+"\n                    ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)},o=[],l=(a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("a9e3"),a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("4de4"),a("99af"),{name:"Task",components:{PopupUser:function(){return Promise.all([a.e(0),a.e(37)]).then(a.bind(null,"e27d"))},Dot:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"9f7a"))}},props:{propCollection:String,propId:Number},data:function(){return{c:this.$common,api:null,collection:"task",objects:[],selected:{},message:"",componentKey:0,cboStatus:[],cboPriority:[],errorInputs:[],showErrorInputs:!1}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.getAll(),e.cboStatus=e.loadCombo("task-status"),e.cboPriority=e.loadCombo("task-priority"),e.selected.status=e.cboStatus[0],e.selected.priority=e.cboPriority[1]},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},getAll:function(){var e=this,t=e.propId,a=e.propCollection;e.api.getByProp("task","collection",a).then((function(a){e.objects=a.data.objects.filter((function(e){return e.doc_id==t||0==e.doc_id||!e.doc_id}))}))},valid:function(){var e=this;return e.selected.message||e.errorInputs.push(e.c.t("Task description")+" "+e.c.t("Not Empty")),e.selected.status||e.errorInputs.push(e.c.t("Status")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},save:function(){var e=this;if(e.valid()){var t=e.propCollection,a=e.propId,s=e.c.formatDataDate(new Date),o=e.c.formatDataDate(new Date),l=e.profile.username,n=e.selected;n.message=e.selected.message?e.selected.message:"",n.collection=t,n.doc_id=parseInt(a),n.sender=l,n.date_created=s,n.date_updated=o,n.title="".concat(l," (").concat(s,") - ").concat(e.selected.message," (").concat(s,")"),console.log(""),e.api.create("task",n).then((function(t){console.log(""),e.getAll()})),e.selected={}}else e.showErrorInputs=!0},fillUser:function(e){var t=this;console.log(""),t.selected.assign=e.username,t.forceRenderer()},forceRenderer:function(){var e=this;e.$forceUpdate(),e.componentKey+=1},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}}),n=l,c=(a("fcc1"),a("2877")),i=a("65c6"),r=a("2c91"),d=a("9c40"),u=a("27f9"),p=a("ddd8"),m=a("0016"),f=a("7cbe"),b=a("52ee"),v=a("ca78"),h=a("8572"),_=a("4e73"),g=a("05eb"),y=a("74af"),C=a("24e8"),w=a("f09f"),x=a("6b1d"),k=a("a370"),q=a("7f67"),S=a("eebe"),D=a.n(S),I=Object(c["a"])(n,s,o,!1,null,null,null);t["default"]=I.exports;D()(I,"components",{QToolbar:i["a"],QSpace:r["a"],QBtn:d["a"],QInput:u["a"],QSelect:p["a"],QIcon:m["a"],QPopupProxy:f["a"],QDate:b["a"],QTime:v["a"],QField:h["a"],QMenu:_["a"],QTimeline:g["a"],QTimelineEntry:y["a"],QDialog:C["a"],QCard:w["a"],QLinearProgress:x["a"],QCardSection:k["a"]}),D()(I,"directives",{ClosePopup:q["a"]})},4607:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.name))]),a("q-space"),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Name")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.name))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Contact Code")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.code))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Type")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.type))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Phone")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.phone)+"\n                            "),e.selected.phone?a("a",{staticClass:"q-ml-lg",staticStyle:{"text-decoration":"none"},attrs:{href:e.c.phoneUrl(e.selected.phone)}},[a("q-btn",{attrs:{round:"",color:"primary",icon:"call",size:"sm"}})],1):e._e()])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Email")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.email)+"\n                            "),e.selected.email?a("a",{staticClass:"q-ml-lg",staticStyle:{"text-decoration":"none"},attrs:{href:"mailto:"+e.selected.email}},[a("q-btn",{attrs:{round:"",color:"primary",icon:"email",size:"sm"}})],1):e._e()])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Province")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.province))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Address")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.address))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Your Coins")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.coins))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("First Request")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.first_request))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date updated")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_updated)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"contact",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","name","phone","email","province","position","address","tyoe","first_request","date_updated","date_created","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected),console.log(""),console.log("")},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","contact_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("CO"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("contact",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("Contact deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"4ea3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width"},[a("div",{staticClass:"bg-grey-2 q-pa-sm borders"},[e._v(e._s(e.c.t("Send Comment")))]),a("div",{staticClass:"borders q-pa-md"},[a("q-input",{attrs:{square:"",borderless:"",dense:"",type:"textarea",rows:"3",label:e.c.t("Your comment")},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),a("q-toolbar",{staticClass:"bg-grey-2 q-pa-sm borders"},[a("q-space"),a("q-btn",{staticClass:"q-px-md",attrs:{icon:"comment",dense:"",label:e.c.t("Send"),color:"primary","no-caps":""},on:{click:function(t){return t.preventDefault(),e.comment()}}})],1),a("q-timeline",{staticClass:"q-ml-md text-caption",attrs:{dense:"",color:"secondary"}},e._l(e.objects,(function(t,s){return a("q-timeline-entry",{key:"c"+s,scopedSlots:e._u([{key:"default",fn:function(s){return[a("span",{staticClass:"text-bold text-primary"},[e._v(e._s(t.sender)+" ")]),e._v(": "+e._s(t.message)+"\n                ("+e._s(t.date_created)+")\n            ")]}}],null,!0)})})),1)],1)},o=[],l=(a("a9e3"),a("4de4"),a("99af"),{name:"Comment",props:{propCollection:String,propId:Number},data:function(){return{c:this.$common,api:null,collection:"comment",objects:[],message:""}},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.getAll()},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.getAll()},methods:{getAll:function(){var e=this,t=e.propId,a=e.propCollection;e.api.getByProp("comment","module",a).then((function(a){e.objects=a.data.objects.filter((function(e){return e.doc_id==t||0==e.doc_id||!e.doc_id}))}))},comment:function(){var e=this,t=e.propCollection,a=e.propId,s=e.c.formatDataDate(new Date),o=e.profile.username,l={module:t,doc_id:parseInt(a),date_created:s,message:e.message,sender:o,title:"".concat(o," - ").concat(e.message," (").concat(s,")")};e.api.create("comment",l).then((function(t){e.getAll()})),e.message=""},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}}),n=l,c=(a("113a"),a("2877")),i=a("27f9"),r=a("65c6"),d=a("2c91"),u=a("9c40"),p=a("05eb"),m=a("74af"),f=a("eebe"),b=a.n(f),v=Object(c["a"])(n,s,o,!1,null,null,null);t["a"]=v.exports;b()(v,"components",{QInput:i["a"],QToolbar:r["a"],QSpace:d["a"],QBtn:u["a"],QTimeline:p["a"],QTimelineEntry:m["a"]})},5183:function(e,t,a){e.exports=a.p+"img/denied.6f4aabba.svg"},"56a4":function(e,t,a){},5797:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white q-my-md"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Site Master")))])]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-8",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("Title")},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-4",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Slug"),placeholder:e.c.t("Slug")},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",{staticClass:"text-bold bold-font"},[e._v(e._s(e.c.t("Header and Footer")))])]),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",type:"textarea",rows:"3",outlined:e.c.outlined(),label:e.c.t("Logo and banner"),placeholder:e.c.t("Commas")},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Site Contact Name"),placeholder:e.c.t("Site Contact Name")},model:{value:e.selected.contact_name,callback:function(t){e.$set(e.selected,"contact_name",t)},expression:"selected.contact_name"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Company Owner"),placeholder:e.c.t("Company Owner")},model:{value:e.selected.company_owner,callback:function(t){e.$set(e.selected,"company_owner",t)},expression:"selected.company_owner"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Phone"),placeholder:e.c.t("Phone")},model:{value:e.selected.contact_phone,callback:function(t){e.$set(e.selected,"contact_phone",t)},expression:"selected.contact_phone"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Email"),placeholder:e.c.t("Email")},model:{value:e.selected.contact_email,callback:function(t){e.$set(e.selected,"contact_email",t)},expression:"selected.contact_email"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Contact Zalo"),placeholder:e.c.t("Contact Zalo")},model:{value:e.selected.contact_zalo,callback:function(t){e.$set(e.selected,"contact_zalo",t)},expression:"selected.contact_zalo"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Contact Facebook"),placeholder:e.c.t("Contact Facebook")},model:{value:e.selected.contact_facebook,callback:function(t){e.$set(e.selected,"contact_facebook",t)},expression:"selected.contact_facebook"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Company Name"),placeholder:e.c.t("Company Name")},model:{value:e.selected.company_name,callback:function(t){e.$set(e.selected,"company_name",t)},expression:"selected.company_name"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Address"),placeholder:e.c.t("Address")},model:{value:e.selected.company_address,callback:function(t){e.$set(e.selected,"company_address",t)},expression:"selected.company_address"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Company Taxcode"),placeholder:e.c.t("Company Taxcode")},model:{value:e.selected.company_taxcode,callback:function(t){e.$set(e.selected,"company_taxcode",t)},expression:"selected.company_taxcode"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Issue Date"),placeholder:e.c.t("Issue Date")},model:{value:e.selected.date_taxcode,callback:function(t){e.$set(e.selected,"date_taxcode",t)},expression:"selected.date_taxcode"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Gov Link"),placeholder:e.c.t("Gov Link")},model:{value:e.selected.link_bocongthuong,callback:function(t){e.$set(e.selected,"link_bocongthuong",t)},expression:"selected.link_bocongthuong"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",{staticClass:"text-bold bold-font"},[e._v(e._s(e.c.t("Site SEO")))])]),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Site Name"),placeholder:e.c.t("Site Name")},model:{value:e.selected.site_name,callback:function(t){e.$set(e.selected,"site_name",t)},expression:"selected.site_name"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Site Title"),placeholder:e.c.t("Site Title")},model:{value:e.selected.site_title,callback:function(t){e.$set(e.selected,"site_title",t)},expression:"selected.site_title"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",type:"textarea",rows:"3",outlined:e.c.outlined(),label:e.c.t("Site description"),placeholder:e.c.t("Site description")},model:{value:e.selected.site_description,callback:function(t){e.$set(e.selected,"site_description",t)},expression:"selected.site_description"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Site Slogan"),placeholder:e.c.t("Site Slogan")},model:{value:e.selected.site_slogan,callback:function(t){e.$set(e.selected,"site_slogan",t)},expression:"selected.site_slogan"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:["noindex,nofollow","index,follow"],label:e.c.t("Meta Robots"),readonly:e.disableWhen()},model:{value:e.selected.meta_robots,callback:function(t){e.$set(e.selected,"meta_robots",t)},expression:"selected.meta_robots"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Keywords"),placeholder:e.c.t("Keywords")},model:{value:e.selected.keywords,callback:function(t){e.$set(e.selected,"keywords",t)},expression:"selected.keywords"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",{staticClass:"text-bold bold-font"},[e._v(e._s(e.c.t("Slider and Color")))])]),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",type:"textarea",rows:"3",outlined:e.c.outlined(),label:e.c.t("Slider"),placeholder:e.c.t("Commas")},model:{value:e.selected.slider,callback:function(t){e.$set(e.selected,"slider",t)},expression:"selected.slider"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Color Primary"),placeholder:e.c.t("Color Primary")},model:{value:e.selected.color_primary,callback:function(t){e.$set(e.selected,"color_primary",t)},expression:"selected.color_primary"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Color Secondary"),placeholder:e.c.t("Color Secondary")},model:{value:e.selected.color_secondary,callback:function(t){e.$set(e.selected,"color_secondary",t)},expression:"selected.color_secondary"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Color Info"),placeholder:e.c.t("Color Info")},model:{value:e.selected.color_info,callback:function(t){e.$set(e.selected,"color_info",t)},expression:"selected.color_info"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Color Footer"),placeholder:e.c.t("Color Footer")},model:{value:e.selected.color_footer,callback:function(t){e.$set(e.selected,"color_footer",t)},expression:"selected.color_footer"}}),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-px-sm"},[a("div",{staticClass:"col-12 col-md-12"},[a("div",{staticClass:"text-bold bold-font"},[e._v(e._s(e.c.t("Call to Action")))])]),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("CTA Text1"),placeholder:e.c.t("CTA Text1")},model:{value:e.selected.cta_text1,callback:function(t){e.$set(e.selected,"cta_text1",t)},expression:"selected.cta_text1"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("CTA Link1"),placeholder:e.c.t("CTA Link1")},model:{value:e.selected.cta_link1,callback:function(t){e.$set(e.selected,"cta_link1",t)},expression:"selected.cta_link1"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("CTA Text2"),placeholder:e.c.t("CTA Text2")},model:{value:e.selected.cta_text2,callback:function(t){e.$set(e.selected,"cta_text2",t)},expression:"selected.cta_text2"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("CTA Link2"),placeholder:e.c.t("CTA Link2")},model:{value:e.selected.cta_link2,callback:function(t){e.$set(e.selected,"cta_link2",t)},expression:"selected.cta_link2"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",{staticClass:"text-bold bold-font"},[e._v(e._s(e.c.t("Embed")))])]),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:[4,8],label:e.c.t("Embed Blog"),readonly:e.disableWhen()},model:{value:e.selected.embed_blog,callback:function(t){e.$set(e.selected,"embed_blog",t)},expression:"selected.embed_blog"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:[4,8],label:e.c.t("Embed Product"),readonly:e.disableWhen()},model:{value:e.selected.embed_product,callback:function(t){e.$set(e.selected,"embed_product",t)},expression:"selected.embed_product"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Aff"),placeholder:e.c.t("Aff")},model:{value:e.selected.enbed_aff,callback:function(t){e.$set(e.selected,"enbed_aff",t)},expression:"selected.enbed_aff"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Embed GA"),placeholder:e.c.t("Embed GA")},model:{value:e.selected.embed_ga,callback:function(t){e.$set(e.selected,"embed_ga",t)},expression:"selected.embed_ga"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",type:"textarea",rows:"3",outlined:e.c.outlined(),label:e.c.t("Embed FB"),placeholder:e.c.t("Embed FB")},model:{value:e.selected.embed_fb,callback:function(t){e.$set(e.selected,"embed_fb",t)},expression:"selected.embed_fb"}})],1):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                                "+e._s(s+1)+". "+e._s(t)+"\n                            ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("d3b7"),a("e6cf"),a("99af"),a("5de6")),i=a("9f7a"),r=a("d443"),d=a("716b"),u={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"site",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1}}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboStatus=e.loadCombo("active-inactive"),e.getFields()},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("SITE"),t.title=e.c.t("Site Master")+" "+e.c.t("New"),t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a},getFields:function(e){var t=this;t.api.getFields(e).then((function(e){t.fields=e.data,t.inputs=t.setInputType(t.fields)}))},setInputType:function(e){var t=this,a=[];return e.forEach((function(e){var s={name:e,label:t.c.t(e),disabled:!1};"id"===e&&(s.disable=!0),"content"===e&&(s.type="editor"),"summary"===e&&(s.type="textarea"),"site_description"===e&&(s.type="textarea"),"status"===e&&(s.placeholder="published, draft"),"page_order"===e&&(s.type="number"),"doc_order"===e&&(s.type="number"),"price"===e&&(s.type="number"),"retail_price"===e&&(s.type="number"),"icon"===e&&(s.placeholder="video_library"),"embed_fb"===e&&(s.type="textarea"),"embed_chat"===e&&(s.type="textarea"),"image"===e&&(s.type="textarea"),"title"===e&&(s.type="textarea"),"site_title"===e&&(s.type="textarea"),"slider"===e&&(s.type="textarea"),"images"===e&&(s.type="textarea"),"embed_ga"===e&&(s.type="textarea"),"featured"===e&&(s.placeholder="yes"),"date_created"===e&&(s.type="date"),"date_updated"===e&&(s.type="date"),"layout"===e&&(s.placeholder="binh-thuong, chia-cot, hinh-anh, lien-he, cau-chuyen"),a.push(s)})),a},canUpdate:function(){var e=this,t=e.selected.status?e.selected.status.toLowerCase():"",a=["close","closed","approved"],s=["đóng","đã đóng","đã duyệt"];return-1==a.indexOf(t)&&-1==s.indexOf(t)},disableWhen:function(){return!this.canUpdate()},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.slug||e.errorInputs.push(e.c.t("Slug")+" "+e.c.t("Not Empty")),e.selected.site_name||e.errorInputs.push(e.c.t("Site Name")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Master Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("Master Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.api.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.api.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},p=u,m=(a("d010"),a("2877")),f=a("0378"),b=a("65c6"),v=a("0016"),h=a("2c91"),_=a("9c40"),g=a("eb85"),y=a("27f9"),C=a("ddd8"),w=a("24e8"),x=a("f09f"),k=a("6b1d"),q=a("a370"),S=a("de5e"),D=a("7f67"),I=a("eebe"),Q=a.n(I),P=Object(m["a"])(p,s,o,!1,null,"38bdde46",null);t["default"]=P.exports;Q()(P,"components",{QForm:f["a"],QToolbar:b["a"],QIcon:v["a"],QSpace:h["a"],QBtn:_["a"],QSeparator:g["a"],QInput:y["a"],QSelect:C["a"],QDialog:w["a"],QCard:x["a"],QLinearProgress:k["a"],QCardSection:q["a"],QPageSticky:S["a"]}),Q()(P,"directives",{ClosePopup:D["a"]})},"5ba5":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Sales Order")))])]),a("q-space"),a("Dot",{staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"app-padding"},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-pa-sm q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("SO Title"),placeholder:e.c.t("SO Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("So Code"),placeholder:e.c.t("So Code"),readonly:e.disableWhen()},model:{value:e.selected.code,callback:function(t){e.$set(e.selected,"code",t)},expression:"selected.code"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboType,label:e.c.t("Type"),readonly:e.disableWhen()},model:{value:e.selected.type,callback:function(t){e.$set(e.selected,"type",t)},expression:"selected.type"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboGroup,label:e.c.t("Group"),readonly:e.disableWhen()},model:{value:e.selected.groupname,callback:function(t){e.$set(e.selected,"groupname",t)},expression:"selected.groupname"}}),a("q-field",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Total"),placeholder:e.c.t("Total"),readonly:""},scopedSlots:e._u([{key:"control",fn:function(t){var s=t.id,o=t.floatingLabel,l=t.value,n=t.emitValue;return[a("money",e._b({directives:[{name:"show",rawName:"v-show",value:o,expression:"floatingLabel"}],staticClass:"q-field__input",attrs:{id:s,value:l,readonly:""},on:{input:n}},"money",e.money,!1))]}}]),model:{value:e.selected.total,callback:function(t){e.$set(e.selected,"total",t)},expression:"selected.total"}}),a("q-field",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Cost Of Goods"),placeholder:e.c.t("Cost of Goods"),readonly:""},scopedSlots:e._u([{key:"control",fn:function(t){var s=t.id,o=t.floatingLabel,l=t.value,n=t.emitValue;return[a("money",e._b({directives:[{name:"show",rawName:"v-show",value:o,expression:"floatingLabel"}],staticClass:"q-field__input",attrs:{id:s,value:l,readonly:""},on:{input:n}},"money",e.money,!1))]}}]),model:{value:e.selected.cog,callback:function(t){e.$set(e.selected,"cog",t)},expression:"selected.cog"}}),a("q-input",{staticClass:" col-12 col-md-6",attrs:{dense:"","stack-label":"",label:e.c.t("Date Start"),outlined:e.c.outlined(),readonly:e.disableWhen()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",label:e.c.t("Date End"),outlined:e.c.outlined(),readonly:e.disableWhen()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}})],1),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-px-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",autogrow:"",dense:"","stack-label":"",label:e.c.t("SO Summary"),placeholder:e.c.t("SO Summary")},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("div",{staticClass:"col-12 col-md-6 "},[e.selected.images?a("div",{staticClass:"all-borders"},[a("q-img",{staticClass:"q-mt-sm",attrs:{src:e.c.showImage(e.selected.images)}})],1):e._e(),a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Images"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}})],1)],1):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                                "+e._s(s+1)+". "+e._s(t)+"\n                            ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("98d9")),i=a("9f7a"),r=a("d443"),d=a("716b"),u={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"so",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1}}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboStatus=e.loadCombo("so-status"),e.cboType=e.loadCombo("so-type"),e.cboGroup=e.loadCombo("so-group")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("SO"),t.code=t.slug,t.title=e.c.t("Sales Orders")+" "+e.c.t("New"),t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t.date_start=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.profit=e.total-e.cog,a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a.date_start=e.date_start?t.c.formatDataDate(e.date_start):null,a.date_end=e.date_end?t.c.formatDataDate(e.date_end):null,a},disableWhen:function(){var e=this;return!e.c.canUpdate(e.collection,e.profile.roles)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("SO Title")+" "+e.c.t("Not Empty")),e.selected.code||e.errorInputs.push(e.c.t("SO Code")+" "+e.c.t("Not Empty")),e.selected.total||e.errorInputs.push(e.c.t("Total")+" "+e.c.t("Not Empty")),e.selected.total&&parseFloat(e.selected.total)<=0&&e.errorInputs.push(e.c.t("Total")+" "+e.c.t("Must Have")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("SO Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("SO Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.db.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.db.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},p=u,m=(a("e70f"),a("2877")),f=a("0378"),b=a("65c6"),v=a("0016"),h=a("2c91"),_=a("9c40"),g=a("eb85"),y=a("27f9"),C=a("ddd8"),w=a("8572"),x=a("7cbe"),k=a("52ee"),q=a("ca78"),S=a("068f"),D=a("ee89"),I=a("24e8"),Q=a("f09f"),P=a("6b1d"),$=a("a370"),A=a("de5e"),O=a("7f67"),T=a("eebe"),j=a.n(T),U=Object(m["a"])(p,s,o,!1,null,"4ef936ae",null);t["default"]=U.exports;j()(U,"components",{QForm:f["a"],QToolbar:b["a"],QIcon:v["a"],QSpace:h["a"],QBtn:_["a"],QSeparator:g["a"],QInput:y["a"],QSelect:C["a"],QField:w["a"],QPopupProxy:x["a"],QDate:k["a"],QTime:q["a"],QImg:S["a"],QUploader:D["a"],QDialog:I["a"],QCard:Q["a"],QLinearProgress:P["a"],QCardSection:$["a"],QPageSticky:A["a"]}),j()(U,"directives",{ClosePopup:O["a"]})},"5de6":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Slug")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.slug))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Color Primary")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.color_primary))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Color Secondary")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.color_secondary))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Color Info")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.color_info))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"site",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","slug","title","site_name","site_slogan","status","contact_name","contact_phone","company_name","company_address","date_created","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("SITE"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("site",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("Master deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},6224:function(e,t,a){"use strict";a("8ed4")},"648e":function(e,t,a){},"67f9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-toolbar",{staticClass:"no-padding"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("List Code")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.slug))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Value")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.value))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("b0c0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"list",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","type","title","value","profit","status","contact_name","date_created","province","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("list",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("List Item deleted"));case 12:case"end":return a.stop()}}),a)})))()},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("LIST"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"6a02":function(e,t,a){"use strict";a("39d6")},7021:function(e,t,a){"use strict";a("b7ca")},"72b2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{attrs:{separator:""}},e._l(e.fsearch,(function(t,s){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s,attrs:{clickable:""},on:{click:function(a){return e.switchLang(t)}}},[a("q-item-section",[e._v(e._s(t.text))])],1)})),1)},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),a("4de4"),a("caad"),a("d81d"),a("a6d8")),i=c.filter((function(e){return["vi","en-us"].includes(e.isoName)})),r={data:function(){return{c:this.$common,objects:[],selected:null}},computed:{fsearch:function(){var e=this;return e.objects}},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.fetch();case 2:case"end":return t.stop()}}),t)})))()},fetch:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.objects=i.map((function(e){return{text:e.nativeName,value:e.isoName}})),a.objects=a.mapAll(a.objects);case 3:case"end":return t.stop()}}),t)})))()},orm:function(e){var t={value:null,text:null};return t.value=e.value,t.text=e.text,t},mapAll:function(e){var t=this;return e.map((function(e){return t.orm(e)}))},emitParent:function(e,t){var a=this;a.$emit(e,t)},switchLang:function(e){var t=this;t.selected=e,t.emitParent("reloadLanguage",t.selected)}}},d=r,u=a("2877"),p=a("1c1c"),m=a("66e5"),f=a("4074"),b=a("7f67"),v=a("eebe"),h=a.n(v),_=Object(u["a"])(d,s,o,!1,null,null,null);t["default"]=_.exports;h()(_,"components",{QList:p["a"],QItem:m["a"],QItemSection:f["a"]}),h()(_,"directives",{ClosePopup:b["a"]})},"74db":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-btn-dropdown",{staticClass:"text-caption",attrs:{dense:"",flat:"",color:"primary",label:e.selected?e.selected.title:e.c.t("Category")}},[a("q-list",{staticStyle:{"min-width":"160px"},attrs:{separator:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.select(null)}}},[e._v(e._s(e.c.t("All")))]),e._l(e.fsearch,(function(t,s){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s,attrs:{clickable:""},on:{click:function(a){return e.select(t)}}},[e._v("\n                "+e._s(t.title)+"\n                ")])}))],2)],1)],1)},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),{name:"CategoryFilter",props:{propSlug:String},data:function(){return{c:this.$common,api:null,collection:"category",objects:[],selected:null}},computed:{fsearch:function(){return this.objects}},created:function(){var e=this;e.api=new e.$api(e.collection),e.fetch()},methods:{fetch:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,""==a.propSlug){t.next=7;break}return t.next=4,a.api.getByProp(a.collection,"parent_slug",a.propSlug);case 4:s=t.sent,t.next=10;break;case 7:return t.next=9,a.api.getAll(a.collection);case 9:s=t.sent;case 10:o=s.data,console.clear(),console.log(""),a.objects=o.objects;case 14:case"end":return t.stop()}}),t)})))()},select:function(e){var t=this;t.emitParent("reloadCategory",e)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}}),i=c,r=(a("3ced"),a("2877")),d=a("f20b"),u=a("1c1c"),p=a("66e5"),m=a("4074"),f=a("0170"),b=a("7f67"),v=a("eebe"),h=a.n(v),_=Object(r["a"])(i,s,o,!1,null,"5b27412b",null);t["default"]=_.exports;h()(_,"components",{QBtnDropdown:d["a"],QList:u["a"],QItem:p["a"],QItemSection:m["a"],QItemLabel:f["a"]}),h()(_,"directives",{ClosePopup:b["a"]})},"7b77":function(e,t,a){},"7f32":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),e.selected._id?a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Slug")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.slug))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Status")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.status))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Doc Order")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.doc_order))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Images")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.images))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Summary")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.summary))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]):e._e()],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"page",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","slug","title","summary","doc_order","lang","status","date_created","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("PAGE"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("page",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("Page deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},8479:function(e,t,a){e.exports=a.p+"img/empty.d3a0c264.svg"},8488:function(e,t,a){var s={"./":["a6d8",3],"./ar":["13ef",9,0],"./ar.js":["13ef",9,0],"./az-latn":["4336",9,0],"./az-latn.js":["4336",9,0],"./bg":["a6b2",9,0],"./bg.js":["a6b2",9,0],"./ca":["8378",9,0],"./ca.js":["8378",9,0],"./cs":["5ddc",9,0],"./cs.js":["5ddc",9,0],"./da":["d3e4",9,0],"./da.js":["d3e4",9,0],"./de":["215a",9,0],"./de.js":["215a",9,0],"./el":["83bc",9,0],"./el.js":["83bc",9,0],"./en-gb":["17f5",9,0],"./en-gb.js":["17f5",9,0],"./en-us":["1f91",9],"./en-us.js":["1f91",9],"./eo":["b25b",9,0],"./eo.js":["b25b",9,0],"./es":["df1a",9,0],"./es.js":["df1a",9,0],"./et":["c3ad",9,0],"./et.js":["c3ad",9,0],"./fa":["a0f3",9,0],"./fa-ir":["b67a",9,0],"./fa-ir.js":["b67a",9,0],"./fa.js":["a0f3",9,0],"./fi":["10c0",9,0],"./fi.js":["10c0",9,0],"./fr":["34fe",9,0],"./fr.js":["34fe",9,0],"./gn":["3c87",9,0],"./gn.js":["3c87",9,0],"./he":["36eb",9,0],"./he.js":["36eb",9,0],"./hr":["007f",9,0],"./hr.js":["007f",9,0],"./hu":["a9af",9,0],"./hu.js":["a9af",9,0],"./id":["7e40",9,0],"./id.js":["7e40",9,0],"./index":["a6d8",3],"./index.json":["a6d8",3],"./is":["e41d",9,0],"./is.js":["e41d",9,0],"./it":["a745",9,0],"./it.js":["a745",9,0],"./ja":["5521",9,0],"./ja.js":["5521",9,0],"./km":["726e",9,0],"./km.js":["726e",9,0],"./ko-kr":["187f",9,0],"./ko-kr.js":["187f",9,0],"./kur-ckb":["d9db",9,0],"./kur-ckb.js":["d9db",9,0],"./lu":["1ee2",9,0],"./lu.js":["1ee2",9,0],"./lv":["004e",9,0],"./lv.js":["004e",9,0],"./ml":["c454",9,0],"./ml.js":["c454",9,0],"./ms":["bf26",9,0],"./ms.js":["bf26",9,0],"./nb-no":["dacc",9,0],"./nb-no.js":["dacc",9,0],"./nl":["8cf4",9,0],"./nl.js":["8cf4",9,0],"./pl":["700f",9,0],"./pl.js":["700f",9,0],"./pt":["37ed",9,0],"./pt-br":["f476",9,0],"./pt-br.js":["f476",9,0],"./pt.js":["37ed",9,0],"./ro":["fecf",9,0],"./ro.js":["fecf",9,0],"./ru":["14c0",9,0],"./ru.js":["14c0",9,0],"./sk":["15e6",9,0],"./sk.js":["15e6",9,0],"./sl":["5e5a",9,0],"./sl.js":["5e5a",9,0],"./sr":["78dc",9,0],"./sr.js":["78dc",9,0],"./sv":["7107",9,0],"./sv.js":["7107",9,0],"./ta":["3572",9,0],"./ta.js":["3572",9,0],"./th":["c9b0",9,0],"./th.js":["c9b0",9,0],"./tr":["c1a5",9,0],"./tr.js":["c1a5",9,0],"./ug":["c290",9,0],"./ug.js":["c290",9,0],"./uk":["6464",9,0],"./uk.js":["6464",9,0],"./vi":["1fb0",9],"./vi.js":["1fb0",9],"./zh-hans":["bf69",9,0],"./zh-hans.js":["bf69",9,0],"./zh-hant":["db10",9,0],"./zh-hant.js":["db10",9,0]};function o(e){if(!a.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],o=t[0];return Promise.all(t.slice(2).map(a.e)).then((function(){return a.t(o,t[1])}))}o.keys=function(){return Object.keys(s)},o.id="8488",e.exports=o},"85d4":function(e,t,a){"use strict";a("f000")},"8eb8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Contact")))])]),a("q-space"),a("Dot",{staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Name"),placeholder:e.c.t("Title"),readonly:e.disableWhen()},model:{value:e.selected.name,callback:function(t){e.$set(e.selected,"name",t)},expression:"selected.name"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Code"),placeholder:e.c.t("Contact Code"),readonly:e.disableWhen()},model:{value:e.selected.code,callback:function(t){e.$set(e.selected,"code",t)},expression:"selected.code"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Your coins"),placeholder:e.c.t("Your coins"),readonly:e.disableWhen()},model:{value:e.selected.coins,callback:function(t){e.$set(e.selected,"coins",t)},expression:"selected.coins"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{type:"number",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Phone"),placeholder:e.c.t("Phone"),readonly:e.disableWhen()},model:{value:e.selected.phone,callback:function(t){e.$set(e.selected,"phone",t)},expression:"selected.phone"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Email"),placeholder:e.c.t("Email"),readonly:e.disableWhen()},model:{value:e.selected.email,callback:function(t){e.$set(e.selected,"email",t)},expression:"selected.email"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboType,label:e.c.t("Type"),readonly:e.disableWhen()},model:{value:e.selected.type,callback:function(t){e.$set(e.selected,"type",t)},expression:"selected.type"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Province"),placeholder:e.c.t("Province"),readonly:e.disableWhen()},model:{value:e.selected.province,callback:function(t){e.$set(e.selected,"province",t)},expression:"selected.province"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Address"),placeholder:e.c.t("Address"),readonly:e.disableWhen()},model:{value:e.selected.address,callback:function(t){e.$set(e.selected,"address",t)},expression:"selected.address"}})],1),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-px-sm"},[a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Position"),placeholder:e.c.t("Position"),readonly:e.disableWhen()},model:{value:e.selected.position,callback:function(t){e.$set(e.selected,"position",t)},expression:"selected.position"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboGroup,label:e.c.t("Group"),readonly:e.disableWhen()},model:{value:e.selected.groupname,callback:function(t){e.$set(e.selected,"groupname",t)},expression:"selected.groupname"}}),a("q-input",{staticClass:" col-12 col-md-6",attrs:{dense:"","stack-label":"",label:e.c.t("Date Start"),outlined:e.c.outlined(),readonly:e.disableWhen()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,1634858838),model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",label:e.c.t("Date End"),outlined:e.c.outlined(),readonly:e.disableWhen()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}],null,!1,65231574),model:{value:e.selected.date_end,callback:function(t){e.$set(e.selected,"date_end",t)},expression:"selected.date_end"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",autogrow:"",dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary")},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),dense:"","stack-label":"",label:e.c.t("Images"),placeholder:e.c.t("Paste image link or upload"),readonly:e.disableWhen()},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"image"}},[a("q-menu",{attrs:{flat:""}},[a("div",{staticClass:"all-borders"},[a("img",{staticStyle:{"max-width":"200px"},attrs:{src:e.c.showImage(e.selected.images)}})])])],1)]},proxy:!0}],null,!1,421006547),model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}}),a("div",{staticClass:"col-12 col-md-6 "},[a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Images"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}})],1)],1):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                            "+e._s(s+1)+". "+e._s(t)+"\n                        ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("b0c0"),a("d3b7"),a("e6cf"),a("99af"),a("4607")),i=a("9f7a"),r=a("d443"),d=a("716b"),u={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"contact",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1}}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboStatus=e.loadCombo("active-inactive"),e.cboType=e.loadCombo("contact-type"),e.cboGroup=e.loadCombo("contact-group")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("CONTACT"),t.code=t.slug,t.title=e.c.t("Contact")+" "+e.c.t("New"),t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t.date_start=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.title=e.name?e.name:"",a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a.date_start=e.date_start?t.c.formatDataDate(e.date_start):null,a.date_end=e.date_end?t.c.formatDataDate(e.date_end):null,a},canUpdate:function(){var e=this;if(null==t)return!0;var t=e.selected.status?e.selected.status.toLowerCase():"",a=["active","new","approved"],s=["hoạt động","mới","đã duyệt"];return-1==a.indexOf(t)&&-1==s.indexOf(t)},disableWhen:function(){return!this.canUpdate()},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.phone||e.errorInputs.push(e.c.t("Phone")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Contact Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){})):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("Contact Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.api.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.api.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},p=u,m=(a("3f15"),a("2877")),f=a("0378"),b=a("65c6"),v=a("0016"),h=a("2c91"),_=a("9c40"),g=a("eb85"),y=a("27f9"),C=a("ddd8"),w=a("7cbe"),x=a("52ee"),k=a("ca78"),q=a("4e73"),S=a("ee89"),D=a("24e8"),I=a("f09f"),Q=a("6b1d"),P=a("a370"),$=a("de5e"),A=a("7f67"),O=a("eebe"),T=a.n(O),j=Object(m["a"])(p,s,o,!1,null,"42392696",null);t["default"]=j.exports;T()(j,"components",{QForm:f["a"],QToolbar:b["a"],QIcon:v["a"],QSpace:h["a"],QBtn:_["a"],QSeparator:g["a"],QInput:y["a"],QSelect:C["a"],QPopupProxy:w["a"],QDate:x["a"],QTime:k["a"],QMenu:q["a"],QUploader:S["a"],QDialog:D["a"],QCard:I["a"],QLinearProgress:Q["a"],QCardSection:P["a"],QPageSticky:$["a"]}),T()(j,"directives",{ClosePopup:A["a"]})},"8ed4":function(e,t,a){},"943a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.name))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Username")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.username))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Name")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.name))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Type")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.type))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Roles")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.roles))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Phone")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.phone))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Email")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.email))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Images")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.images))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"user",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","username","name","type","status","phone","email","roles","date_created","province","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("USER"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("user",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("User deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"98d9":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-mb-lg"},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("SO Code")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.slug))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Status")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.status))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Type")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.type))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Total")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatCurrency(e.selected.total)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("COG")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatCurrency(e.selected.cog)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Profit")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatCurrency(e.selected.profit)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Contact Name")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.contact_name))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e(),e.selected._id?a("div",[a("div",{staticClass:"bold-font text-h6 q-my-md ellipsis-2-lines"},[e._v(e._s(e.c.t("Items")))]),e.items&&e.items.length>0?a("table",[a("thead",[a("tr",[a("th",[e._v(e._s(e.c.t("Product")))]),a("th",[e._v(e._s(e.c.t("Quantity")))]),a("th",[e._v(e._s(e.c.t("Price")))]),a("th",[e._v(e._s(e.c.t("Amount")))]),a("th",[e._v(e._s(e.c.t("Warranty")))])])]),a("tbody",e._l(e.items,(function(t,s){return e.items&&e.items.length>0?a("tr",[a("td",{},[e._v(" "+e._s(t.title)+" "),a("br"),e._v(" "+e._s(t.sku)+" ")]),a("td",{staticClass:"text-center"},[e._v(" "+e._s(t.quantity))]),a("td",{staticClass:"text-right"},[e._v(" "+e._s(e.c.formatCurrency(t.price)))]),a("td",{staticClass:"text-right"},[e._v(" "+e._s(e.c.formatCurrency(t.price*t.quantity)))]),a("td",{},[e._v(" "+e._s(t.warranty)+" "+e._s(e.c.t("month")))])]):e._e()})),0)]):e._e()]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"so",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","code","title","total","profit","status","contact_name","date_created","province","owner"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected),e.getItems(e.selected._id)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected),console.log("")},methods:{getItems:function(e){var t=this;if(!e)return[];t.api.getByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("SO"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("so",e);case 6:return l=a.sent,a.next=9,s.api.deleteBy("so_item","parent_id",e);case 9:return n=a.sent,c=[l,n],a.next=13,Promise.all(c);case 13:s.c.toast(s.c.t("SO deleted")),s.emitParent("reloadRemove",null);case 15:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},"992b":function(e,t,a){"use strict";a("b495")},"9ecf":function(e,t,a){e.exports=a.p+"img/mobile.c002e6ef.jpeg"},"9f7a":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-icon",{class:e.selected.color,attrs:{size:"sm",name:e.selected.icon}},[a("q-tooltip",[e._v("\n        "+e._s(e.propText?e.propText:e.c.t("No Status"))+"\n    ")])],1)},o=[],l={name:"Dot",props:{propText:String},data:function(){return{c:this.$common,text:this.propText,selected:{icon:"dot",color:"grey"},color:"grey",icon:"dot"}},mounted:function(){var e=this;e.text=e.propText?e.propText:null,e.setValue(e.text)},created:function(){var e=this;e.text=e.propText?e.propText:null,e.setValue(e.text),console.log("")},methods:{setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;e=e?e.toLowerCase():"",-1!=["open","opened","started","new","mở","bắt đầu","mới"].indexOf(e)&&(t.selected={icon:"open_in_new",color:"text-green"}),-1!=["process","progress","xử lý","đang làm","tiến hành"].indexOf(e)&&(t.selected={icon:"trending_up",color:"text-blue"}),-1!=["close","closed","completed","finished","đóng","hoàn thành","kết thúc"].indexOf(e)&&(t.selected={icon:"domain_verification",color:"text-green"}),-1!=["approve","approved","active","đang sử dụng","duyệt","đã duyệt","đồng ý"].indexOf(e)&&(t.selected={icon:"domain_verification",color:"text-green"}),-1!=["cancel","cancelled","huỷ","huỷ bỏ"].indexOf(e)&&(t.selected={icon:"cancel",color:"text-red"}),-1!=["pending","hold","inactive","ngưng sử dụng","ngưng","tạm ngưng","giữ lại"].indexOf(e)&&(t.selected={icon:"stop",color:"text-red"}),-1!=["published","xuất bản"].indexOf(e)&&(t.selected={icon:"domain_verification",color:"text-green"}),-1!=["unpublished","draft","tạm ngưng","nháp"].indexOf(e)&&(t.selected={icon:"pending",color:"text-orange"}),-1!=["online"].indexOf(e)&&(t.selected={icon:"contact_mail",color:"text-green"}),-1!=["offline"].indexOf(e)&&(t.selected={icon:"emoji_people",color:"text-green"}),-1!=["to do"].indexOf(e)&&(t.selected={icon:"play_arrow",color:"text-blue"}),-1!=["doing"].indexOf(e)&&(t.selected={icon:"pending",color:"text-orange"}),-1!=["done"].indexOf(e)&&(t.selected={icon:"domain_verification",color:"text-green"}),-1!=["archive"].indexOf(e)&&(t.selected={icon:"inventory",color:"text-grey"}),t.$forceUpdate()},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},n=l,c=a("2877"),i=a("0016"),r=a("05c0"),d=a("eebe"),u=a.n(d),p=Object(c["a"])(n,s,o,!1,null,null,null);t["default"]=p.exports;u()(p,"components",{QIcon:i["a"],QTooltip:r["a"]})},"9f87":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white q-mb-md"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Pages")))])]),a("q-space"),a("Dot",{key:e.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Slug"),placeholder:e.c.t("Type with space"),readonly:e.disableWhen()},on:{blur:e.slugCheck},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",[e._v(e._s(e.c.t("Content")))]),a("q-editor",{attrs:{"min-height":"30rem",toolbar:e.c.editorToolbar(),readonly:e.disableWhen()},model:{value:e.selected.content,callback:function(t){e.$set(e.selected,"content",t)},expression:"selected.content"}})],1),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",rows:5,dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary"),readonly:e.disableWhen()},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("div",{staticClass:"col-12 col-md-6 q-gutter-y-sm"},[a("q-select",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboLang,label:e.c.t("Language"),readonly:e.disableWhen()},model:{value:e.selected.lang,callback:function(t){e.$set(e.selected,"lang",t)},expression:"selected.lang"}}),a("q-input",{attrs:{dense:"","stack-label":"",label:e.c.t("Date Published"),outlined:e.c.outlined(),readonly:e.disableWhen()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}}),a("q-input",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Menu"),placeholder:e.c.t("Menu"),readonly:e.disableWhen()},model:{value:e.selected.menu,callback:function(t){e.$set(e.selected,"menu",t)},expression:"selected.menu"}}),a("q-select",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboLayout,label:e.c.t("Layout"),readonly:e.disableWhen()},model:{value:e.selected.layout,callback:function(t){e.$set(e.selected,"layout",t)},expression:"selected.layout"}}),a("q-select",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19.2],label:e.c.t("Page Order"),readonly:e.disableWhen()},model:{value:e.selected.doc_order,callback:function(t){e.$set(e.selected,"doc_order",t)},expression:"selected.doc_order"}})],1),a("div",{staticClass:"col-12 col-md-6 q-gutter-y-sm"},[a("q-input",{attrs:{outlined:e.c.outlined(),dense:"","stack-label":"",label:e.c.t("Images"),placeholder:e.c.t("Paste image link or upload"),readonly:e.disableWhen()},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}}),a("div",{},[a("div",{},[a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"",bordered:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Upload"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.tempImg,callback:function(t){e.tempImg=t},expression:"tempImg"}})],1)])],1)],1),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-py-md"}):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                            "+e._s(s+1)+". "+e._s(t)+"\n                        ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("7f32")),i=a("9f7a"),r=a("d443"),d=a("716b"),u={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"page",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboLang:[],cboLayout:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1},componentKey:0,tempImg:""}},watch:{"selected.status":function(e){console.log(""),this.componentKey++}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboLang=e.loadCombo("lang"),e.cboStatus=e.loadCombo("cms-status"),e.cboLayout=e.loadCombo("page-layout")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("PAGE"),t.status="Draft",t.lang="en-us"==e.$i18n.locale?"en":e.$i18n.locale,t.title=e.c.t("Pages")+" "+e.c.t("New"),t.content="",t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t.date_start=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.content=e.content?e.content:"",a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a.date_start=e.date_start?t.c.formatDataDate(e.date_start):null,a.date_end=e.date_end?t.c.formatDataDate(e.date_end):null,a},disableWhen:function(){var e=this;return!e.c.canUpdate(e.collection,e.profile.roles)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.slug||e.errorInputs.push(e.c.t("Slug")+" "+e.c.t("Not Empty")),e.selected.summary||e.errorInputs.push(e.c.t("Summary")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Page Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("Page Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.api.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.api.web,"/images/").concat(a.filename);this.c.log(s),t.tempImg=t.c.addImages(s,t.selected.images),t.selected.images=t.tempImg,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},p=u,m=(a("f37d"),a("2877")),f=a("0378"),b=a("65c6"),v=a("0016"),h=a("2c91"),_=a("9c40"),g=a("27f9"),y=a("ddd8"),C=a("d66b"),w=a("7cbe"),x=a("52ee"),k=a("ca78"),q=a("4e73"),S=a("ee89"),D=a("24e8"),I=a("f09f"),Q=a("6b1d"),P=a("a370"),$=a("7f67"),A=a("eebe"),O=a.n(A),T=Object(m["a"])(p,s,o,!1,null,"68081a39",null);t["default"]=T.exports;O()(T,"components",{QForm:f["a"],QToolbar:b["a"],QIcon:v["a"],QSpace:h["a"],QBtn:_["a"],QInput:g["a"],QSelect:y["a"],QEditor:C["a"],QPopupProxy:w["a"],QDate:x["a"],QTime:k["a"],QMenu:q["a"],QUploader:S["a"],QDialog:D["a"],QCard:I["a"],QLinearProgress:Q["a"],QCardSection:P["a"]}),O()(T,"directives",{ClosePopup:$["a"]})},a1db:function(e,t,a){"use strict";a("f448")},a9b4:function(e,t,a){},ae72:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Role")))])]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-pa-sm q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Slug"),placeholder:e.c.t("Slug"),readonly:e.disableWhen()},on:{blur:e.slugCheck},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboType,label:e.c.t("Type"),readonly:e.disableWhen()},model:{value:e.selected.type,callback:function(t){e.$set(e.selected,"type",t)},expression:"selected.type"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Value"),placeholder:e.c.t("Value"),readonly:e.disableWhen()},model:{value:e.selected.value,callback:function(t){e.$set(e.selected,"value",t)},expression:"selected.value"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",autogrow:"",dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary")},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}})],1),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-px-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",autogrow:"",dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary")},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("div",{staticClass:"col-12 col-md-6 "})],1):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                            "+e._s(s+1)+". "+e._s(t)+"\n                        ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("3995")),i=a("9f7a"),r=a("d443"),d=a("716b"),u={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"role",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1}}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboType=e.loadCombo("module")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("RO"),t.title=e.c.t("Roles")+" "+e.c.t("New"),t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a},disableWhen:function(){var e=this,t=e.selected.status?e.selected.status.toLowerCase():"";return-1!=["close","closed","completed","finished","đóng","kết thúc","hoàn thành","xong"].indexOf(t)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.slug||e.errorInputs.push(e.c.t("Slug")+" "+e.c.t("Not Empty")),e.selected.value||e.errorInputs.push(e.c.t("Value")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Role Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("Role Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.db.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.db.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},p=u,m=(a("2fa4"),a("2877")),f=a("0378"),b=a("65c6"),v=a("0016"),h=a("2c91"),_=a("9c40"),g=a("eb85"),y=a("27f9"),C=a("ddd8"),w=a("068f"),x=a("ee89"),k=a("24e8"),q=a("f09f"),S=a("6b1d"),D=a("a370"),I=a("de5e"),Q=a("7f67"),P=a("eebe"),$=a.n(P),A=Object(m["a"])(p,s,o,!1,null,"34fca72a",null);t["default"]=A.exports;$()(A,"components",{QForm:f["a"],QToolbar:b["a"],QIcon:v["a"],QSpace:h["a"],QBtn:_["a"],QSeparator:g["a"],QInput:y["a"],QSelect:C["a"],QImg:w["a"],QUploader:x["a"],QDialog:k["a"],QCard:q["a"],QLinearProgress:S["a"],QCardSection:D["a"],QPageSticky:I["a"]}),$()(A,"directives",{ClosePopup:Q["a"]})},b097:function(e,t,a){},b495:function(e,t,a){},b73f1:function(e,t,a){},b7ae:function(e,t,a){},b7ca:function(e,t,a){},bfac:function(e,t,a){"use strict";a("b73f1")},c8f8:function(e,t,a){"use strict";a("648e")},c9a3:function(e,t,a){},cf05:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfYAAAC4CAYAAAARzs4UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFF9JREFUeNrs3W1sZFd9x/GzrpvNU3e8m5CwPMRDYLMUCjYhJFSFeDZVIlSptaUKIlW0nlTiBRLCQ1e86ItqZ4UQqlC6sxFV09LKYymqhCK0NmnfsKK5hoJoQ5NxUSVISDJOmhIQROMIpVpa6p7/zP+iWe88z30499zvR7oaB7z29bkPv/s/95x7D+3v7xtE6/Dpi0X7URzznzUuPXhvi9YDAEzjEME+UXCXNLhlWbTLnH49H9Gv2LGLhHxTl4b8tw3+gNYHABDskwf4nAZ3ST8XIwzvaUJfwj7QKp+wBwAQ7AOCvNS1LGRk1bc16AOCHgAI9ryHedF+rOiy5MmftWWXTQ36Jrs5ABDsXvvChWc+cPqfm3fYL8sZqsonJV33dQl6Qh4ACHZvPPTlp+dvPHL4z9578tgfnLzl166xlXoet/eWBnydXR8ACPZM+uuvPHv/iTdc/9k7fv2GW49cN3so/N9zGuyhPa3ia1TxAECwZ8LDWz946K633/CH7zl5dK7X/5/zYD9YxdcYdAcABLuT/v7i7t/evXDT6ptuumZ20PcR7FfY1oDfpCkAgGDPTKAT7EPt2qVCwAMAwZ6JQCfYx6rgq3TRAwDBnoi/+4fnKrefOHqm3z10gj3SgC8zyA4ACPZYyLS135gvfO2eO25+6zQ/h2Af21nTuQfPi2oAwGEzWVrZR//pxQvlD936/LShjomcsUvDXhCt0BQAQMU+FXlS3G+948bHJu12p2KPnEyRK1O9AwAV+0RV+h/d95avRxnqmNqyXZpU7wBAxT6yyl899e7Ve4rbcQU6FXtkNkxnehzVOwBQsfcN3ZVbb7ruX6nSM2HVdO69L9IUAECw9wr1mv248L//t3+YzZMZ83Z5ym67Ck0BAOmadWVFbChIdS5PO1tis2TWOa3c6ZoHgDxX7BoGDULdC9I1H+iFGgAgb8GuI6sD0+nOhR8WTGfUPPfdASBPwW5P/GX7ccEuBTaFdwpauTMlDgDyEOw6SG6dTeB9uF/QCzgAgK/Bbk/0dfuxRvPnxjrhDgCeBruG+ipNn8twZzocAPgU7IR67p3TfQAAkPVgJ9ShVqncASDjwU6oo0flXqYZACCDwU6oow8G1AFA1oJdT9yEOgaFO/PcASALwa6hzjx1DFPnCXUA4Hiw64m6RvNiBOET6ni2PAC4GOx6gg4Mj4nFmOFOMwCAmxU7oY5JLDDHHQAcC3Z9/vsCzYoJrTJSHgCmMxthqMvoZp7/jmnJSPnGpQfvbeThj9VbV4tdS9EuS3Y5a9ugyu4AIJVgtycnORnVaU5EREbKl2ywtTwL8VJXeIdBzm0rAE5W7HVOUIiQ3M6RajWTj57VWSFhgJf0c57NCiATwW5PYnICXqIpEbE1u28FtmrfdDzAu6vvomGMCYAsB7ue2M7QjIiJdMkXXeuSlwsOLmYBuGraUfF1mhAxKji6jxHqAPyr2PXVm953O9581a+Yu49dZ44XrjbHj1498HufbHYKy0dffpU9KzrLOpAuoCkAIKZg11HwVR8b5L5j15pTt91o7jxxzLzrbXOmcP2vjv0zHrHL7suvmf94fs9855lXzBMvtsxXX3mNvW1y7efJ+zZKHgBcqtjlQTTejIL/4+IxU3rH68yH7jo+UZD3Mv/6a9vL7/zm8fZ/S9B/9YkfmvXvvGT+7WeX2PPGbE7TGSFfpSkAIOJg17m4y1n/w6WLvXL7G83vf/DN7QCOPZns7/jY7761vXzpay+Y819vEvDjqcgjZ23V3qQpACDait2Lt7a98Ll7Uvvd9//2Le3li489az7zrV3zo5//gj1xuIJW7GWaAgD6G2tUvD7Hm3m6EZHq/Rtr72/f18dIVrXHCAAQRbAb7nFGTrroH1m703z49UdoDPZBAEgu2HV6G4/FjIEM2Hvk03cR7qNZomoHgCmDXd9ARaUUs7/8+O10y1O1A0AiFbu8kpWXvCRQuX/2I+9sj9gHVTsAxBnsVEgJefeJufY0PLBPAkAswa4j4bm3nqA/+fBJ897rD9MQw6v2RZoBAMav2Cs0U/LW7i7SCOybABBtsOt9TOatp0Aeb8u99qFW9b0FAIARK/YyTZQOGUh3/1tuoCGGYx8FgFGCXae4rdJE6fnE752gEQh2AIisYueEmTJ5Kh3z2oc3k70IXaEZAKBj0EtgGJjkgPe9eY53uQ8nwb5JM8AlOmtjTv+zcenBe1sOrqOs36DZJS273g225mVtVhryLc2030I5O2CHZIqbA+44ccyYnf+iIQaTQXQVF0+ciDV0JjF1UOn5sajrFoa3fBaG/Lvwyx05+UvY2yWw6xPE3I5FXd+SfhZHWd8e672n69zSz4ZesDQ92++6t+3I27dPm+3qtg6XIImLvEP7+/u9VkpezbqWZuN+7v23tOdz592/P9My73v4Cc7ywz1gD5b6BAdx1X6c8bxttm3blEZsjyCB9ZETW2WEdZF1fjyG3/+eccJdg1zWRXqGlmJqky27bE6yDw9Y35IGUtxF2q4Glqx/5nrONMjD7ZtUUbujbRbE0Wb9uuK5Z+kIeRLdpD558iazfOcbYl/HP//Hp124XSD7bJ09pneVOsb3LuWgParDznF6spfvKZtkpvwuy6JFVXsZtarTno0VXUom+cd/SxDKQGvpOZOqXoKq6nIlr21WTnD7HrSgy1pXm9Wj6r2Z7XO1Rze8Q2QA3STBefzo1eYDi6+Lff0evvicC80kJ8U5uuN7V8g0wRX7SrFX8GgvQUWDNg0SytKDVJGnfvar5lK48Bhn/cOQ33At4LXdqsatGV/dbbarbTZVkdKrYi9z3LulcNUsjUDVnlTFnhcV0zVAWB+dXXWoqJGT/QW7XtJFLwHfcjjM+wnD6qxd/6oDFXrFuH/bTfa/db1FOHHA95ruVuKYd8vxwtU0wmjYd6nYR1UOA90uUlGuGzd7KqXnoKFjH563yzmTvaeBnrHr39BwTSPUV/QYyNJYmjDgg0merjnTo5uCR8i6FuxHCfYxKnZgpIrYnu9aDgf6wZN81sc+SK4ESYe7jlm4YLJ7e3lJL+zK01TsVDzI+smaN74dEPd0qizvLzSBn+Euv0N6CUzKs7si3E/X9SKFYPfF2990hEYYHfsw4Ha41+MOddOZSuZb77OMoB+p7WY5KV5u72f/Y7753Z+Y7/3nq+bJ5uVjjm67+fp2t/hHTt3SfklLUo5cw+C5MYO9RjP80jZNAMfIrISVOOZvexzqIRmMKL1w5ZGCXe+v53aa2+7Lr5kvfOUZ86Xnf2p+9PNf9P6ml19tf3zmW7umcvsbeYAOFTuAycjFdxwPs/E51LvDvTXoIU/dXfG5vDcpgf7pv9kxt33+m+ah7/+4f6h3ke/502+/0P53cA732a880QGumR93QNgI1XrN5Gfw99qgl1/N5LnS+eJjz5oPnv92O9AnIf/uLx79fuzr+a63zXEaGA/BDrivGmGoS36t5az96v2mwuW2Yv/o5//FfCJ4bqQKfZDaky+1q/5YS9AE7+cT7N5hDju8rtr1vno9h+1X6Pd35zbYH9X75dOSC4Mvf+NFDlGC3VU8dQ4ui+LZE3KvOa/jw5Z6dcnP6BVP0TCnc2KPP/0TGsGxnZ0moGJHJpQiqNYrOW/DWr+Kvcj+NTl5QYtMk4M7JnkMo494KQ4cN+1g1wpF6ZW3NGaiuGqCMd/9AedPxxDsnXc+Az5X7WWa78p2CIOdYddTeumn/00juIX77Nxfh8cX4XpvmVeMdyx191LOcBKMKNhfIdgdw8WqMU2aAB5fhPPSpz7tQcWeEfcdu5ZGoGIn2EHFTrD3Uw6/CB8py6taHVe4iufFU7ET7IjEdtcx4sK5f+zudB1wl8agORm3EujS61ZXSS840mjXhYPBDlAFEOzoHYLhibzRa5aB3usNF9dGaG91rXvQJyTnutZ/OY2VlHUYcwZHKYX9oDrCK5Dl/6/qhUc16faUJ/DJOs4yLQieGqkKsAdB1Yz5aEt7zOwnsP5ndd2QrD3TeTnJ5qhvH9Pv29SAlG2W9qNNpaqs6d/QGmH95XvqpvOI0kX9OumKc9GM916DJG+1bQx7m1qPNpXnR6zoo243E7zgk98XzFLZAEA70CUMa5PO/dd/V7Enczmpr6fUuzBKVTkskBb1vd+rDm+vpHJre9xQP9CegYb7U0m2ywzHM4CcOy8nROkhieKBPvZn1PVnJumU/b2laUL9AHnwy67D2yypp0tWI9gf5GJpg2AHIqBXysAwmzE8oa+qvQCJiDDQu3sfygluAxeP1Z0I27Wa0DovhsHO6GEAiD4Y6xn/GwIXq/YEL9iDCNuymVBbFsJgZ74vAMTQE8DfkGkNx39evwufIl3xABBfxZt1zRxvwqj/9qTetEiwAwBSDyNEiGAHAMCjiySCHQCQtjwM4k7qbYtzBDsAIG0M4o6wLeXJc9xDAQDgco8fPn0xkysuFXuL7QcAgB/oioe3PJluBAAEOwAAeQ72Js0AAIAnwa7PsAV8s0sTAMhrxQ74iAtWALkO9h2aAp5htgeAXAc7J0H4huczAMh1sHMSBBU7AFCxA1TsAOBisAc0BTzTpAkA5DnYOQnCK0zjBJDrYNeT4B7NAU9s0wQA8l6xC+5JwhfsywAIdk6GINgBwK9gD2gOEOwAkG2znAzhmb1LD97LvgxgWqey+urnX1bsOoCOF2cg6wKaAECezXBSBMEOAAQ7QLADAMEOxIr76wCiMudFsOt9dl7hiqza5KQCeK+Z0O9Z9KVip2pHlvm07y6yOYErJfi4aK+Cvc6uAyr2gZLo1SLYgf6SmMFV8ibY9R4l096QNVt2303q9cNJ/J7C4dMXCXegt2ZCx2DZl4o9ycoHyFq1nqQqmxXoKeAYHD/Y6+w3INhTrdjFclYrBiBmSc1+mbfHoNN5aNevZJeKfIb/22yvb5TuePtN0h0/z/6DDNhIsBs+PKksJ/S71qVL3v59FTYzkHjFLlbtMSizVCoJDtzrFeBya65oOuNvwq8Xur7lbNguswN+Ts0u59h/QLV+haQP7jV7UK/oMVlP+CIGcI4cA/aY2DkQbHGSC3npQdvSC3sJ0EZUx6JeOIRjauRzToM7XMYqsgcFe51gRwbs2oPL92A3emDL8XjOngS2wxOLnlya7AbIoTQyalmXMxrI8rE94c+SAC/EsZKzQ66INqQbgv0Hjh/cSVcLgR7QaVnSJbza3wtD3nTu/0vot3gKHzy36UjxueRaw8y4dtIEXA925dITGgt6clnTSuJxuzxlA3/fLk2mzcFHPCl1wmDXd9HScHDVRord0EFG2ki68Hk8LXxVownGr9hpOHBQZzvYAZ9Jd/wezTBmsNuKqG54Eh3cs53mPeQUBuwBuPI4bFF8TlaxiypNBce4sE9usRmA1NWo2icLdro74Fq1HjiwHlTtgBtVOw9wGjfYteGo2kG1fvlxUeeCF3DmWNymJcar2KXhpLuDe+2gWr9cnU0COGGFC+0xg92lSglU6w5h4A7gRtXe0nAn2MdsOKlOmNeOtGw4Vq2HD8k4y6YBnDge5fzwAME+PgYpIA17xtEeI3syqXLBCzhzPNbzHu4zEzSaXBExzQdJqzn+shPu7wGEe2Yr9rBq5ySGpMigTafvZetFR8kwwBRwKdxP5TGrZiZsMDmJVdl1kJByFt5Brk/CkxeuMO0GcOOYDPJ4TM5M0WBSQXFfEXHbcm3A3JDjQl6XKpX7pwy9WoALx2Qzb8fkzJT/vsxugxjtZXUf0wvfol022IyAU8fkWd8DfmbKhmoYpvogPpnogh9SvcuFidzno3secOOYrHYFvE9jYprhF7MRNFT18OmLJfvlErsNInTelzeo6a2Ekj1O5F6fBL2MoJ9nEwPpBbzpjBOT/FrRY1KWQkb+hG0NcimuGwdvV85G9EvK+gsK7DKIwI7xcHCm9nDJjJKKPZlIxbCoS1EXwwUykPhxKQVEu4jQIjVcXDgWd7oDXL4e5XXVsxE1TNM2iIT7BXYTRHGhmOUu+FGPGT1g+/ZK2GNqToN/Wo0x1uuQQ80k630qod8Tl1MZ31WT2gYtR45LqXyDrmMwvPCWz+7jcXHCQnavx/7W6Pr7w6+b0zy349D+/n5kjWIbQQYnrJFLmMIDOv8UAJB2sGu4yxXHAk2LCWzoYDMAwIRmYviZJcP8XYxvh1AHAAeDXe+NEu4Yx57uMwAAByv27tG/wEih7vtgOQDIdLBruNcN78XFcOVRpm8AAFIO9q5w55Ga6OcBXx5CAwC5CHYN9zLhjj6hXqcZACBjwU64o4dPEeoAEI/I57EPcvj0RTmZr9LsucZcdQDIesVO5Y6uSp1QBwBfKnYq91zjnjoA+FaxH6jcz9P8hDoAwIOKvatyl4BfZzN4Sx4+U2ZKGwDkJNg13OXl9lLN8S53/0K9xMNnACBnwa7hLu+2lapunk3ihR3DY2IBIBUzLqyEVnUS7ttskszbINQBIOcV+4HqvWY/1tg0mSTT2Wo0AwAQ7AfDnfvu2bJrlxXupwNA+mZcXCkdRU3XfDZI1/sioQ4AVOyjVu/yXvcq1btzmMoGAAT7xOFeNJ2u+SU2mRO2NNQZIAcABDvVe4bJvfQKVToAEOxRhvuc/ZCR1zxrPllnpd2p0gGAYI8r4EtavdM9H68trdKbNAUAEOxJBHxZA56n1kVLZiRUbaAHNAUAEOwEfHbJffQygQ4ABDsBT4UOACDYYw14WbgHP5jcQ68R6ABAsGcl4OUJdjJNTh5TyzS5Dnm4TF0DvUlzAADBnsWAn9Nwl5BfyHF1vmnDvM6uDwAEu08hX9SQL+cg5He0Oq8zBx0ACPY8hbwsvtyPb1fmdgnoagcAgj3PIS/d9aWuJSvVvIxoDzTIA7YkABDs6B/0ixryi7qkPY1OutabGuQNghwAQLBPH/gS9MUeS1ShL+Hd0gCXRd513iLEAQAEezrBHwb9OBoMbgMATOv/BRgAC3b3ax4HRj4AAAAASUVORK5CYII="},d010:function(e,t,a){"use strict";a("dfa9")},d0ad:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("Posts")))])]),a("q-space"),a("Dot",{key:e.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.selected.status}}),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Slug"),placeholder:e.c.t("Type with space"),readonly:e.disableWhen()},on:{blur:e.slugCheck},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboStatus,label:e.c.t("Status")},model:{value:e.selected.status,callback:function(t){e.$set(e.selected,"status",t)},expression:"selected.status"}}),a("div",{staticClass:"col-12 col-md-12"},[a("div",[e._v(e._s(e.c.t("Content")))]),a("q-editor",{attrs:{height:"25rem",toolbar:e.c.editorToolbar(),readonly:e.disableWhen()},model:{value:e.selected.content,callback:function(t){e.$set(e.selected,"content",t)},expression:"selected.content"}})],1),a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",rows:5,dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary"),readonly:e.disableWhen()},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("div",{staticClass:"col-12 col-md-6 q-gutter-y-sm"},[a("q-field",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Category"),clearable:""},scopedSlots:e._u([e.selected.category?{key:"control",fn:function(){return[e._v("\n                        "+e._s(e.selected.category)+"\n                    ")]},proxy:!0}:null,{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"list_alt",clickable:e.disableWhen()}},[a("q-menu",[a("PopupCategory",{attrs:{propSelection:"multiple"},on:{reloadMany:e.fillCategory}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected.category,callback:function(t){e.$set(e.selected,"category",t)},expression:"selected.category"}}),a("q-select",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboLang,label:e.c.t("Language"),readonly:e.disableWhen()},model:{value:e.selected.lang,callback:function(t){e.$set(e.selected,"lang",t)},expression:"selected.lang"}}),a("q-input",{attrs:{dense:"","stack-label":"",label:e.c.t("Date Published"),outlined:e.c.outlined(),readonly:e.disableWhen()},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm","today-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.selected.date_start,callback:function(t){e.$set(e.selected,"date_start",t)},expression:"selected.date_start"}}),a("q-select",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboYesNo,label:e.c.t("Featured"),readonly:e.disableWhen()},model:{value:e.selected.featured,callback:function(t){e.$set(e.selected,"featured",t)},expression:"selected.featured"}})],1),a("div",{staticClass:"col-12 col-md-6 q-gutter-y-sm"},[a("q-input",{attrs:{outlined:e.c.outlined(),dense:"","stack-label":"",label:e.c.t("Images"),placeholder:e.c.t("Paste image link or upload"),readonly:e.disableWhen()},model:{value:e.selected.images,callback:function(t){e.$set(e.selected,"images",t)},expression:"selected.images"}}),a("div",{},[a("div",{},[a("q-uploader",{staticClass:"full-width",attrs:{readonly:e.disableWhen(),flat:"",bordered:"","text-color":"grey-7",color:"grey-2",factory:e.upload,label:e.c.t("Upload"),accept:".jpg,.jpeg,.png,.gif,.svg,.pdf,image/*","max-file-size":"2097152","field-name":"uploadfile","form-fields":[{name:"module",value:e.collection}]},on:{uploaded:e.handleUploaded,failed:e.handleFailed},model:{value:e.tempImg,callback:function(t){e.tempImg=t},expression:"tempImg"}})],1)])],1)],1),e.showMore?a("div",{staticClass:"row q-gutter-y-sm"}):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                            "+e._s(s+1)+". "+e._s(t)+"\n                        ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("2e3b")),i=a("9f7a"),r=a("d443"),d=a("716b"),u=a("3ef8"),p={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"],PopupCategory:u["a"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"post",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboLang:[],cboYesNo:[],cboLayout:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1},componentKey:0,tempImg:""}},watch:{"selected.status":function(e){console.log(""),this.componentKey++}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboLang=e.loadCombo("lang"),e.cboStatus=e.loadCombo("cms-status"),e.cboYesNo=e.loadCombo("yes-no")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("POST"),t.status="Draft",t.lang="en-us"==e.$i18n.locale?"en":e.$i18n.locale,t.title=e.c.t("Posts")+" "+e.c.t("New"),t.content="",t.category="",t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t.date_start=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.content=e.content?e.content:"",a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a.date_start=e.date_start?t.c.formatDataDate(e.date_start):null,a.date_end=e.date_end?t.c.formatDataDate(e.date_end):null,a},disableWhen:function(){var e=this;return!e.c.canUpdate(e.collection,e.profile.roles)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.slug||e.errorInputs.push(e.c.t("Slug")+" "+e.c.t("Not Empty")),e.selected.summary||e.errorInputs.push(e.c.t("Summary")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("Blog Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){console.log(""),e.c.toast(e.c.t("Blog Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.api.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.api.web,"/images/").concat(a.filename);this.c.log(s),t.tempImg=t.c.addImages(s,t.selected.images),t.selected.images=t.tempImg,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},fillCategory:function(e){var t=this;console.log(""),t.selected.category=e},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},m=p,f=(a("85d4"),a("2877")),b=a("0378"),v=a("65c6"),h=a("0016"),_=a("2c91"),g=a("9c40"),y=a("eb85"),C=a("27f9"),w=a("ddd8"),x=a("d66b"),k=a("8572"),q=a("58a8"),S=a("4e73"),D=a("7cbe"),I=a("52ee"),Q=a("ca78"),P=a("ee89"),$=a("24e8"),A=a("f09f"),O=a("6b1d"),T=a("a370"),j=a("7f67"),U=a("eebe"),E=a.n(U),M=Object(f["a"])(m,s,o,!1,null,"2ff6e806",null);t["default"]=M.exports;E()(M,"components",{QForm:b["a"],QToolbar:v["a"],QIcon:h["a"],QSpace:_["a"],QBtn:g["a"],QSeparator:y["a"],QInput:C["a"],QSelect:w["a"],QEditor:x["a"],QField:k["a"],QBadge:q["a"],QMenu:S["a"],QPopupProxy:D["a"],QDate:I["a"],QTime:Q["a"],QUploader:P["a"],QDialog:$["a"],QCard:A["a"],QLinearProgress:O["a"],QCardSection:T["a"]}),E()(M,"directives",{ClosePopup:j["a"]})},d443:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-file",{attrs:{outlined:e.c.outlined(),"use-chips":"",outlined:"",label:e.c.t(e.propText)+" "+e.c.t("Max 2Mb"),multiple:e.propMultiple,"max-file-size":2097152,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.json,.zip,.rar, .webp, image/*"},on:{rejected:e.onRejected},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:e.$q.platform.is.mobile?"camera":"attach_file"}})]},proxy:!0},e.selected?{key:"append",fn:function(){return[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"cursor-pointer",attrs:{flat:"",round:"",icon:"cloud_upload"},on:{click:function(t){return e.upload()}}})]},proxy:!0}:null],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),{name:"Upload",props:{propCollection:String,propId:String,propText:String,propMultiple:Boolean},data:function(){return{c:this.$common,selected:null,objects:[]}},computed:{},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.initDB();case 2:case"end":return t.stop()}}),t)})))()},initDB:function(){var e=this;e.db=e.$appDB?new e.$appDB(e.propCollection):new e.$local(e.propCollection),e.db.init()},onRejected:function(e){var t=this,a=e.length+" > "+t.c.t("Max 2Mb");t.c.toast(a)},upload:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a,s,o,l,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,s=a.propCollection,o=a.propId,l=a.selected,t.next=6,a.db.upload(s,o,l);case 6:n=t.sent,a.c.toast("File Uploaded","positive"),a.c.log(n),a.emitParent("reloadUpload",n);case 10:case"end":return t.stop()}}),t)})))()},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}}),i=c,r=a("2877"),d=a("7d53"),u=a("0016"),p=a("9c40"),m=a("7f67"),f=a("eebe"),b=a.n(f),v=Object(r["a"])(i,s,o,!1,null,null,null);t["a"]=v.exports;b()(v,"components",{QFile:d["a"],QIcon:u["a"],QBtn:p["a"]}),b()(v,"directives",{ClosePopup:m["a"]})},d937:function(e,t,a){},dfa9:function(e,t,a){},e19d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{staticStyle:{"min-width":"160px"},attrs:{separator:""}},e._l(e.objects,(function(t,s){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:s,attrs:{clickable:""},on:{click:function(a){return e.getRange(t.value)}}},[a("q-item-section",[e._v(e._s(e.c.t(t.text)))])],1)})),1)},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),a("bd4c")),i={name:"TimeRange",data:function(){return{c:this.$common,objects:[],range:{value:"today",year:"",month:"",week:"",from:null,to:null}}},computed:{},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.objects=[{value:"",text:"All time"},{value:"today",text:"Today"},{value:"yesterday",text:"Yesterday"},{value:"this_month",text:"This month"},{value:"last_month",text:"Last month"},{value:"next_month",text:"Next month"},{value:"this_year",text:"This year"},{value:"last_year",text:"Last year"},{value:"next_year",text:"Next year"}];case 2:case"end":return t.stop()}}),t)})))()},emitParent:function(e,t){this.$emit(e,t)},getRange:function(e){var t=this;t.range.value=e;var a,s,o,l=new Date;if(""==e){var n=l.getFullYear();t.range.year=n,s=c["b"].subtractFromDate(l,{year:10}),o=c["b"].addToDate(l,{year:10}),t.range.from=c["b"].startOfDate(s,"year"),t.range.to=c["b"].endOfDate(o,"year")}if("today"==e){var i=l.getFullYear();t.range.year=i,a=l,t.range.from=c["b"].startOfDate(a,"day"),t.range.to=c["b"].endOfDate(a,"day")}if("yesterday"==e){var r=l.getFullYear();t.range.year=r,a=c["b"].subtractFromDate(l,{days:1}),t.range.from=c["b"].startOfDate(a,"day"),t.range.to=c["b"].endOfDate(a,"day")}if("this_year"==e){var d=l.getFullYear();t.range.year=d,a=c["b"].buildDate({year:d}),t.range.from=c["b"].startOfDate(a,"year"),t.range.to=c["b"].endOfDate(a,"year")}if("last_year"==e){var u=l.getFullYear()-1;t.range.year=u,a=c["b"].buildDate({year:u}),t.range.from=c["b"].startOfDate(a,"year"),t.range.to=c["b"].endOfDate(a,"year")}if("next_year"==e){var p=l.getFullYear()+1;t.range.year=p,a=c["b"].buildDate({year:p}),t.range.from=c["b"].startOfDate(a,"year"),t.range.to=c["b"].endOfDate(a,"year")}if("this_month"==e){var m=l.getFullYear(),f=l.getMonth()+1;t.range.year=m,t.range.month=f,a=c["b"].buildDate({month:f}),t.range.from=c["b"].startOfDate(a,"month"),t.range.to=c["b"].endOfDate(a,"month")}if("last_month"==e){var b=l.getFullYear(),v=l.getMonth();t.range.year=b,t.range.month=v,a=c["b"].buildDate({month:v}),t.range.from=c["b"].startOfDate(a,"month"),t.range.to=c["b"].endOfDate(a,"month")}if("next_month"==e){var h=l.getFullYear(),_=l.getMonth()+2;t.range.year=h,t.range.month=_,a=c["b"].buildDate({month:_}),t.range.from=c["b"].startOfDate(a,"month"),t.range.to=c["b"].endOfDate(a,"month")}var g=t.range;t.emitParent("reloadTimeRange",g)}}},r=i,d=a("2877"),u=a("1c1c"),p=a("66e5"),m=a("4074"),f=a("714f"),b=a("eebe"),v=a.n(b),h=Object(d["a"])(r,s,o,!1,null,null,null);t["default"]=h.exports;v()(h,"components",{QList:u["a"],QItem:p["a"],QItemSection:m["a"]}),v()(h,"directives",{Ripple:f["a"]})},e70f:function(e,t,a){"use strict";a("163d")},e79e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-form",{on:{submit:function(t){return e.onSubmit()},reset:function(t){return e.onReset()}}},[a("div",{staticClass:"bg-white"},[a("q-toolbar",[a("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md",clickable:""},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",[a("div",{staticClass:"text-caption"},[e._v(e._s(e.selected._id?e.c.t("Edit"):e.c.t("New")))]),a("div",{staticClass:"text-h6 bold-font"},[e._v(e._s(e.selected._id?e.selected.title:e.c.t("List")))])]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{attrs:{push:"","no-caps":"",color:"primary",type:"submit",icon:"save",label:e.c.t("Save")}}):e._e()],1)],1),a("div",{staticClass:"app-padding"},[a("div",{staticClass:"bg-white"},[a("div",{staticClass:"row q-pa-sm q-col-gutter-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Title"),placeholder:e.c.t("SO Title"),readonly:e.disableWhen()},model:{value:e.selected.title,callback:function(t){e.$set(e.selected,"title",t)},expression:"selected.title"}}),a("q-input",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",readonly:e.disableWhen(),outlined:e.c.outlined(),label:e.c.t("List Code"),placeholder:e.c.t("List Code")},on:{blur:e.slugCheck},model:{value:e.selected.slug,callback:function(t){e.$set(e.selected,"slug",t)},expression:"selected.slug"}}),a("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),options:e.cboType,label:e.c.t("Type")},model:{value:e.selected.type,callback:function(t){e.$set(e.selected,"type",t)},expression:"selected.type"}}),a("q-input",{staticClass:"col-12 col-md-12",attrs:{type:"textarea",autogrow:"",dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Value"),placeholder:e.c.t("Value"),readonly:e.disableWhen()},model:{value:e.selected.value,callback:function(t){e.$set(e.selected,"value",t)},expression:"selected.value"}})],1),e.showMore?a("div",{staticClass:"row q-col-gutter-sm q-px-sm"},[a("q-input",{staticClass:"col-12 col-md-12",attrs:{outlined:e.c.outlined(),type:"textarea",autogrow:"",dense:"","stack-label":"",label:e.c.t("Summary"),placeholder:e.c.t("Summary")},model:{value:e.selected.summary,callback:function(t){e.$set(e.selected,"summary",t)},expression:"selected.summary"}}),a("div",{staticClass:"col-12 col-md-6 "})],1):e._e(),a("q-dialog",{attrs:{position:"bottom"},model:{value:e.showErrorInputs,callback:function(t){e.showErrorInputs=t},expression:"showErrorInputs"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-linear-progress",{attrs:{value:1,color:"negative"}}),a("q-card-section",{staticClass:"row items-center no-wrap"},[a("div",e._l(e.errorInputs,(function(t,s){return a("div",{key:s,staticClass:"text-weight-bold"},[e._v("\n                                "+e._s(s+1)+". "+e._s(t)+"\n                            ")])})),0),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",icon:"close"},on:{click:function(t){e.errorInputs=[]}}})],1)],1)],1)],1)])])},o=[],l=a("ded3"),n=a.n(l),c=(a("c740"),a("7db0"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("498a"),a("d3b7"),a("e6cf"),a("99af"),a("67f9")),i=a("9f7a"),r=a("d443"),d=a("716b"),u={name:"UpsertSelected",components:{Info:c["default"],Dot:i["default"],Upload:r["a"],Money:d["Money"]},props:{propSelected:Object},data:function(){return{loading:!1,c:this.$common,api:null,id:null,collection:"list",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,cboStatus:[],cboType:[],cboGroup:[],money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1}}},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items}},mounted:function(){},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=n()({},e.propSelected),e.selected._id?e.selected=e.loadUpdate(e.selected):e.selected=e.loadNew(),console.log(""),e.cboType=e.loadCombo("module")},methods:{loadCombo:function(e){var t=this;if(t.list.findIndex((function(t){return t.slug===e}))<0)return[];var a=t.list.find((function(t){return t.slug===e})).value;if(a.includes(",")){var s=a.split(",").map((function(e){return e.trim()}));return console.log(""),s}return a},loadNew:function(){var e=this,t={};return t.slug=e.c.genCode("LIST"),t.title=e.c.t("List")+" "+e.c.t("New"),t.owner=e.profile.username,t.date_created=e.c.formatDataDate(new Date),t.date_updated=e.c.formatDataDate(new Date),t},loadUpdate:function(e){var t=this,a=e;return a.owner=e.owner?e.owner:t.profile.username,a.date_created=e.date_created?e.date_created:t.c.formatDataDate(new Date),a.date_updated=t.c.formatDataDate(new Date),a},disableWhen:function(){var e=this,t=e.selected.status?e.selected.status.toLowerCase():"";return-1!=["close","closed","completed","finished","active","used","đang sử dụng","đóng","kết thúc","hoàn thành","xong"].indexOf(t)},valid:function(){var e=this;return e.selected.title||e.errorInputs.push(e.c.t("Title")+" "+e.c.t("Not Empty")),e.selected.slug||e.errorInputs.push(e.c.t("Code")+" "+e.c.t("Not Empty")),e.selected.value||e.errorInputs.push(e.c.t("Value")+" "+e.c.t("Not Empty")),!(e.errorInputs.length>0)},onSubmit:function(){var e=this;e.valid()?(e.loadUpdate(e.selected),e.upsert()):e.showErrorInputs=!0},upsert:function(){var e=this,t=confirm(e.c.t("Are you sure")+"?");if(t){var a=e.selected._id;a?(delete e.selected._id,e.api.update(e.collection,a,e.selected).then((function(t){e.c.toast(e.c.t("List Item Updated"),"positive"),e.emitParent("reloadUpsert",a)})).catch((function(e){}))):e.api.create(e.collection,e.selected).then((function(t){e.c.toast(e.c.t("List Item Created"),"positive"),e.emitParent("reloadUpsert",0)})).catch((function(e){}))}},upload:function(e){var t=this,a=t.db.web+"/v1/admin/uploadfiles";return new Promise((function(e,t){e({url:a,method:"POST"})}))},handleUploaded:function(e){var t=this;this.c.log(e.xhr.response);var a=JSON.parse(e.xhr.response),s="".concat(t.db.web,"/images/").concat(a.filename);this.c.log(s),t.selected.images=s,t.c.toast(t.c.t("Upload finished"),"positive")},handleFailed:function(e){this.c.log(e.xhr.response);JSON.parse(e.xhr.response);vm.c.toast(vm.c.t("Upload error"),"negative")},slugCheck:function(e,t){var a=this,s=e.target.value;a.selected.slug=a.c.genSlug(s)},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}},p=u,m=(a("bfac"),a("2877")),f=a("0378"),b=a("65c6"),v=a("0016"),h=a("2c91"),_=a("9c40"),g=a("eb85"),y=a("27f9"),C=a("ddd8"),w=a("068f"),x=a("ee89"),k=a("24e8"),q=a("f09f"),S=a("6b1d"),D=a("a370"),I=a("de5e"),Q=a("7f67"),P=a("eebe"),$=a.n(P),A=Object(m["a"])(p,s,o,!1,null,"cfac4320",null);t["default"]=A.exports;$()(A,"components",{QForm:f["a"],QToolbar:b["a"],QIcon:v["a"],QSpace:h["a"],QBtn:_["a"],QSeparator:g["a"],QInput:y["a"],QSelect:C["a"],QImg:w["a"],QUploader:x["a"],QDialog:k["a"],QCard:q["a"],QLinearProgress:S["a"],QCardSection:D["a"],QPageSticky:I["a"]}),$()(A,"directives",{ClosePopup:Q["a"]})},ebd9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{clas:"q-mb-lg"}},[a("q-toolbar",{staticClass:"no-padding q-my-md"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.showMore?"expand_less":"expand_more",size:"md"},on:{click:function(t){e.showMore=!e.showMore}}}),a("div",{staticClass:"bold-font text-h6 text-bold ellipsis-2-lines"},[e._v(e._s(e.selected.title))]),a("q-space"),e.c.canUpdate(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"content_copy"},on:{click:function(t){return e.copy(e.selected)}}}):e._e(),e.c.canDelete(e.collection,e.profile.roles)?a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",round:"",icon:"delete"},on:{click:function(t){return e.remove(e.selected._id)}}}):e._e(),e.c.canPrint(e.collection,e.profile.roles)?a("q-btn",{staticClass:"orientation-landscape",attrs:{flat:"",round:"",icon:"print"},on:{click:function(t){return e.print("info")}}}):e._e()],1),a("div",{ref:"info",attrs:{id:"info"}},[0==e.showMore?a("div",[a("table",[a("tbody",[a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Title")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.title))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("SKU")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.sku))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Status")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.status))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Category")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.category))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Price")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatCurrency(e.selected.price)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("COG")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatCurrency(e.selected.cog)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Instock")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.instock))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Warranty")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.warranty?e.selected.warranty:0)+" "+e._s(e.c.t("Month"))+"\n                        ")])]),a("tr",[a("td",{staticClass:"text-capitalize ",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Images")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.images))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Summary")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.summary))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Date created")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.c.formatDate(e.selected.date_created)))])]),a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t("Owner")))]),a("td",{staticClass:"bold-font"},[e._v(e._s(e.selected.owner))])])])])]):e._e(),1==e.showMore?a("div",[a("table",[a("tbody",e._l(e.selected,(function(t,s){return a("tr",[a("td",{staticClass:"text-capitalize",staticStyle:{width:"40%"}},[e._v(e._s(e.c.t(s)))]),a("td",{class:-1!=e.visibleFields.indexOf(s)?" bold-font ":""},[-1!=["date_created","date_updated","date_start","date_end"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatDataDate(t)))]):-1!=["price","retail_price","total","profit","cog"].indexOf(s)?a("div",[e._v("\n                                "+e._s(e.c.formatCurrency(t)))]):a("div",[e._v("\n                                "+e._s(t)+"\n                            ")])])])})),0)])]):e._e()]),a("div",{ref:"print_so",staticClass:"print-only"})],1)},o=[],l=a("c973"),n=a.n(l),c=a("ded3"),i=a.n(c),r=a("9523"),d=a.n(r),u=(a("96cf"),a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),{name:"ViewInfo",props:{propSelected:Object},data:function(){return d()({loading:!1,c:this.$common,api:null,collection:"product",selected:null,fields:[],visibleFields:[],showMore:!1,items:[]},"visibleFields",["recent","title","sku","price","retail_price","category","cog","instock","warranty","summary"])},computed:{profile:function(){return this.$store.state.user.profile}},mounted:function(){var e=this;e.selected=i()({},e.propSelected)},created:function(){var e=this;e.api=new e.$api(e.collection),e.api.setDomain(e.profile.domain),e.selected=i()({},e.propSelected)},methods:{getItems:function(e){var t=this;t.api.findByProp("so_item","parent_id",e).then((function(e){console.log(""),t.items=e.data.objects}))},copy:function(e){var t=this,a=confirm(t.c.t("Are you sure")+"?");a&&(e._id&&delete e._id,e.name&&(e.name+=" Copy"),e.title+=" Copy",e.slug=t.c.genCode("PRODUCT"),t.loading=!0,t.api.create(t.collection,e).then((function(e){e.data;t.emitParent("reloadRemove",null),t.c.toast(t.c.t("Copied"),"positive"),t.loading=!1})))},remove:function(e){var t=this;return n()(regeneratorRuntime.mark((function a(){var s,o,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t,o=confirm(s.c.t("Are you sure")+"?"),o){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.delete("product",e);case 6:return l=a.sent,n=[l],a.next=10,Promise.all(n);case 10:s.emitParent("reloadRemove",null),s.c.toast(s.c.t("Post deleted"));case 12:case"end":return a.stop()}}),a)})))()},print:function(e){var t=this.$refs[e];t&&this.c.print(t)},emitParent:function(e,t){var a=this;a.$emit(e,t)}}}),p=u,m=a("2877"),f=a("65c6"),b=a("0016"),v=a("2c91"),h=a("9c40"),_=a("eebe"),g=a.n(_),y=Object(m["a"])(p,s,o,!1,null,null,null);t["default"]=y.exports;g()(y,"components",{QToolbar:f["a"],QIcon:b["a"],QSpace:v["a"],QBtn:h["a"]})},f000:function(e,t,a){},f18f:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",[a("q-banner",{class:"bg-"+e.propColor+" text-white text-center q-pa-md",staticStyle:{"min-height":"10vh"},scopedSlots:e._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{size:"7vh",name:e.propIcon,color:"grey-3"}})]},proxy:!0}])},[a("div",{staticClass:"text-h5 text-bold"},[e._v(e._s(e.overK(e.propNumber))+"\n            "),a("q-tooltip",[e._v("\n                "+e._s(e.propNumber)+"\n            ")])],1),a("div",{staticClass:"text-caption"},[e._v(e._s(e.propText))])])],1)},o=[],l=a("c973"),n=a.n(l),c=(a("96cf"),a("a9e3"),{name:"Number",props:{propNumber:Number,propText:String,propColor:String,propIcon:String},data:function(){return{c:this.$common,selected:null}},computed:{},created:function(){this.init()},methods:{init:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},overK:function(e){var t=0;return e>=1e6?(e/=1e6,t=Math.round(10*e)/10,t+"M"):e>=1e3?(e/=1e3,t=Math.round(10*e)/10,t+"K"):e},emitParent:function(e,t){var a=this;a.$emit(e,t),a.$forceUpdate()}}}),i=c,r=a("2877"),d=a("f09f"),u=a("54e1"),p=a("0016"),m=a("05c0"),f=a("eebe"),b=a.n(f),v=Object(r["a"])(i,s,o,!1,null,null,null);t["a"]=v.exports;b()(v,"components",{QCard:d["a"],QBanner:u["a"],QIcon:p["a"],QTooltip:m["a"]})},f37d:function(e,t,a){"use strict";a("409f")},f448:function(e,t,a){},fb31:function(e,t,a){"use strict";a("21c8")},fb62:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-my-md"},[e.propHome?e._e():a("q-list",{attrs:{bordered:""}},e._l(e.objects,(function(t,s){return t.children.length>0?a("q-expansion-item",{key:"parent"+s,staticClass:"text-capitalize text-grey-4",attrs:{group:"menuGroup","header-class":"bold-font text-white","switch-toggle-side":"","expand-icon":t.icon,label:e.c.t(t.title)}},e._l(t.children,(function(t,s){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"child"+s,attrs:{clickable:""},on:{click:function(a){return e.c.goto(t.url)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.icon,size:"18px"}})],1),a("q-item-section",[e._v("\n                    "+e._s(e.c.t(t.title))+"\n                ")])],1)})),1):e._e()})),1),e.propHome?a("div",{staticClass:"cursor-pointer"},e._l(e.objects,(function(t,s){return a("div",{key:s},[a("q-virtual-scroll",{attrs:{items:t.children,"virtual-scroll-horizontal":""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;t.index;return[a("q-card",{class:" q-pa-md text-center",staticStyle:{width:"120px"},attrs:{flat:""},on:{click:function(t){return e.c.goto(s.url)}}},[a("q-icon",{attrs:{size:"36px",name:s.icon,color:s.color}}),a("div",{staticClass:"text-caption ellipsis"},[e._v(e._s(e.c.t(s.title)))])],1)]}}],null,!0)})],1)})),0):e._e()],1)},o=[],l=(a("4de4"),a("d81d"),{name:"Menu",props:{propPlan:String,propHome:Boolean},data:function(){return{c:this.$common,api:null,objects:[],plan:window.PLAN}},computed:{fsearch:function(){var e=this;return e.objects.filter((function(e){var t=e;return t.children&&t.children.length>0}))}},created:function(){var e=this,t=e.loadMenu();e.plan=window.PLAN?window.PLAN:1;var a=e.filterChild(t,"plan",e.plan);e.objects=a,console.log("")},methods:{fetch:function(){},filterChild:function(e,t,a){var s=e;return s.map((function(e){var s=e;if(e.children&&e.children.length>0){var o=e.children;return s.children=o.filter((function(e){return e[t]<=parseInt(a)})),s}return!1})),s},loadMenu:function(){var e=[{title:"Dashboard",icon:"dashboard",children:[{icon:"insights",title:"Marketing Analysis",url:"/marketing",color:"red-10",plan:1},{icon:"local_atm",title:"Sales Analysis",url:"/sales",color:"red-9",plan:2},{icon:"online_prediction",title:"Business Analysis",url:"/business",color:"red-7",plan:3}]},{title:"CMS",icon:"travel_explore",children:[{icon:"web",title:"Pages",url:"/page",color:"blue-10",plan:1},{icon:"article",title:"Blog",url:"/post",color:"blue-9",plan:1},{icon:"photo_album",title:"Products",url:"/product",color:"blue-8",plan:1},{icon:"category",title:"Category",url:"/category",color:"blue-7",plan:1},{icon:"cloud_upload",title:"Upload",url:"/upload",color:"blue-6",plan:1}]},{title:"Sales",icon:"local_atm",children:[{icon:"contacts",title:"Contacts",url:"/contact",color:"green-10",plan:1},{icon:"point_of_sale",title:"POS",url:"/pos",color:"green-9",plan:2},{icon:"shopping_basket",title:"Sales Orders",url:"/so",color:"green-8",plan:2}]},{title:"CRM",icon:"contact_phone",children:[{icon:"sell",title:"Deals",url:"/deal",color:"orange-9",plan:3},{icon:"question_answer",title:"Issues",url:"/issue",color:"orange-8",plan:3},{icon:"loyalty",title:"Loyalty",url:"/loyalty",color:"orange-6",plan:3},{icon:"local_offer",title:"Voucher",url:"/voucher",color:"orange-5",plan:3},{icon:"verified_user",title:"Warranty",url:"/warranty",color:"orange-4",plan:3},{icon:"comment",title:"Chat",url:"/chat",color:"orange-3",plan:2}]},{title:"Work",icon:"work",children:[{icon:"task",title:"Task List",url:"/task",color:"orange-10",plan:2},{icon:"meeting",title:"Meeting",url:"/meeting",color:"orange-10",plan:3},{icon:"calendar",title:"Calendar",url:"/calendar",color:"orange-9",plan:3}]},{title:"Admin",icon:"policy",children:[{icon:"home",title:"Site Master",url:"/site",color:"indigo-10",plan:1},{icon:"people",title:"Users",url:"/user",color:"indigo-8",plan:1},{icon:"policy",title:"Roles",url:"/role",color:"indigo-7",plan:1},{icon:"list",title:"List",url:"/list",color:"indigo-6",plan:1},{icon:"logout",title:"Logout",url:"/login",color:"indigo-5",plan:1}]}];return e}}}),n=l,c=(a("a1db"),a("2877")),i=a("1c1c"),r=a("3b73"),d=a("66e5"),u=a("4074"),p=a("0016"),m=a("a12b"),f=a("f09f"),b=a("714f"),v=a("eebe"),h=a.n(v),_=Object(c["a"])(n,s,o,!1,null,"19cacc2e",null);t["a"]=_.exports;h()(_,"components",{QList:i["a"],QExpansionItem:r["a"],QItem:d["a"],QItemSection:u["a"],QIcon:p["a"],QVirtualScroll:m["a"],QCard:f["a"]}),h()(_,"directives",{Ripple:b["a"]})},fcc1:function(e,t,a){"use strict";a("56a4")}}]);