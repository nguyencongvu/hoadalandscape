(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{"77ba":function(e,t,n){},a36c:function(e,t,n){"use strict";n("77ba")},e27d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-table",{staticClass:"bg-white popup-table",attrs:{dense:"",selection:e.propSelection,selected:e.multipleSelected,loading:e.loading,data:e.fsearch,columns:e.columns,"visible-columns":e.visibleColumns,"row-key":"_id",pagination:{rowsPerPage:e.c.ROWS_PER_PAGE}},on:{"update:selected":function(t){e.multipleSelected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("q-input",{staticClass:"full-width",attrs:{outlined:"",dense:"",debounce:"300",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})]},proxy:!0},e.propSelection?null:{key:"body-cell-username",fn:function(t){return[n("q-td",{staticClass:"bg-info q-py-md text-primary text-bold cursor-pointer popup-col ellipsis",attrs:{props:t}},[n("div",{directives:[{name:"close-popup",rawName:"v-close-popup"}],on:{click:function(n){e.selected=t.row,e.emitParent("reloadOne",e.selected)}}},[e._v(e._s(t.value))]),n("q-tooltip",[e._v("\n                "+e._s(e.c.t("Click to select"))+"\n            ")])],1)]}},e.propSelection?{key:"bottom-row",fn:function(){return[n("q-tr",[n("q-td",{attrs:{colspan:"100%"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-my-sm q-px-sm",attrs:{"no-caps":"",dense:"",color:"primary",label:e.c.t("Choose")},on:{click:function(t){return e.emitParent("reloadMany",e.multipleSelected)}}})],1)],1)]},proxy:!0}:null],null,!0)})},o=[],r=n("c973"),i=n.n(r),s=(n("96cf"),n("4de4"),n("b0c0"),n("caad"),n("2532"),n("d81d"),n("d3b7"),n("25f0"),{name:"Popup",props:{propSelection:String},data:function(){return{loading:!1,c:this.$common,api:null,collection:"user",showSearch:!1,text:"",objects:[],selected:{},columns:[],visibleColumns:[],multipleSelected:[]}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var e=this,t=e.text;return""==t?e.objects:e.objects.filter((function(e){var n=e.name?e.name.toLowerCase():"",a=e.username?e.username.toLowerCase():"";return n.includes(t)||a.includes(t)}))}},created:function(){this.init()},methods:{init:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e,n.api=new n.$api(n.collection),n.api.setDomain(n.profile.domain),n.fetch(),n.initColumns();case 5:case"end":return t.stop()}}),t)})))()},initColumns:function(){var e=this;e.columns=[{name:"id",visible:!1,align:"left",label:e.c.t("Id"),field:function(e){return e._id},sortable:!0},{name:"username",align:"left",label:e.c.t("Username"),field:"username",sortable:!0},{name:"name",align:"left",label:e.c.t("Name"),field:function(e){return e.name},sortable:!0}],e.visibleColumns=["username","name"]},fetch:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,n.loading=!0,t.next=4,n.api.getAll(n.collection);case 4:a=t.sent,n.objects=a.data.objects,n.loading=!1,n.objects&&n.objects.length>0&&(n.objects=n.mapAll(n.objects));case 8:case"end":return t.stop()}}),t)})))()},orm:function(e){var t={};return t._id=e._id,t.name=e.name,t.username=e.username,t.phone=e.phone,t.email=e.email,t.roles=e.roles,t.images=e.images,t.dept=e.dept,t.status=e.status,t.owner=e.owner,t.date_created=e.date_created,t.date_updated=e.date_updated,t},mapAll:function(e){var t=this;return e.map((function(e){return t.orm(e)}))},emitParent:function(e,t){var n=this;if(Array.isArray(t)){n.c.log(t);var a=t.map((function(e){return e.username})).toString();n.$emit(e,a)}else n.$emit(e,t)}}}),c=s,l=(n("a36c"),n("2877")),u=n("eaac"),p=n("27f9"),d=n("0016"),m=n("db86"),f=n("9c40"),b=n("05c0"),v=n("bd08"),h=n("7f67"),w=n("eebe"),g=n.n(w),_=Object(l["a"])(c,a,o,!1,null,"0af1b904",null);t["default"]=_.exports;g()(_,"components",{QTable:u["a"],QInput:p["a"],QIcon:d["a"],QTd:m["a"],QBtn:f["a"],QTooltip:b["a"],QTr:v["a"]}),g()(_,"directives",{ClosePopup:h["a"]})}}]);