(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"088d":function(t,e,a){},c4dd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",[t.c.canAccessModule(t.collection,t.profile.roles)?n("div",{ref:"main"},[n("q-toolbar",[n("div",[n("div",{staticClass:" bold-font text-h5"},[t._v(t._s(t.c.t("Pages"))+"\n                    "),t.loading?n("q-spinner-dots",{staticClass:"q-ml-sm",attrs:{color:"primary"}}):t._e()],1)]),n("q-space"),t.c.canUpdate(t.collection,t.profile.roles)?n("q-btn",{attrs:{color:"primary",flat:"","no-caps":"",icon:"post_add",label:t.c.t("New")},on:{click:function(e){t.create(),t.dialog=!0}}}):t._e()],1),n("q-separator"),n("q-toolbar",[n("q-input",{staticClass:"fit",attrs:{dense:"","bg-color":"white",outlined:"",placeholder:t.c.t("Search")+"..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),n("q-space"),n("q-btn",{attrs:{flat:"",round:"",icon:"refresh"},on:{click:function(e){t.search="",t.filterText="",t.getAll()}}}),t.c.canPrint(t.collection,t.profile.roles)?n("q-btn",{attrs:{flat:"",round:"",icon:"print"},on:{click:function(e){return t.print("print-list")}}}):t._e(),n("q-btn",{attrs:{flat:"",round:"",icon:"date_range"}},[n("q-menu",[n("TimeRange",{on:{reloadTimeRange:t.filterTime}})],1)],1),n("q-btn",{attrs:{flat:"",round:"",icon:"filter_alt"},on:{click:function(e){t.showFilter=!t.showFilter}}})],1),n("q-separator"),t.showFilter?n("q-toolbar",[n("FilterBy",{attrs:{propObjects:t.filters},on:{reloadFilter:t.fillFilter}}),n("q-space")],1):t._e(),n("q-separator"),n("q-list",{attrs:{separator:""}},t._l(t.fsearch,(function(e,a){return n("q-item",{key:e._id,attrs:{clickable:"",active:a==t.selectedIndex,"active-class":"bg-info"},on:{click:function(n){t.select(e._id),t.selectedIndex=a,t.dialog=!0}}},[n("q-item-section",{attrs:{avatar:""}},[n("Dot",{key:t.componentKey,staticClass:"q-mr-sm",attrs:{propText:e.status}})],1),n("q-item-section",[n("q-item-label",{staticClass:"bold-font text-subtitle1",attrs:{lines:"1"}},[t._v(t._s(e.title))]),n("q-item-label",{attrs:{caption:"",lines:"2"}},[t._v(t._s(e.summary))])],1),n("q-item-section",{attrs:{side:"",top:""}},[n("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.c.dateDiff(new Date,new Date(e.date_updated)))+"\n                        "+t._s(t.c.t("days"))+"\n                    ")]),n("q-chip",{staticClass:"bg-white",attrs:{size:"sm",outline:""}},[t._v(t._s(e.lang))])],1)],1)})),1),n("q-separator"),n("div",{staticClass:"q-pb-lg"},[t._v("Â ")])],1):n("div",[n("div",{staticClass:"absolute-center"},[n("q-img",{attrs:{width:"25vw",src:a("5183")}}),n("div",{staticClass:"text-center q-my-lg"},[t._v(t._s(t.c.t("Access Denied")))])],1)]),n("q-dialog",{ref:"popup",staticClass:"q-pb-lg",attrs:{position:"bottom"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("div",{staticClass:"bg-white",staticStyle:{height:"80vh"}},[n("q-toolbar",[n("div",{staticClass:"row"},[n("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"visibility",label:t.c.t("View")},on:{click:function(e){return t.showTab("info")}}}),n("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"edit",label:t.c.t("Edit or Create")},on:{click:function(e){return t.showTab("upsert")}}}),n("q-btn",{attrs:{flat:"","no-caps":"",color:"primary",icon:"task",label:t.c.t("Tasks")},on:{click:function(e){return t.showTab("task")}}})],1)]),n("q-separator"),n("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab-panel",{attrs:{name:"info"}},[n("Info",{key:t.componentKey,attrs:{propSelected:t.selected},on:{reloadRemove:function(e){return t.getAll()}}})],1),n("q-tab-panel",{attrs:{name:"upsert"}},[t.selected?n("Upsert",{key:t.componentKey,attrs:{propSelected:t.selected},on:{reloadUpsert:t.fillUpsert}}):t._e()],1),n("q-tab-panel",{attrs:{name:"task"}},[n("div",{staticClass:"text-caption"},[t._v(t._s(t.c.t("Task")))]),n("div",{staticClass:"text-h6 bold-font ellipis q-mb-md"},[t._v(t._s(t.selected.title))]),n("Task",{key:t.componentKey,attrs:{propCollection:t.collection,propId:t.selected._id}})],1)],1)],1)]),n("div",{staticClass:"absolute-bottom"},[n("BarStats",{key:t.componentKey,attrs:{propCount:t.fsearch.length,propSum:t.fsearch.length}})],1),n("div",{ref:"print-list",staticClass:"print-only"},[n("div",{staticClass:"text-h6"},[t._v(t._s(t.c.t("Pages")))]),n("DataTable",{key:t.componentKey,attrs:{propData:t.fsearch,propVisibleColumns:["title","lang","owner","date_updated"]}})],1)],1)},o=[],i=(a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("4de4"),a("ac1f"),a("841c"),a("caad"),a("2532"),a("d81d"),a("7db0"),a("c740"),a("bd4c")),r={name:"ListAll",components:{TimeRange:function(){return a.e(1).then(a.bind(null,"e19d"))},FilterBy:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"2d2e"))},FilterByCategory:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"74db"))},Info:function(){return a.e(1).then(a.bind(null,"7f32"))},Upsert:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"9f87"))},Task:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"43fe"))},Dot:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"9f7a"))},BarStats:function(){return Promise.all([a.e(0),a.e(2)]).then(a.bind(null,"9fda"))},DataTable:function(){return Promise.all([a.e(0),a.e(1)]).then(a.bind(null,"1fdb"))}},data:function(){return{loading:!1,c:this.$common,api:null,collection:"page",objects:[],selected:{id:null,title:null},selectedIndex:0,title:"",filterText:"",search:"",splitterModel:33,columns:[],visibleColumns:[],componentKey:0,tab:"info",timeFilter:null,filters:[],dialog:!1,showFilter:!1,page:1,offset:20}},computed:{profile:function(){return this.$store.state.user.profile},fsearch:function(){var t=this,e=t.objects;if(t.timeFilter){var a=t.timeFilter,n=new Date(a.from),o=new Date(a.to);e=e.filter((function(t){return i["b"].isBetweenDates(t.date_created,n,o)}))}t.filterText&&""!=t.filterText&&(e=e.filter((function(e){var a=t.filterText.toLowerCase(),n=e.type?e.type.toLowerCase():"",o=e.status?e.status.toLowerCase():"",i=e.category?e.category.toLowerCase():"",r=e.groupname?e.groupname.toLowerCase():"",l=e.lang?e.lang.toLowerCase():"",s=e.category_slug?e.category_slug.toLowerCase():"";return n==a||o==a||i==a||r==a||l==a||s==a})));var r=t.search.toLowerCase();return""==r?e:e.filter((function(t){var e=t.title?t.title.toLowerCase():"",a=t.slug?t.slug.toLowerCase():"";return e.includes(r)||a.includes(r)}))}},mounted:function(){},created:function(){var t=this;t.api=new t.$api(t.collection),t.api.setDomain(t.profile.domain),t.page=1,t.offset=20,t.getAll(),t.initFilter()},methods:{getAll:function(){var t=this;t.loading=!0,t.api.getAll(t.collection).then((function(e){if(console.log(""),e.data.count<=0)t.loading=!1;else{t.objects=t.orm(e.data.objects);var a=t.$route.params.id,n=t.$route.params.action;t.select(a,n),t.loading=!1,t.forceRenderer()}}))},orm:function(t){var e=this,a=t;if(!Array.isArray(a))return[];if(a.length<=0)return[];var n=a;return n=e.c.canViewMeOnly(e.collection,e.profile.roles)?a.filter((function(t){return t.owner==e.profile.username})):a,n=n.map((function(t){var e=t;return e})),console.log(""),n||[]},initFilter:function(){var t=this;t.filters=[{key:"cms-status",text:t.c.t("Status")},{key:"lang",text:t.c.t("Language")}]},setCategory:function(t){var e=this;console.log(""),e.filterText=t&&t.title?t.title:""},select:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,n=a.objects.length>0?a.objects.find((function(e){return e._id==t})):null;a.selected=n||a.objects[0];var o=a.objects.length>0?a.objects.findIndex((function(e){return e._id==t})):0;a.selectedIndex=o,e?a.showTab(e):a.showTab("info"),a.forceRenderer()},fillUpsert:function(t){var e=this;e.getAll(),e.select(t)},showTab:function(t){var e=this,a=e.$route.params.action;e.tab=a||t,e.search="",e.filterText=""},create:function(){var t=this;t.selected={id:null,title:"",slug:""},t.tab="upsert",t.forceRenderer()},filterTime:function(t){var e=this;e.timeFilter=t},fillFilter:function(t){var e=this;e.filterText=t},forceRenderer:function(){var t=this;t.$forceUpdate(),t.componentKey+=1},print:function(t){var e=this,a=e.$refs[t];a&&(e.c.print(a),e.forceRenderer())},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)}}},l=r,s=(a("e0f8"),a("2877")),c=a("4d5a"),u=a("068f"),d=a("65c6"),f=a("8380"),p=a("2c91"),b=a("9c40"),m=a("eb85"),h=a("27f9"),g=a("4e73"),v=a("1c1c"),q=a("66e5"),y=a("4074"),w=a("0170"),_=a("0016"),C=a("b047"),k=a("24e8"),T=a("adad"),x=a("823b"),Q=a("eebe"),F=a.n(Q),D=Object(s["a"])(l,n,o,!1,null,null,null);e["default"]=D.exports;F()(D,"components",{QLayout:c["a"],QImg:u["a"],QToolbar:d["a"],QSpinnerDots:f["a"],QSpace:p["a"],QBtn:b["a"],QSeparator:m["a"],QInput:h["a"],QMenu:g["a"],QList:v["a"],QItem:q["a"],QItemSection:y["a"],QItemLabel:w["a"],QIcon:_["a"],QChip:C["a"],QDialog:k["a"],QTabPanels:T["a"],QTabPanel:x["a"]})},e0f8:function(t,e,a){"use strict";a("088d")}}]);