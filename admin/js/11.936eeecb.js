(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"56b4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100vh"}},[a("div",{staticClass:"row full-height"},[a("div",{staticClass:"col-12 col-md-7 bg-primary orientation-landscape"},[a("div",{staticStyle:{width:"60%","padding-top":"100px",margin:"auto"}},[a("q-img",{staticStyle:{width:"100%"},attrs:{src:e.c.showImage(e.ui.banner)}})],1)]),a("div",{staticClass:"col-12 col-md-5 q-pa-xl"},[a("div",{staticClass:"text-center q-mb-xl"},[a("q-img",{staticStyle:{width:"25%"},attrs:{src:e.c.showImage("logo")}})],1),a("q-toolbar",{staticClass:"no-padding"},[a("div",{staticClass:"text-h5 bold-font"},[a("div",[e._v(e._s(e.c.t("Register")))]),e.fixedDomain?a("div",{staticClass:"text-caption text-primary"},[a("q-icon",{attrs:{name:"storage"}}),e._v(" "+e._s(e.fixedDomain?e.fixedDomain:"")+"\n                    ")],1):e._e()]),a("q-space"),a("q-icon",{staticClass:"cursor-pointer q-ml-sm",attrs:{name:"more_vert",size:"24px"}},[a("q-menu",[a("Lang",{on:{reloadLanguage:e.fillLanguage}})],1)],1)],1),a("q-separator",{staticClass:"q-my-md"}),a("q-form",{on:{submit:e.onSubmit,reset:e.onReset}},[e.fixedDomain?e._e():a("q-input",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Domain")+"*","lazy-rules":"",rules:e.c.valid("min-3")},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"storage"}})]},proxy:!0}],null,!1,802677397),model:{value:e.profile.domain,callback:function(t){e.$set(e.profile,"domain",t)},expression:"profile.domain"}}),a("q-input",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Name")+"*","lazy-rules":"",rules:e.c.valid("min-3")},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.profile.name,callback:function(t){e.$set(e.profile,"name",t)},expression:"profile.name"}}),a("q-input",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Email")+"*","lazy-rules":"",rules:e.c.valid("min-3")},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:e.profile.email,callback:function(t){e.$set(e.profile,"email",t)},expression:"profile.email"}}),a("q-input",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Username")+"*","lazy-rules":"",rules:e.c.valid("min-3")},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.profile.username,callback:function(t){e.$set(e.profile,"username",t)},expression:"profile.username"}}),a("q-input",{attrs:{dense:"","stack-label":"",outlined:e.c.outlined(),label:e.c.t("Password")+"*",type:e.isPwd?"password":"text","lazy-rules":"",rules:e.c.valid("min-3")},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"password"}})]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.profile.password,callback:function(t){e.$set(e.profile,"password",t)},expression:"profile.password"}}),a("div",{staticClass:"q-my-md"},[a("q-btn",{staticClass:"full-width",attrs:{push:"",type:"submit",color:"primary",loading:e.loading,label:e.c.t("Register")},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])}),a("q-btn",{staticClass:"full-width q-mt-md",attrs:{outlined:"",label:e.c.t("Login")},on:{click:function(t){return e.c.goto("/login")}}})],1)],1)],1)])])},i=[],o=a("c973"),s=a.n(o),r=(a("b0c0"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("96cf"),a("72b2")),l=(a("1fb0"),{components:{Lang:r["default"]},data:function(){return{loading:!1,c:this.$common,db:null,api:null,collection:"user",dbchecked:!1,profile:{username:"",password:"",saveLocal:!1},isPwd:!0,authed:!1}},created:function(){this.init()},methods:{init:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e,a.api=new a.$api(a.collection),e.profile={username:"",password:"",domain:""},n=a.api.ui,n&&(a.ui=n),a.api.domain&&""!=a.api.domain?a.fixedDomain=a.api.domain:a.fixedDomain=null,a.profile.domain=a.fixedDomain;case 7:case"end":return t.stop()}}),t)})))()},onSubmit:function(){this.register()},register:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var a,n,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,n={username:a.profile.username,slug:a.c.genCode("USR"),title:a.profile.name,name:a.profile.name,password:a.profile.password,email:a.profile.email,roles:"",status:"InActive",type:"external",date_created:a.c.formatDataDate(new Date),date_updated:a.c.formatDataDate(new Date)},a.loading=!0,t.next=5,a.api.getByUsername(a.collection,n.username);case 5:if(i=t.sent,o=i.data,a.loading=!0,!o||"error"!=o.status){t.next=11;break}return a.c.toast(o.message,"negative"),t.abrupt("return");case 11:if(o.objects&&!(o.objects&&o.objects.length<=0)){t.next=21;break}return s=o.count,s<=0&&(n.roles="admin::all",n.status="Active",n.type="Internal"),console.log(""),t.next=17,a.api.create(a.collection,n);case 17:a.c.toast(a.c.t("User created"),"positive"),a.c.goto("/login"),t.next=22;break;case 21:a.c.toast(a.c.t("User already registered"),"negative");case 22:return a.loading=!1,t.abrupt("return");case 24:case"end":return t.stop()}}),t)})))()},onReset:function(){this.profile={},this.isPwd=!0},fillLanguage:function(e){var t=this;a("8488")("./"+e.value).then((function(a){t.$q.lang.set(a.default),t.$i18n.locale=e.value}))}}}),c=l,u=(a("6feb"),a("2877")),d=a("068f"),p=a("65c6"),m=a("0016"),f=a("2c91"),b=a("4e73"),g=a("eb85"),v=a("0378"),w=a("27f9"),x=a("9564"),y=a("9c40"),h=a("e669"),q=a("eebe"),k=a.n(q),_=Object(u["a"])(c,n,i,!1,null,"75157944",null);t["default"]=_.exports;k()(_,"components",{QImg:d["a"],QToolbar:p["a"],QIcon:m["a"],QSpace:f["a"],QMenu:b["a"],QSeparator:g["a"],QForm:v["a"],QInput:w["a"],QToggle:x["a"],QBtn:y["a"],QSpinnerFacebook:h["a"]})},"6feb":function(e,t,a){"use strict";a("ec6b")},ec6b:function(e,t,a){}}]);