(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"2bff":function(t,e,a){"use strict";a("5365")},5365:function(t,e,a){},"8a7f":function(t,e,a){},a48d:function(t,e,a){"use strict";a("8a7f")},dde8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",[t.c.isMobile()?a("div",[a("div",{},[t.slider&&t.slider.length>0?a("q-carousel",{staticClass:"bg-transparent",staticStyle:{height:"200px"},attrs:{animated:"",arrows:"",navigation:"",infinite:""},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.slider,(function(t,e){return a("q-carousel-slide",{key:e,attrs:{name:e}},[a("q-img",{staticClass:"fit rounded-borders",attrs:{src:t.image}})],1)})),1):a("img",{staticClass:"rounded-borders",staticStyle:{width:"100%"},attrs:{src:"https://cdn.quasar.dev/img/mountains.jpg"}})],1),a("div",{staticClass:"q-pa-md"},[a("q-toolbar",{staticClass:"no-padding"},[a("div",{staticClass:"text-subtitle2 bold-font text-uppercase"},[t._v("Khuyến mãi mới nhất")]),a("q-space"),a("div",{staticClass:"text-caption"},[t._v("Xem tất cả")])],1),a("div",{},[a("q-virtual-scroll",{attrs:{items:t.category,"virtual-scroll-horizontal":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item,i=e.index;return[a("div",{key:i},[a("q-card",{staticClass:"text-caption q-mr-sm borders",staticStyle:{width:"35vw"},attrs:{flat:""}},[a("q-img",{attrs:{src:s.image}},[a("div",{staticClass:"absolute-top-right text-caption no-padding",staticStyle:{top:"10px"}},[a("div",{staticClass:"q-pa-sm"},[t._v("Bán chạy")])])]),a("div",{staticClass:"text-center ellipsis-2-lines q-mt-sm"},[t._v(t._s(s.text))]),a("div",{staticClass:"q-mx-xs q-my-sm text-center",staticStyle:{"font-size":"10px"}},[a("b",{staticClass:"text-red"},[t._v("100.000 đ")]),t._v(" \n                                    "),a("s",[t._v("120.000d đ")])])],1)],1)]}}])})],1)],1),a("div",{staticClass:"q-pa-md"},[a("q-toolbar",{staticClass:"no-padding"},[a("div",{staticClass:"text-subtitle2 bold-font text-uppercase"},[t._v("Hàng mới về")]),a("q-space"),a("div",{staticClass:"text-caption"},[t._v("Xem tất cả")])],1),a("div",{},[a("q-virtual-scroll",{attrs:{items:t.category,"virtual-scroll-horizontal":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item,i=e.index;return[a("div",{key:i},[a("q-card",{staticClass:"text-caption q-mr-sm borders",staticStyle:{width:"35vw"},attrs:{flat:""}},[a("q-img",{attrs:{src:s.image}},[a("div",{staticClass:"absolute-top-right text-caption no-padding",staticStyle:{top:"10px"}},[a("div",{staticClass:"q-pa-sm"},[t._v("Mới")])])]),a("div",{staticClass:"text-center ellipsis-2-lines q-mt-sm"},[t._v(t._s(s.text))]),a("div",{staticClass:"q-mx-xs q-my-sm text-center",staticStyle:{"font-size":"10px"}},[a("b",{staticClass:"text-red"},[t._v("100.000 đ")])])],1)],1)]}}])})],1)],1),a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-subtitle2 bold-font text-uppercase q-mb-md"},[t._v("Danh mục sản phẩm")]),a("q-virtual-scroll",{attrs:{items:t.category,"virtual-scroll-horizontal":""},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item,i=e.index;return[a("div",{key:i},[a("div",{staticStyle:{width:"20vw"}},[a("div",{staticClass:"text-center"},[a("q-btn",{staticClass:"q-pa-xs",attrs:{flat:"",round:""}},[a("q-avatar",{attrs:{size:"60px"}},[a("img",{attrs:{src:s.image}})])],1)],1),a("div",{staticClass:"text-caption text-center q-mt-sm"},[t._v(t._s(s.text))])])])]}}])})],1),a("div",[a("a",{attrs:{href:t.banners[0].url}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.banners[0].image}})])]),a("div",{staticClass:"q-pa-md"},[a("q-toolbar",{staticClass:"no-padding"},[a("div",{staticClass:"text-subtitle2 bold-font text-uppercase "},[t._v("Danh sách Sản phẩm")]),a("q-space"),a("div",{staticClass:"text-caption"},[t._v("Xem tất cả")])],1),a("div",{staticClass:"column example-container"},[a("div",{staticClass:"flex-break hidden"}),a("div",{staticClass:"flex-break"}),a("div",{staticClass:"flex-break"}),a("div",{staticClass:"flex-break"}),a("div",{staticClass:"row q-col-gutter-xs"},t._l(t.products,(function(e,s){return a("div",{key:s,staticClass:"col-6"},[a("q-card",{staticClass:"borders",attrs:{flat:""}},[a("q-img",{attrs:{src:e.image}},[a("div",{staticClass:"absolute-top-right text-caption no-padding",staticStyle:{top:"10px"}},[a("div",{staticClass:"q-pa-sm"},[t._v("Giới hạn")])])]),a("div",{staticClass:"text-center ellipsis-2-lines q-mt-sm"},[t._v(t._s(e.text))]),a("div",{staticClass:"q-mx-xs q-my-sm text-center",staticStyle:{"font-size":"10px"}},[a("b",{staticClass:"text-red"},[t._v("100.000 đ")]),t._v("  \n                                "),a("s",[t._v("120.000d đ")])])],1)],1)})),0)])],1),a("div",{staticClass:"q-pa-md text-center",staticStyle:{"padding-bottom":"10vh"}},[a("q-spinner-dots",{attrs:{color:"black",size:"lg"}}),a("q-btn",{staticClass:"full-width",attrs:{unelevated:"",outline:"","no-caps":"",color:"grey-5"}},[t._v("Xem thêm")])],1)]):a("div",{staticClass:"q-pa-md"},[t._v("\n        Hãy xem theo chiều dọc\n    ")])])},i=[],n=a("c973"),c=a.n(n),r=a("9523"),o=a.n(r),l=(a("96cf"),a("4de4"),a("ac1f"),a("841c"),a("b0c0"),a("caad"),a("2532"),a("d81d"),a("1276"),a("159b"),a("a434"),a("bd4c"),a("e19d"),a("0d2f"),a("1a89"),a("9f7a")),d=(a("2d2e"),a("1fdb"),a("2c55"),a("4ea3"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-stepper",{ref:"stepper",style:t.c.isMobile()?"max-height:82vh":"",attrs:{flat:"",color:"primary","header-class":"desktop-hide mobile-hide",infinite:"","header-nav":"",animated:""},scopedSlots:t._u([{key:"navigation",fn:function(){return[t.cart&&t.cart.length>0?s("q-stepper-navigation",[s("q-toolbar",{staticClass:"no-padding q-gutter-xs"},[t.step>1?s("q-btn",{staticClass:"q-mr-sm",attrs:{outline:"",round:"",color:"primary",icon:"chevron_left"},on:{click:function(e){return t.$refs.stepper.previous()}}}):t._e(),s("q-btn",{attrs:{outline:"",round:"",icon:"chevron_right",color:"primary"},on:{click:function(e){return t.$refs.stepper.next()}}}),t.guest.name&&t.guest.phone&&"temp"==t.status?s("q-btn",{staticClass:"q-ml-sm",attrs:{push:"",icon:"save",color:"grey"},on:{click:function(e){t.saveTemp(),t.status="ok"}}},[s("q-tooltip",[t._v("Lưu tạm")])],1):t._e(),t.guest.name&&t.guest.phone&&"temp"==t.status?s("q-btn",{staticClass:"q-ml-sm",attrs:{push:"",color:"grey",icon:"print"},on:{click:function(e){return t.print("print-area")}}},[s("q-tooltip",[t._v("In tạm")])],1):t._e(),"ok"==t.status?s("q-btn",{staticClass:"q-ml-sm",attrs:{push:"",color:"primary",icon:"save"},on:{click:function(e){t.status="ok",t.make_order()}}},[s("q-tooltip",[t._v("Lưu chính thức")])],1):t._e(),"ok"==t.status?s("q-btn",{attrs:{push:"",color:"primary",icon:"print"},on:{click:function(e){return t.print("print-area")}}},[s("q-tooltip",[t._v("In chính thức")])],1):t._e(),s("q-space"),s("div",[s("div",{staticClass:"text-right"},[t._v(t._s(t.stepInfo(t.step))+" ")]),s("div",{staticClass:"text-h4 orientation-landscape bold-font q-ml-sm"},[t._v(t._s(t.c.formatCurrency(t.getTotal())))]),s("div",{staticClass:"text-h6 orientation-portrait bold-font q-ml-sm"},[t._v(t._s(t.c.formatCurrency(t.getTotal())))])])],1)],1):t._e()]},proxy:!0}]),model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("q-step",{attrs:{name:1,title:t.c.t("Sales Order"),icon:"shopping_basket",done:t.step>1}},[s("q-scroll-area",{style:t.c.isMobile()?"height:58vh; max-height:58vh;":"height:80vh; max-height:80vh;"},[t.cart&&t.cart.length<=0?s("div",{staticClass:"text-center q-pt-xl q-mt-xl"},[s("q-img",{attrs:{width:"40%",ratio:4/3,src:a("8479")}}),s("div",{staticClass:"text-caption q-mt-md"},[t._v(t._s(t.c.t("No data")))])],1):s("div",[s("div",{staticClass:"text-h5 bold-font q-my-md"},[t._v(t._s(t.c.t("Sales Order")))]),s("table",{staticClass:"text-caption no-padding"},[s("thead",{staticStyle:{"border-bottom":"solid 1px #eee","border-top":"solid 1px #eee"}},[s("tr",{staticClass:"bg-grey-2"},[s("th",[t._v("\n                                    "+t._s(t.c.t("Product"))+"\n                                    "),s("q-badge",{attrs:{color:"primary",align:"top"}},[t._v("\n                                        "+t._s(t.cart.length)+"\n                                    ")])],1),s("th",{staticClass:"text-center"},[t._v(t._s(t.c.t("Quantity"))+" "),s("q-badge",{attrs:{color:"primary",align:"top"}},[t._v("\n                                        "+t._s(t.c.sum(t.cart,"quantity")))])],1),s("th",{staticClass:"text-right"},[t._v(t._s(t.c.t("Amount")))]),s("th")])]),s("tbody",t._l(t.cart,(function(e,a){return s("tr",{key:"item"+a},[s("td",{staticClass:"text-caption"},[t._v("\n                                    "+t._s(e.title)+"\n                                    "),s("div",{staticClass:"text-caption"},[t._v(t._s(e.sku))])]),s("td",[s("q-toolbar",{staticClass:"cursor-pointer",staticStyle:{width:"120px",margin:"0 auto"}},[s("q-icon",{attrs:{size:"md",color:"primary",name:"remove_circle_outline",clickable:""},on:{click:function(a){return t.setQuantity(e.id,-1)}}}),s("q-input",{attrs:{flat:"",borderless:"","input-class":"text-bold text-center"},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"one.quantity"}}),s("q-icon",{attrs:{size:"md",color:"primary",name:"add_circle_outline",clickable:""},on:{click:function(a){return t.setQuantity(e.id,1)}}})],1)],1),s("td",{staticClass:"text-right text-caption"},[t._v("\n                                    "+t._s(t.c.formatCurrency(e.price*e.quantity))+"\n                                ")]),s("td",[s("q-btn",{attrs:{flat:"",round:"",dense:"","stack-label":"",color:"grey",icon:"delete_outline"},on:{click:function(a){return t.removeItem(e.id)}}})],1)])})),0)])])])],1),s("q-step",{attrs:{name:2,title:t.c.t("Customer"),icon:"person",done:t.step>2}},[s("q-scroll-area",{style:t.c.isMobile()?"height:58vh; max-height:58vh;":"height:80vh; max-height:80vh;"},[t.cart&&t.cart.length<=0?s("div",{staticClass:"text-center q-mt-xl"},[s("q-img",{attrs:{width:"40%",ratio:4/3,src:a("8479")}}),s("div",{staticClass:"text-caption q-mt-md"},[t._v(t._s(t.c.t("No data")))])],1):s("div",[s("q-toolbar",{staticClass:"no-padding"},[s("div",{staticClass:"text-h5 bold-font q-my-md"},[t._v(t._s(t.c.t("Customer")))]),s("q-space"),s("q-input",{ref:"guestPhone",staticClass:"col-6 col-md-3",attrs:{outlined:"",dense:"","stack-label":"",label:t.c.t("Member Code"),id:"guestPhone",autocomplete:"off"},on:{keyup:function(e){return t.getLeadByPhone(t.memberCode)}},model:{value:t.memberCode,callback:function(e){t.memberCode=e},expression:"memberCode"}},[t.lead.length>0?s("q-menu",{model:{value:t.showLeads,callback:function(e){t.showLeads=e},expression:"showLeads"}},[s("q-list",{attrs:{dense:"","stack-label":""}},t._l(t.lead,(function(e,a){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:"lead"+a,attrs:{clickable:""},on:{click:function(a){return t.setGuest(e)}}},[s("q-item-section",[t._v("\n                                            "+t._s(e.name)+"\n                                        ")]),s("q-item-section",{attrs:{side:"",middle:""}},[t._v("\n                                            "+t._s(e.phone)+"\n                                        ")])],1)})),1)],1):t._e()],1)],1),s("q-form",{staticClass:"row q-col-gutter-xs",on:{reset:t.reset}},[s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",label:t.c.t("Name")+"*"},model:{value:t.guest.name,callback:function(e){t.$set(t.guest,"name",e)},expression:"guest.name"}}),s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",autocomplete:"off",label:t.c.t("Phone")+"*"},model:{value:t.guest.phone,callback:function(e){t.$set(t.guest,"phone",e)},expression:"guest.phone"}}),s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",autocomplete:"off",label:t.c.t("Email")+"*"},model:{value:t.guest.email,callback:function(e){t.$set(t.guest,"email",e)},expression:"guest.email"}}),s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",label:t.c.t("Province")+"*"},model:{value:t.guest.province,callback:function(e){t.$set(t.guest,"province",e)},expression:"guest.province"}}),s("q-input",{staticClass:"col-12 col-md-12",attrs:{filled:"",dense:"","stack-label":"",label:t.c.t("Address")},model:{value:t.guest.address,callback:function(e){t.$set(t.guest,"address",e)},expression:"guest.address"}}),s("q-input",{staticClass:"col-12 col-md-12",attrs:{filled:"",dense:"","stack-label":"",type:"textarea",rows:"2",label:t.c.t("Delivery note")},model:{value:t.guest.first_request,callback:function(e){t.$set(t.guest,"first_request",e)},expression:"guest.first_request"}}),t.memberCode?s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",label:t.c.t("Member Code"),readonly:""},model:{value:t.guest.code,callback:function(e){t.$set(t.guest,"code",e)},expression:"guest.code"}}):t._e(),t.memberCode?s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",type:"number",label:t.c.t("Your coins"),readonly:""},model:{value:t.guest.coins,callback:function(e){t.$set(t.guest,"coins",e)},expression:"guest.coins"}}):t._e(),t.memberCode?s("div",{staticClass:"col-12 col-md-12"},[s("div",{staticClass:"text-h5 bold-font q-my-md"},[t._v(t._s(t.c.t("Membership")))]),s("div",{staticClass:"row q-col-gutter-sm"},[s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",label:t.c.t("Coupon")},model:{value:t.coupon,callback:function(e){t.coupon=e},expression:"coupon"}}),s("q-input",{ref:"coinSubtract",staticClass:"col-12 col-md-6",attrs:{type:"number",max:t.guest.coins,filled:"",dense:"","stack-label":"",label:t.c.t("Use coins")},on:{change:function(e){return t.checkCoins()}},model:{value:t.coinSubtract,callback:function(e){t.coinSubtract=t._n(e)},expression:"coinSubtract"}})],1)]):t._e(),s("div",{staticClass:"col-12 col-md-12"},[s("div",{staticClass:"text-h5 bold-font q-my-md"},[t._v(t._s(t.c.t("Shipping and Tax")))]),s("div",{staticClass:"row q-col-gutter-sm"},[s("q-input",{staticClass:"col-12 col-md-6",attrs:{filled:"",dense:"","stack-label":"",label:t.c.t("Shipping Fee")+" (đ)"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"location_on"}})]},proxy:!0}]),model:{value:t.shippingPrice,callback:function(e){t.shippingPrice=t._n(e)},expression:"shippingPrice"}}),s("q-select",{staticClass:"col-12 col-md-6",attrs:{dense:"",filled:"","stack-label":"",options:t.tax,label:t.c.t("Tax")+" (%)"},model:{value:t.taxValue,callback:function(e){t.taxValue=e},expression:"taxValue"}})],1)])],1)],1)])],1),s("q-step",{attrs:{name:3,title:"Thanh toán",icon:"paid"}},[s("q-scroll-area",{style:t.c.isMobile()?"height:58vh; max-height:58vh;":"height:80vh; max-height:80vh;"},[s("div",[t.cart&&t.cart.length<=0?s("div",{staticClass:"text-center q-mt-xl"},[s("q-img",{attrs:{width:"40%",ratio:4/3,src:a("8479")}}),s("div",{staticClass:"text-caption q-mt-md"},[t._v(t._s(t.c.t("No data")))])],1):s("div",[s("div",{staticClass:"q-mb-md",staticStyle:{width:"60%",float:"left"}},[s("span",{staticClass:"text-h5 bold-font"},[t._v("Phiếu thanh toán")]),s("br"),t._v("\n                            Khách hàng : "+t._s(t.guest.name)+" "),s("br"),t._v("\n                            Phone : "+t._s(t.guest.phone)+" "+t._s(t.guest.email?" - Email: "+t.guest.email:"")),s("br"),t._v("\n                            Địa chỉ: "+t._s(t.guest.address)+" "+t._s(t.guest.province?", "+t.guest.province:"")+"\n                        ")]),s("div",{staticStyle:{width:"30%",float:"right","text-align":"right"}},[s("b",[t._v(t._s(t.site.site_name))]),s("br"),t._v("\n                            "+t._s(t.site.company_name?t.site.company_name:"")),s("br"),t._v("\n                            "+t._s(t.site.company_taxcode?"MST: "+t.site.company_taxcode:"")),s("br"),t._v("\n                            "+t._s(t.site.company_address?"Địa chỉ: "+t.site.company_address:"")+"\n                        ")]),s("div",{staticStyle:{clear:"both"}}),s("table",{staticClass:"table text-caption no-padding"},[s("thead",{staticStyle:{"border-bottom":"solid 1px #eee","border-top":"solid 1px #eee"}},[s("tr",{staticClass:"bg-grey-2"},[s("th",[t._v("Sản phẩm")]),s("th",{staticStyle:{"text-align":"center"}},[t._v("Số lượng")]),s("th",{staticStyle:{"text-align":"right"}},[t._v("Thành tiền")])])]),s("tbody",[t._l(t.cart,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"text-caption"},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")]),s("td",{staticClass:"text-center",staticStyle:{"text-align":"center"}},[t._v("\n                                        "+t._s(e.quantity)+"\n                                    ")]),s("td",{staticClass:"text-right text-caption",staticStyle:{"text-align":"right"}},[t._v("\n                                        "+t._s(t.c.formatCurrency(e.price*e.quantity))+"\n                                    ")])])})),t.taxValue?s("tr",[s("td",{staticClass:"text-caption",attrs:{colspan:"2"}},[t._v("+ Thuế VAT (đ)")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(t.taxValue*t.subTotal/100))+"\n                                    ")])]):t._e(),t.shippingPrice?s("tr",[s("td",{staticClass:"text-caption",attrs:{colspan:"2"}},[t._v("+ Phí vận chuyển (đ)")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(t.shippingPrice)))])]):t._e(),t.discount>0?s("tr",[s("td",{staticClass:"text-caption"},[t._v("- Coupon "+t._s(t.coupon)+" Giảm\n                                        giá\n                                        (đ)")]),s("td",{staticClass:"text-center",staticStyle:{"text-align":"center"}},[t._v("\n                                        "+t._s(t.discountPer)+"%\n                                    ")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(t.discount))+"\n                                    ")])]):t._e(),t.coinSubtract>0?s("tr",{staticStyle:{"text-align":"right"}},[s("td",{staticClass:"text-caption"},[t._v("- Sử dụng "+t._s(t.coinSubtract)+" xu\n                                        (đ)")]),s("td",{staticClass:"text-center",staticStyle:{"text-align":"center"}},[t._v("\n                                        "+t._s(t.coinSubtract)+"\n                                    ")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(1e3*t.coinSubtract)))])]):t._e(),s("tr",{staticClass:"bg-grey-1"},[s("td",{staticClass:"text-body2 text-bold",attrs:{colspan:"2"}},[t._v("Tổng cộng (đ)")]),s("td",{staticClass:"text-body2 text-bold text-right",staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t.c.formatCurrency(t.total))+"\n                                    ")])])],2)]),s("div",{staticClass:"q-my-sm text-right"},[t._v(t._s(t.c.t("Earn coins"))+": "),s("b",[t._v(t._s(t.coinAdd))])])])])])],1)],1),s("div",{ref:"print-area",staticClass:"print-only"},[s("div",{staticStyle:{width:"60%",float:"left"}},[s("span",{staticClass:"text-body2 text-bold"},[t._v("PHIẾU THANH TOÁN")]),t._v("\n             "),"temp"==t.status?s("span",[t._v("(In tạm)")]):t._e(),s("br"),t._v("\n            Khách hàng : "+t._s(t.guest.name)+" "),s("br"),t._v("\n            Phone : "+t._s(t.guest.phone)+" "+t._s(t.guest.email?" - Email: "+t.guest.email:"")),s("br"),t._v("\n            Địa chỉ: "+t._s(t.guest.address)+" "+t._s(t.guest.province?", "+t.guest.province:"")+"\n        ")]),s("div",{staticStyle:{width:"30%",float:"right","text-align":"right"}},[s("b",[t._v(t._s(t.site.site_name))]),s("br"),t._v("\n            "+t._s(t.site.company_name?t.site.company_name:"")),s("br"),t._v("\n            "+t._s(t.site.company_taxcode?"MST: "+t.site.company_taxcode:"")),s("br"),t._v("\n            "+t._s(t.site.company_address?"Địa chỉ: "+t.site.company_address:"")+"\n        ")]),s("div",{staticStyle:{clear:"both"}}),s("table",{staticClass:"table text-caption no-padding"},[t._m(0),s("tbody",[t._l(t.cart,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"text-caption"},[t._v("\n                        "+t._s(e.title)+"\n                    ")]),s("td",{staticClass:"text-center",staticStyle:{"text-align":"center"}},[t._v("\n                        "+t._s(e.quantity)+"\n                    ")]),s("td",{staticClass:"text-right text-caption",staticStyle:{"text-align":"right"}},[t._v("\n                        "+t._s(t.c.formatCurrency(e.price*e.quantity))+"\n                    ")])])})),t.taxValue?s("tr",[s("td",{staticClass:"text-caption",attrs:{colspan:"2"}},[t._v("+ Thuế VAT (đ)")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(t.taxValue*t.subTotal/100))+"\n                    ")])]):t._e(),t.shippingPrice?s("tr",[s("td",{staticClass:"text-caption",attrs:{colspan:"2"}},[t._v("+ Phí vận chuyển (đ)")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(t.shippingPrice)))])]):t._e(),t.discount>0?s("tr",[s("td",{staticClass:"text-caption"},[t._v("- Coupon "+t._s(t.coupon)+" Giảm\n                        giá\n                        (đ)")]),s("td",{staticClass:"text-center",staticStyle:{"text-align":"center"}},[t._v("\n                        "+t._s(t.discount)+"%\n                    ")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(t.discount))+"\n                    ")])]):t._e(),t.coinSubtract>0?s("tr",{staticStyle:{"text-align":"right"}},[s("td",{staticClass:"text-caption"},[t._v("- Sử dụng "+t._s(t.coinSubtract)+" xu\n                        (đ)")]),s("td",{staticClass:"text-center",staticStyle:{"text-align":"center"}},[t._v("\n                        "+t._s(t.coinSubtract)+"\n                    ")]),s("td",{staticClass:"text-caption text-right",staticStyle:{"text-align":"right"}},[t._v(t._s(t.c.formatCurrency(1e3*t.coinSubtract)))])]):t._e(),s("tr",{staticClass:"bg-grey-1"},[s("td",{staticClass:"text-body2 text-bold",attrs:{colspan:"2"}},[t._v("Tổng cộng (đ)")]),s("td",{staticClass:"text-body2 text-bold text-right",staticStyle:{"text-align":"right"}},[t._v(" "+t._s(t.c.formatCurrency(t.total))+"\n                    ")])])],2)]),s("div",{staticClass:"q-my-sm text-right"},[t._v(t._s(t.c.t("Earn coins"))+": "),s("b",[t._v(t._s(t.coinAdd))])]),s("div",{staticClass:"text-right",staticStyle:{"padding-bottom":"3.5rem"}},[t._v("\n            Ngày: "+t._s(t.c.formatDate(new Date))+"\n            "),s("br"),t._v("Người in\n        ")]),t.api.PLAN<2?s("div",{staticClass:"text-center text-caption"},[s("q-separator"),t._v("\n            In từ hệ thống phần mềm POS của công ty Hitime - Website:\n            http://pos.hitime.vn\n        ")],1):t._e()])],1)}),u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticStyle:{"border-bottom":"solid 1px #eee","border-top":"solid 1px #eee"}},[a("tr",{staticClass:"bg-grey-2"},[a("th",[t._v("Sản phẩm")]),a("th",{staticStyle:{"text-align":"center"}},[t._v("Số lượng")]),a("th",{staticStyle:{"text-align":"right"}},[t._v("Thành tiền")])])])}],p=(a("c740"),a("13d5"),a("7db0"),a("d443")),m=a("716b"),h={name:"UpsertSelected",components:{Dot:l["default"],Upload:p["a"],Money:m["Money"]},props:{propCart:Array,propGuest:Object},data:function(){var t;return t={loading:!1,c:this.$common,api:null,id:null,collection:"post",objects:[],selected:{},tab:"1",fillToInput:"",inputs:[],fields:[],showMore:!1,errorInputs:[],showErrorInputs:!1,money:{decimal:",",thousands:".",suffix:" đ",precision:0,masked:!1},step:1,filter:"",site:{},guest:{},quantity:1,cart:[],item:{},aff:"online",subTotal:0,total:0,cog:0,shippingPrice:0,taxValue:0,memberId:"",coupon:"",coin:0,coinSubtract:0,lead:[],showLeads:!1},o()(t,"objects",[]),o()(t,"splitterModel",50),o()(t,"tab","view"),o()(t,"dialog",!1),o()(t,"soTemps",[]),o()(t,"selected",{}),o()(t,"status","temp"),o()(t,"showMembership",!1),o()(t,"memberCode",null),t},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items},items:function(){return this.cart.map((function(t){var e={};return e.sku=t.sku,e.unit=t.unit,e.title=t.title,e.price=t.price,e.quantity=t.quantity,e.images=t.images,e.warranty=t.warranty?t.warranty:0,e.parent_id=null,e}))},tax:function(){return window.tax?window.tax.value.split(",").map((function(t){return parseInt(t)})):[0,10]},discount:function(){return 1e3*this.coinSubtract},discountPer:function(){return-1!=["abc","123","abcd","1234"].indexOf(this.coupon.toLowerCase())||-1!=["10","shop10","c10"].indexOf(this.coupon.toLowerCase())?10:-1!=["5","shop5","c5"].indexOf(this.coupon.toLowerCase())?5:void 0},coinAdd:function(){return this.getSubTotal()/1e4}},watch:{coinSubtract:function(t,e){console.log(t),console.log(e)}},mounted:function(){},created:function(){var t=this;t.api=new t.$api(t.collection),t.api.setDomain(t.profile.domain),t.cart=t.propCart,t.guest=t.propGuest,console.log("")},methods:{getLeadByPhone:function(t){var e=this;return c()(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e,s.lead=[],t&&!(t.length<3)){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.getLikePhone("contact",t);case 6:i=a.sent,n=i.data,n.count>=1&&(s.lead=n.objects),s.showLeads=!0,e.$nextTick().then((function(){console.log(s.$refs.guestPhone.focus())})),s.c.log(s.$refs.guestPhone);case 12:case"end":return a.stop()}}),a)})))()},setGuest:function(t){var e=this;this.guest=t,e.c.log(this.guest),this.lead=[],this.showLeads=!1},reset:function(){var t=this;t.cart=[],t.guest={},t.step=1,t.status="temp"},create_new:function(){var t=this;t.reset()},stepInfo:function(t){return t<=2?this.c.t("Subtotal"):t>=3?this.c.t("Total"):void 0},saveTemp:function(){var t=this;if(!t.valid())return t.c.toast("Vui lòng nhập đúng thông tin","negative"),!1;t.status="temp";var e=t.c.genCode("SO"),a={code:e,slug:e,title:t.c.t("Sales Order")+" POS",total:t.getTotal(),cart:t.cart,contact:t.guest};t.emitParent("reloadTemp",a)},removeTemp:function(t){var e=this;e.soTemps=e.soTemps.filter((function(e){return e.code!=t}))},loadTemp:function(t){var e=this;e.cart=[],e.guest={};var a=confirm("Bạn có chắc?");if(!a)return!1;console.log(""),e.cart=t.cart,e.guest=t.contact,e.$forceUpdate(),e.soTemps=e.soTemps.filter((function(e){return e.code!=t.code}))},setQuantity:function(t,e){var a=this,s=a.cart.findIndex((function(e){return e.id===t}));a.cart[s].quantity+=e,a.cart[s].quantity<0&&(a.cart[s].quantity=0),a.subTotal=a.getSubTotal(),a.$forceUpdate()},getSubTotal:function(){return this.cart.reduce((function(t,e){return t+e.price*e.quantity}),0)},getTotal:function(){var t=0,e=this.getSubTotal();return t=e,t+=this.shippingPrice>0?this.shippingPrice:0,t+=this.taxValue>0?this.taxValue*e/100:0,t-=this.discountPer>0?this.discountPer*e/100:0,t-=this.coinSubtract>0?1e3*this.coinSubtract:0,this.total=t,t},getCog:function(){var t=this,e=0;return e=t.c.sum(t.cart,"cog"),t.cog=e,e},removeItem:function(t){this.cart=this.cart.filter((function(e){return e.id!=t})),this.subTotal=this.getSubTotal(),this.emitParent("reloadRemove",this.cart)},checkCoins:function(){var t=this;t.coinSubtract>t.guest.coins&&(t.c.toast("Số coins không đủ"),t.coinSubtract=0)},valid:function(){return!(this.email&&!this.email.includes("@"))&&!!(this.guest.phone&&this.guest.phone&&this.guest.province)},make_order:function(){if(!this.valid())return this.c.toast("Vui lòng nhập đúng thông tin","negative"),!1;var t=confirm("Lưu đơn hàng?");if(!t)return!1;this.save_db()},save_db:function(){var t=this;return c()(regeneratorRuntime.mark((function e(){var a,s,i,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,s={so:{},contact:{},items:[]},i=a.c.genCode("SO"),n={code:i,slug:i,title:"Đơn hàng POS",groupname:"POS",type:"Offline",date_created:a.c.formatDataDate(new Date),date_updated:a.c.formatDataDate(new Date),date_start:a.c.formatDataDate(new Date),total:a.total,cog:a.getCog(),profit:a.cog&&a.cog>0?a.total-a.cog:0},c=a.guest,c.cookie=localStorage.cookie?localStorage.cookie:null,c.name=a.guest.name,c.slug=a.c.genId(6),c.title=a.guest.name,c.aff=a.site.aff?a.site.aff:"online",c.source=location.href,c.type="Online",c.date_created=a.c.formatDataDate(new Date),c.date_updated=a.c.formatDataDate(new Date),s.contact=c,s.so=n,s.items=a.items,a.loading=!0,e.next=20,a.api.create("so_upsert",s);case 20:e.sent,a.c.toast("Đã lưu đơn hàng","positive"),console.log(""),a.reset(),a.loading=!1;case 25:case"end":return e.stop()}}),e)})))()},fillSelected:function(t){var e=this;e.selectedIndex=t||0,e.selected=e.objects.find((function(e){return e.id==t})),e.splitterModel=50,e.tab="info",e.forceRenderer(),e.c.isMobile()?(e.dialog=!0,e.splitterModel=100):e.dialog=!1},forceRenderer:function(){this.componentKey+=1},print:function(t){var e=this.$refs[t];e&&(console.log(""),this.c.print(e))},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)},emitParent:function(t,e){var a=this;a.$emit(t,e),a.$forceUpdate()}}},g=h,f=(a("2bff"),a("2877")),v=a("f531"),b=a("87fe"),x=a("4983"),_=a("068f"),y=a("58a8"),C=a("65c6"),q=a("0016"),S=a("27f9"),k=a("9c40"),w=a("54e1"),T=a("2c91"),P=a("4e73"),Q=a("1c1c"),L=a("66e5"),j=a("4074"),$=a("0378"),M=a("ddd8"),z=a("05c0"),I=a("b19c"),D=a("eb85"),O=a("714f"),V=a("eebe"),A=a.n(V),R=Object(f["a"])(g,d,u,!1,null,"27e3d5bf",null),B=R.exports;A()(R,"components",{QStepper:v["a"],QStep:b["a"],QScrollArea:x["a"],QImg:_["a"],QBadge:y["a"],QToolbar:C["a"],QIcon:q["a"],QInput:S["a"],QBtn:k["a"],QBanner:w["a"],QSpace:T["a"],QMenu:P["a"],QList:Q["a"],QItem:L["a"],QItemSection:j["a"],QForm:$["a"],QSelect:M["a"],QTooltip:z["a"],QStepperNavigation:I["a"],QSeparator:D["a"]}),A()(R,"directives",{Ripple:O["a"]});var N={name:"App",components:{Upsert:B},data:function(){var t;return t={c:this.$common,db:null,api:null,leftDrawerOpen:!1,collection:"product",module:"SO",loading:!1,componentKey:0,search:"",splitterModel:60,currentIndex:0,selected:{},sequence:0,inputs:[],step:1,filter:"",site:{},guest:{},quantity:1,cart:[],item:{},aff:"online",subTotal:0,total:0,cog:0,shippingPrice:0,taxValue:0,memberId:"",coupon:"",coin:0,coinAdd:0,coinSubtract:0,lead:[],showLeads:!1,objects:[]},o()(t,"splitterModel",50),o()(t,"tab","view"),o()(t,"dialog",!1),o()(t,"soTemps",[]),o()(t,"selected",{}),o()(t,"status",""),o()(t,"showMembership",!1),o()(t,"sample",""),o()(t,"banners",[]),o()(t,"slider",[]),o()(t,"slide",1),o()(t,"category",[]),o()(t,"products",[]),t},computed:{list:function(){return this.$store.state.list.items},profile:function(){return this.$store.state.user.profile},fsearch:function(){var t=this,e=[];e=t.objects,t.filter&&""!=t.filter&&(e=e.filter((function(e){var a=t.filter.toLowerCase(),s=e.type?e.type.toLowerCase():"",i=e.status?e.status.toLowerCase():"",n=e.category?e.category.toLowerCase():"",c=e.group?e.group.toLowerCase():"",r=e.lang?e.lang.toLowerCase():"";return s==a||i==a||n==a||c==a||r==a})));var a=t.search.toLowerCase();return""==a?e:e.filter((function(t){var e=t.title?t.title.toLowerCase():"",s=t.sku?t.sku.toLowerCase():"",i=t.summary?t.summary.toLowerCase():"",n=t.name?t.name.toLowerCase():"";return e.includes(a)||s.includes(a)||i.includes(a)||n.includes(a)}))},items:function(){return this.cart.map((function(t){var e={};return e.sku=t.sku,e.unit=t.unit,e.title=t.title,e.price=t.price,e.quantity=t.quantity,e.images=t.images,e.warranty=t.warranty?t.warranty:0,e.parent_id=null,e}))},tax:function(){return window.tax?window.tax.value.split(",").map((function(t){return parseInt(t)})):[0,10]},discount:function(){return 1e3*this.coinSubtract},discountPer:function(){if(-1!=["abc","123","abcd","1234"].indexOf(this.coupon))return 10}},mounted:function(){},created:function(){this.init()},methods:{init:function(){var t=this;t.api=new t.$api(t.collection),t.api.setDomain(t.profile.domain),t.loadList(),t.sample="https://previews.123rf.com/images/mandu77/mandu771604/mandu77160400012/55773730-summer-sale-card-colorful-summer-sale-banner-or-poster-super-summer-sale-big-summer-sale-background-.jpg",t.loadSlider(),t.loadCategory(),t.loadProducts()},loadList:function(){var t=this;t.api.getAll("list").then((function(e){if(console.log(""),e.data.count<=0)return t.loading=!1,[];t.list=e.data.objects}))},loadSlider:function(){var t=this;t.api.get("site","home").then((function(e){var a=e.data;t.slider=a.objects[0].slider.split(",").map((function(t){var e={};return e.image=t,e})),t.banners=a.objects[0].images.split(",").map((function(t){var e={url:"#"};return e.image=t,e}))}))},loadBanners:function(){var t=this;t.banners=[{text:"Banner",url:"/",image:"https://image.freepik.com/free-photo/abstract-blurry-modern-fashion-clothes-store-shopping-mall-background-clothing-shopping-concept_47840-1245.jpg"},{text:"Banner",url:"/",image:"https://cdn.quasar.dev/img/mountains.jpg"},{text:"Banner",url:"/",image:"https://cdn.quasar.dev/img/mountains.jpg"}]},loadCategory:function(){var t=this;t.category=[{text:"Áo thun",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/z2517872264865-cb4c97f0a7c0cefc09838debe4efa576.jpg?v=1623470812000"},{text:"Áo khoác",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/red-wave1.jpg?v=1614752380000"},{text:"Áo sơ mi",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/73ae5155-3df1-4c4e-8472-dfd89ab10a3e.jpg?v=1617960744000"},{text:"Quần ngắn",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/ae4c2c7d-3868-4a2f-aaa1-187ddefdc9e4.jpg?v=1617961068000"},{text:"Phụ kiện",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/fc173626-cfba-4584-b58b-60e5f61a2bfc.jpg?v=1618385012000"},{text:"Hoodie",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/0006bbef-aca2-4794-b71b-d8bdd7827708.jpg?v=1618385037000"},{text:"Sweater",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/b8264769-edcd-4f6b-b3ad-d99b8062ffed.jpg?v=1618385025000"}]},loadProducts:function(){var t=this;t.products=[{text:"Áo thun",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/z2517872264865-cb4c97f0a7c0cefc09838debe4efa576.jpg?v=1623470812000"},{text:"Áo khoác",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/red-wave1.jpg?v=1614752380000"},{text:"Áo sơ mi",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/73ae5155-3df1-4c4e-8472-dfd89ab10a3e.jpg?v=1617960744000"},{text:"Quần ngắn",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/ae4c2c7d-3868-4a2f-aaa1-187ddefdc9e4.jpg?v=1617961068000"},{text:"Phụ kiện",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/fc173626-cfba-4584-b58b-60e5f61a2bfc.jpg?v=1618385012000"},{text:"Hoodie",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/0006bbef-aca2-4794-b71b-d8bdd7827708.jpg?v=1618385037000"},{text:"Sweater",url:"/",image:"https://bizweb.dktcdn.net/thumb/large/100/419/232/products/b8264769-edcd-4f6b-b3ad-d99b8062ffed.jpg?v=1618385025000"}]},getAll:function(t){var e=this;e.loading=!0,e.api.getAll(t).then((function(t){console.log(""),t.data.count<=0||(e.objects=t.data.objects),e.loading=!1}))},fetchFilter:function(t){var e=this,a=[];a=e.objects.map((function(e){return e[t]}));var s=[];return a.forEach((function(t){t&&s.indexOf(t)<0&&s.push(t)})),s},getLeadByPhone:function(t){var e=this;return c()(regeneratorRuntime.mark((function a(){var s,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e,s.lead=[],t&&!(t.length<3)){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,s.api.getLikePhone("contact",t);case 6:i=a.sent,n=i.data,n.count>=1&&(s.lead=n.objects),s.showLeads=!0,e.$nextTick().then((function(){console.log(s.$refs.guestPhone.focus())})),s.c.log(s.$refs.guestPhone);case 12:case"end":return a.stop()}}),a)})))()},setGuest:function(t){var e=this;this.guest=t,e.c.log(this.guest),this.lead=[],this.showLeads=!1,e.forceRenderer()},reset:function(){var t=this;t.cart=[],t.guest={},t.step=1,t.status=""},create_new:function(){var t=this;t.reset(),t.forceRenderer()},fillTemp:function(t){var e=this;e.soTemps.push(t),console.log("")},removeTemp:function(t){var e=this;e.soTemps=e.soTemps.filter((function(e){return e.code!=t}))},loadTemp:function(t){var e=this;e.cart=[],e.guest={};var a=confirm("Bạn có chắc?");if(!a)return!1;console.log(""),e.cart=t.cart,e.guest=t.contact,e.forceRenderer(),e.c.isMobile()?(e.dialog=!0,e.splitterModel=100):e.dialog=!1},addToCart:function(t){var e=this;this.item.quantity=1;for(var a=0;a<this.cart.length;a++)this.cart[a].id==this.item.id&&this.cart.splice(a,1);this.cart.push(this.item),e.forceRenderer(),e.c.isMobile()?(e.dialog=!0,e.splitterModel=100):e.dialog=!1},removeRebuildCart:function(t){var e=this;e.cart=t,e.forceRenderer()},forceRenderer:function(){this.componentKey+=1},print:function(t){var e=this.$refs[t];e&&(console.log(""),this.c.print(e))},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)}}},E=N,G=(a("a48d"),a("4d5a")),H=a("880c"),U=a("62cd"),K=a("a12b"),X=a("f09f"),F=a("cb32"),J=a("8380"),W=Object(f["a"])(E,s,i,!1,null,"2cf72190",null);e["default"]=W.exports;A()(W,"components",{QLayout:G["a"],QCarousel:H["a"],QCarouselSlide:U["a"],QImg:_["a"],QToolbar:C["a"],QSpace:T["a"],QVirtualScroll:K["a"],QCard:X["a"],QBtn:k["a"],QAvatar:F["a"],QSpinnerDots:J["a"]})}}]);