(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{d836:function(t,e,r){},e8c2:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",[t.c.canAccessModule(t.collection,t.profile.roles)?a("q-splitter",{staticClass:"bg-white",attrs:{limits:[40,100]},scopedSlots:t._u([{key:"before",fn:function(){return[a("div",{staticStyle:{height:"100vh"}},[a("q-toolbar",[a("q-input",{staticStyle:{width:"50%"},attrs:{dense:"","stack-label":"",outlined:"",label:t.c.t("Search")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("q-space"),a("q-btn-dropdown",{attrs:{flat:"",color:"primary",label:t.c.t("Product Category")}},[a("q-list",{attrs:{separator:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.filter=""}}},[t._v(t._s(t.c.t("All")))]),t._l(t.category,(function(e,r){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:r,attrs:{clickable:""},on:{click:function(r){t.filter=e.slug}}},[a("q-item-section",[a("q-item-label",[t._v(t._s(e.title))])],1)],1)}))],2)],1),a("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"","no-caps":"",color:"primary",icon:"post_add",label:t.c.t("New")},on:{click:function(e){return t.create_new()}}})],1),a("q-separator"),a("q-scroll-area",{staticStyle:{height:"80vh"}},[a("div",{staticClass:"row q-col-gutter-sm q-pa-sm"},t._l(t.fsearch,(function(e,r){return a("div",{staticClass:"col-3 col-md-2 cursor-pointer"},[a("q-card",{staticClass:"card",attrs:{flat:"",bordered:"",clickable:""},on:{click:function(r){t.item=e,t.addToCart(t.item)}}},[a("q-img",{staticClass:"image",attrs:{ratio:3/4,src:t.c.showImage(e.images),transition:"jump-up"}}),a("q-card-section",{staticClass:"q-pa-xs"},[a("div",{staticClass:"text-caption ellipsis-2-lines",domProps:{innerHTML:t._s(e.title)}}),a("div",{staticClass:"text-caption text-primary"},[t._v(t._s(t.c.formatCurrency(e.price))+"\n                                    ")])])],1)],1)})),0)]),a("q-separator"),a("div",{staticClass:"q-pa-sm"},[a("div",{staticClass:"bold-font"},[t._v("\n                        "+t._s(t.c.t("Temp Orders"))+"\n                    ")]),t._l(t.soTemps,(function(e,r){return a("q-chip",{key:r,attrs:{clickable:"",removable:"",color:"info",icon:"shopping_basket"},on:{click:function(r){return t.loadTemp(e)},remove:function(r){t.removeTemp(e.code),t.selected=null}}},[a("div",{staticClass:"q-pa-sm"},[t._v(t._s(e.code)+"\n                            "),a("q-tooltip",[t._v(t._s(e.contact.name)+": "+t._s(e.cart.length)+" "+t._s(t.c.t("product"))+" - "+t._s(t.c.t("Total"))+": "+t._s(t.c.formatCurrency(e.total))+"\n                            ")])],1)])}))],2)],1)]},proxy:!0},t.c.isMobile()?null:{key:"separator",fn:function(){return[a("q-avatar",{attrs:{color:"primary","text-color":"white",size:"28px",icon:"drag_indicator"}})]},proxy:!0},{key:"after",fn:function(){return[a("div",{staticStyle:{"max-height":"100vh"}},[t.cart?a("Upsert",{key:t.componentKey,attrs:{propCart:t.cart,propGuest:t.guest},on:{reloadTemp:t.fillTemp,reloadUpsert:function(e){return t.getAll()},reloadRemove:t.removeRebuildCart}}):t._e()],1)]},proxy:!0}],null,!0),model:{value:t.splitterModel,callback:function(e){t.splitterModel=e},expression:"splitterModel"}}):a("div",[a("div",{staticClass:"absolute-center"},[a("q-img",{attrs:{width:"25vw",src:r("5183")}}),a("div",{staticClass:"text-center q-my-lg"},[t._v(t._s(t.c.t("Access Denied")))])],1)]),a("q-dialog",{attrs:{position:"bottom"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("div",{staticStyle:{"max-height":"80vh"}},[t.cart?a("Upsert",{key:t.componentKey,attrs:{propCart:t.cart,propGuest:t.guest},on:{reloadTemp:t.fillTemp,reloadUpsert:function(e){return t.getAll()}}}):t._e()],1)])],1)},n=[],o=r("c973"),i=r.n(o),s=r("9523"),c=r.n(s),l=(r("96cf"),r("e260"),r("d3b7"),r("e6cf"),r("3ca3"),r("ddb0"),r("4de4"),r("caad"),r("2532"),r("ac1f"),r("841c"),r("b0c0"),r("d81d"),r("1276"),r("159b"),r("25f0"),r("a434"),r("bd4c"),{name:"Pos",components:{Upsert:function(){return Promise.all([r.e(0),r.e(1),r.e(21)]).then(r.bind(null,"e247"))},FilterByCategory:function(){return r.e(1).then(r.bind(null,"74db"))}},data:function(){var t;return t={c:this.$common,db:null,api:null,leftDrawerOpen:!1,collection:"product",module:"SO",loading:!1,componentKey:0,search:"",splitterModel:60,currentIndex:0,selected:{},sequence:0,inputs:[],step:1,filter:"",site:{},guest:{},quantity:1,cart:[],item:{},aff:"online",subTotal:0,total:0,cog:0,shippingPrice:0,taxValue:0,memberId:"",coupon:"",coin:0,coinAdd:0,coinSubtract:0,lead:[],showLeads:!1,category:[],objects:[]},c()(t,"splitterModel",50),c()(t,"tab","view"),c()(t,"dialog",!1),c()(t,"soTemps",[]),c()(t,"selected",{}),c()(t,"status",""),c()(t,"showMembership",!1),t},computed:{profile:function(){return this.$store.state.user.profile},list:function(){return this.$store.state.list.items},fsearch:function(){var t=this,e=[];e=t.objects,t.filter&&""!=t.filter&&(e=e.filter((function(e){var r=t.filter.toLowerCase(),a=e.type?e.type.toLowerCase():"",n=e.status?e.status.toLowerCase():"",o=e.group?e.group.toLowerCase():"",i=e.lang?e.lang.toLowerCase():"",s=e.category?e.category.toLowerCase():"";return a==r||n==r||s.includes(r)||o==r||i==r})));var r=t.search?t.search.toLowerCase():"";return""==r?e:e.filter((function(t){var e=t.title?t.title.toLowerCase():"",a=t.sku?t.sku.toLowerCase():"",n=t.category?t.category.toLowerCase():"",o=t.name?t.name.toLowerCase():"";return e.includes(r)||a.includes(r)||n.includes(r)||o.includes(r)}))},items:function(){return this.cart.map((function(t){var e={};return e.sku=t.sku,e.unit=t.unit,e.title=t.title,e.price=t.price,e.quantity=t.quantity,e.images=t.images,e.warranty=t.warranty?t.warranty:0,e.parent_id=null,e}))},tax:function(){return window.tax?window.tax.value.split(",").map((function(t){return parseInt(t)})):[0,10]},discount:function(){return 1e3*this.coinSubtract},discountPer:function(){if(-1!=["abc","123","abcd","1234"].indexOf(this.coupon))return 10}},mounted:function(){},created:function(){this.init()},methods:{init:function(){var t=this;return i()(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t,r.api=new r.$api(r.collection),r.api.setDomain(r.profile.domain),r.getAll(r.collection),r.loadCategory("product"),r.c.isMobile()&&(r.splitterModel=100);case 6:case"end":return e.stop()}}),e)})))()},getAll:function(t){var e=this;e.loading=!0,e.api.getAll(t).then((function(t){console.log(""),t.data.count<=0||(e.objects=t.data.objects),e.loading=!1}))},loadCategory:function(t){var e=this;return i()(regeneratorRuntime.mark((function r(){var a,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e,r.next=3,a.api.getAll("category");case 3:return n=r.sent,o=[n],r.next=7,Promise.all(o);case 7:i=n.data,a.category=i.objects.filter((function(e){return e.parent_slug&&e.parent_slug==t}));case 9:case"end":return r.stop()}}),r)})))()},fetchFilter:function(t){var e=this,r=[];r=e.objects.map((function(e){return e[t]}));var a=[];return r.forEach((function(t){t&&a.indexOf(t)<0&&a.push(t)})),a},getLeadByPhone:function(t){var e=this;return i()(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e,a.lead=[],t&&!(t.length<3)){r.next=4;break}return r.abrupt("return");case 4:return r.next=6,a.api.getLikePhone("contact",t.toString());case 6:n=r.sent,o=n.data,o.count>=1&&(a.lead=o.objects),a.showLeads=!0,e.$nextTick().then((function(){console.log(a.$refs.guestPhone.focus())})),a.c.log(a.$refs.guestPhone);case 12:case"end":return r.stop()}}),r)})))()},setGuest:function(t){var e=this;this.guest=t,e.c.log(this.guest),this.lead=[],this.showLeads=!1,e.forceRenderer()},reset:function(){var t=this;t.cart=[],t.guest={},t.step=1,t.status=""},create_new:function(){var t=this;t.reset(),t.forceRenderer()},fillTemp:function(t){var e=this;e.soTemps.push(t),console.log("")},removeTemp:function(t){var e=this;e.soTemps=e.soTemps.filter((function(e){return e.code!=t}))},loadTemp:function(t){var e=this;e.cart=[],e.guest={};var r=confirm("Bạn có chắc?");if(!r)return!1;console.log(""),e.cart=t.cart,e.guest=t.contact,e.forceRenderer(),e.c.isMobile()?(e.dialog=!0,e.splitterModel=100):e.dialog=!1},addToCart:function(t){var e=this;this.item.quantity=1;for(var r=0;r<this.cart.length;r++)this.cart[r]._id==this.item._id&&this.cart.splice(r,1);this.cart.push(this.item),e.forceRenderer(),e.c.isMobile()?(e.dialog=!0,e.splitterModel=100):e.dialog=!1},removeRebuildCart:function(t){var e=this;e.cart=t,e.forceRenderer()},forceRenderer:function(){this.componentKey+=1},print:function(t){var e=this.$refs[t];e&&(console.log(""),this.c.print(e))},exportCSV:function(){var t=this;t.c.exportCSV(t.fsearch,t.columns,t.collection)}}}),u=l,p=(r("f4d1"),r("2877")),d=r("4d5a"),f=r("068f"),m=r("8562"),h=r("65c6"),g=r("27f9"),v=r("2c91"),b=r("f20b"),w=r("1c1c"),y=r("66e5"),C=r("4074"),_=r("0170"),q=r("9c40"),k=r("eb85"),x=r("4983"),T=r("f09f"),L=r("a370"),Q=r("b047"),S=r("05c0"),M=r("cb32"),R=r("24e8"),A=r("7f67"),P=r("eebe"),j=r.n(P),I=Object(p["a"])(u,a,n,!1,null,"35a91dfb",null);e["default"]=I.exports;j()(I,"components",{QLayout:d["a"],QImg:f["a"],QSplitter:m["a"],QToolbar:h["a"],QInput:g["a"],QSpace:v["a"],QBtnDropdown:b["a"],QList:w["a"],QItem:y["a"],QItemSection:C["a"],QItemLabel:_["a"],QBtn:q["a"],QSeparator:k["a"],QScrollArea:x["a"],QCard:T["a"],QCardSection:L["a"],QChip:Q["a"],QTooltip:S["a"],QAvatar:M["a"],QDialog:R["a"]}),j()(I,"directives",{ClosePopup:A["a"]})},f4d1:function(t,e,r){"use strict";r("d836")}}]);